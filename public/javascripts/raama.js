var raama=webpackJsonp_name_([1],[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=a(1),o=n(r),i=a(4),l=a(24),s=n(l),d=a(62),u=(a(63),a(108)),c=n(u),p=a(72),h=a(109),f=h.BrowserRouter,m=(0,i.createStore)(s.default,(0,d.composeWithDevTools)((0,i.applyMiddleware)(c.default))),b=a(261);if(initData=JSON.parse(initData),userData=JSON.parse(userData),o.default.initData=initData,o.default.userData=userData,o.default.module="raama",o.default.pageName="Raamatupidamine",o.default.gridConfig=initData.docConfig,o.default.menu=initData.menu?initData.menu.data:[],o.default.keel="EST",localStorage.getItem("user")){var y=JSON.parse(localStorage.getItem("user")),g=new Date,v=y.loadedDate?new Date(y.loadedDate):null;v&&v.getDate()===g.getDate()?(m.dispatch({type:"user",user:y}),o.default.userData=Object.assign({},o.default.userData,y)):delete localStorage.user}m.dispatch({type:"model",payload:"raama"}),p.hydrate(React.createElement(f,null,React.createElement(b,{initData:initData,userData:o.default.userData,store:m})),document.getElementById("doc"))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(66),d=(a(113),a(1),a(144),a(156),a(262)),u=a(304),c=a(306),p=a(329),h=a(331),f=a(333),m=a(335),b=a(337),y=a(339),g=a(341),v=a(343),k=a(345),w=a(351),C=a(355),D=a(357),E=a(359),_=a(361),O=a(363),P=a(368),T=a(375),x=a(377),R=a(379),S=a(381),j=a(383),I=a(385),L=a(387),B=a(389),M=a(109),A=M.Route,V=a(162),F=V.StyleRoot,G="raama",K=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.prepareParamsForToolbar=a.prepareParamsForToolbar.bind(a),a}return o(t,e),l(t,[{key:"render",value:function(){var e=this,t=(this.prepareParamsForToolbar(),this.props.store);return s.createElement(F,null,s.createElement(A,{exact:!0,path:"/raama",render:function(a){return s.createElement(d,{store:t,history:a.history,initData:e.props.initData,module:G})}}),s.createElement(A,{exact:!0,path:"/raama/asutused/:docId",render:function(e){return s.createElement(c,i({},e,{module:G,store:t,history:e.history}))}}),s.createElement(A,{exact:!0,path:"/raama/asutused",render:function(a){return s.createElement(u,{history:a.history,store:t,initData:e.props.initData,module:G})}}),s.createElement(A,{exact:!0,path:"/raama/tunnus/:docId",component:f}),s.createElement(A,{exact:!0,path:"/raama/tunnus",render:function(a){return s.createElement(m,{history:a.history,store:t,initData:e.props.initData,module:G})}}),s.createElement(A,{exact:!0,path:"/raama/project/:docId",component:b,store:t}),s.createElement(A,{exact:!0,path:"/raama/project",render:function(a){return s.createElement(y,{history:a.history,store:t,initData:e.props.initData,module:G})}}),s.createElement(A,{exact:!0,path:"/raama/journal/:docId",component:D,store:t,module:G}),s.createElement(A,{exact:!0,path:"/raama/journal",render:function(a){return s.createElement(C,{history:a.history,store:t,initData:e.props.initData,module:G})}}),s.createElement(A,{exact:!0,path:"/raama/arv/:docId",render:function(e){return s.createElement(w,i({},e,{module:G,store:t,history:e.history}))}}),s.createElement(A,{exact:!0,path:"/raama/arv",render:function(a){return s.createElement(k,{history:a.history,store:t,initData:e.props.initData,module:G})}}),s.createElement(A,{exact:!0,path:"/raama/smk/:docId",render:function(e){return s.createElement(P,i({},e,{module:G,store:t,history:e.history}))}}),s.createElement(A,{exact:!0,path:"/raama/smk",render:function(a){return s.createElement(O,{history:a.history,store:t,initData:e.props.initData,module:G})}}),s.createElement(A,{exact:!0,path:"/raama/pank_vv/:docId",component:_,store:t}),s.createElement(A,{exact:!0,path:"/raama/pank_vv",render:function(t){return s.createElement(E,{module:G,history:t.history,initData:e.props.initData})}}),s.createElement(A,{exact:!0,path:"/raama/vmk/:docId",render:function(e){return s.createElement(x,i({},e,{module:G,store:t,history:e.history}))}}),s.createElement(A,{exact:!0,path:"/raama/vmk",render:function(t){return s.createElement(T,{history:t.history,initData:e.props.initData,module:G})}}),s.createElement(A,{exact:!0,path:"/raama/nomenclature/:docId",render:function(e){return s.createElement(g,i({},e,{module:G,store:t,history:e.history}))}}),s.createElement(A,{exact:!0,path:"/raama/nomenclature",render:function(a){return s.createElement(v,{history:a.history,store:t,module:G,initData:e.props.initData})}}),s.createElement(A,{exact:!0,path:"/raama/kontod/:docId",store:t,component:p}),s.createElement(A,{exact:!0,path:"/raama/kontod",render:function(a){return s.createElement(h,{history:a.history,module:G,store:t,initData:e.props.initData})}}),s.createElement(A,{exact:!0,path:"/raama/kaive_aruanne",render:function(a){return s.createElement(R,{history:a.history,module:G,store:t,initData:e.props.initData})}}),s.createElement(A,{exact:!0,path:"/raama/kaibeandmik",render:function(a){return s.createElement(S,{history:a.history,module:G,store:t,initData:e.props.initData})}}),s.createElement(A,{exact:!0,path:"/raama/kontoandmik",render:function(a){return s.createElement(j,{history:a.history,module:G,store:t,initData:e.props.initData})}}),s.createElement(A,{exact:!0,path:"/raama/arved_koodi_jargi",render:function(a){return s.createElement(I,{history:a.history,module:G,store:t,initData:e.props.initData})}}),s.createElement(A,{exact:!0,path:"/raama/arve_kokkuvote",render:function(a){return s.createElement(L,{history:a.history,module:G,store:t,initData:e.props.initData})}}),s.createElement(A,{exact:!0,path:"/raama/rekv",render:function(e){return s.createElement(B,i({},e,{module:G,store:t,history:e.history}))}}))}},{key:"prepareParamsForToolbar",value:function(){return{btnStart:{show:!0},btnLogin:{show:!0,disabled:!1},btnAccount:{show:!0,disabled:!1}}}}]),t}(s.Component);e.exports=K},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(a(1),a(66)),s=a(263),d=a(303),u="RAAMA",c=a(160).TEATIS.toolbarProps,p=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.btnEditClick=a.btnEditClick.bind(a),a.renderer=a.renderer.bind(a),a.data=[],a}return o(t,e),i(t,[{key:"componentDidMount",value:function(){this.props.store&&this.props.store.dispatch({type:"module",payload:"raama"})}},{key:"render",value:function(){var e=void 0;return this.props.store&&(e=this.props.store.getState().statuses.user),l.createElement(s,{initData:this.props.initData,history:this.props.history?this.props.history:null,module:this.props.module,store:this.props.store,ref:"register",docTypeId:u,style:d,btnEditClick:this.btnEditClick,toolbarProps:c,render:this.renderer})}},{key:"renderer",value:function(e){return e.gridData&&(this.data=e.gridData),null}},{key:"btnEditClick",value:function(e){var t=this.data.findIndex(function(t){return t.id==e});if(t>-1){var a=this.data[t].doc_type_id;return this.props.history.push({pathname:"/raama/"+a+"/"+e,state:{module:this.props.module}})}}}]),t}(l.PureComponent);e.exports=p},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),PropTypes=__webpack_require__(113),React=__webpack_require__(66),_fetchData=__webpack_require__(31),DocContext=__webpack_require__(1),Menu=__webpack_require__(144),DocRights=__webpack_require__(249),checkRights=__webpack_require__(250),createEmptyFilterData=__webpack_require__(3),prepareSqlWhereFromFilter=__webpack_require__(264),Const=__webpack_require__(160),Liimit=Const.RECORDS_LIMIT,prepareData=__webpack_require__(265),getTextValue=__webpack_require__(150),DataGrid=__webpack_require__(267),StartMenu=__webpack_require__(156),BtnAdd=__webpack_require__(152),BtnEdit=__webpack_require__(154),BtnDelete=__webpack_require__(268),BtnPrint=__webpack_require__(288),BtnPdf=__webpack_require__(289),BtnFilter=__webpack_require__(290),BtnSelect=__webpack_require__(291),BtnEmail=__webpack_require__(292),BtnRefresh=__webpack_require__(293),ToolbarContainer=__webpack_require__(145),GridFilter=__webpack_require__(294),ModalPage=__webpack_require__(245),InputText=__webpack_require__(296),ModalPageDelete=__webpack_require__(269),ModalReport=__webpack_require__(298),styles=__webpack_require__(302),Documents=function(_React$Component){function Documents(e){_classCallCheck(this,Documents);var t=_possibleConstructorReturn(this,(Documents.__proto__||Object.getPrototypeOf(Documents)).call(this,e));return t.gridData=[],t.gridConfig=DocContext.gridConfig?DocContext.gridConfig[e.docTypeId]:[],t.filterData=DocContext.filter&&DocContext.filter[e.docTypeId]?DocContext.filter[e.docTypeId]:[],e.initData&&e.initData.result?(t.gridData=e.initData.result.data||[],t.gridConfig=t.gridConfig.length?t.gridConfig:e.initData.gridConfig,t.subtotals=e.initData.subtotals||[]):e.initData&&e.initData.gridData&&(t.gridData=e.initData.gridData||[],t.gridConfig=t.gridConfig.length?t.gridConfig:e.initData.gridConfig,t.subtotals=[]),t.docTypeId=e.docTypeId,t.state={value:t.gridData.length?t.gridData[0].id:0,sortBy:{},sqlWhere:"",getFilter:!1,isDelete:!1,hasStartMenuVisible:!1,startMenuValue:"parentid",warning:"",warningType:"",limit:Liimit,isEmptyFilter:!1,showSelectFields:!1,isReport:!1,txtReport:[]},t._bind("btnAddClick","clickHandler","btnEditClick","dblClickHandler","headerClickHandler","headerClickHandler","btnFilterClick","btnSelectClick","btnRefreshClick","modalPageBtnClick","modalDeletePageBtnClick","filterDataHandler","renderFilterToolbar","btnStartClickHanler","renderStartMenu","startMenuClickHandler","fetchData","handleInputChange","btnEmailClick","setRegisterName","modalReportePageBtnClick"),t}return _inherits(Documents,_React$Component),_createClass(Documents,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;DocContext.filter||(DocContext.filter={}),DocContext.docTypeId=this.docTypeId;var reload=!1;if(this.props.initData&&this.props.initData.docTypeId&&this.props.initData.docTypeId.toUpperCase()!==this.docTypeId.toUpperCase()&&(reload=!0),!DocContext.filter[this.docTypeId]&&DocContext.gridConfig[this.docTypeId]){var config=DocContext.gridConfig[this.docTypeId],filter=prepareData(config,this.docTypeId);config.forEach(function(row){if(row.default){var value=void 0;try{value=eval(row.default)}catch(e){}if(value){var idx=filter.findIndex(function(e){return e.id==row.id});idx&&(filter[idx].value=value)}}}),filter&&filter.length&&(DocContext.filter[this.docTypeId]=filter)}if(DocContext.filter[this.docTypeId]&&DocContext.filter[this.docTypeId].length>0&&(this.filterData=DocContext.filter[this.docTypeId],reload=!0),reload||!this.props.initData||!this.gridData||!this.gridData.length||!this.props.initData.docTypeId){var sqlWhere=prepareSqlWhereFromFilter(this.filterData,this.docTypeId);this.setState({sqlWhere:sqlWhere},function(){_this2.fetchData("selectDocs")})}if(DocContext[this.docTypeId.toLowerCase()]){var docId=DocContext[this.docTypeId.toLowerCase()];this.setState({value:docId})}this.setRegisterName()}},{key:"render",value:function(){var e=Object.assign({},styles,this.props.style?this.props.style:{}),t=this.state.warningType&&styles[this.state.warningType]?styles[this.state.warningType]:null,a={btnStart:{show:!0},btnLogin:{show:!0,disabled:!1},btnAccount:{show:!0,disabled:!1}};return React.createElement("div",{style:e.doc},React.createElement(Menu,{params:a,ref:"menu",store:this.props.store,history:this.props.history,rekvId:DocContext.userData?DocContext.userData.asutusId:0,module:this.props.module}),React.createElement("div",{style:e.docRow},this.props.render(this)),this.renderFilterToolbar(),this.renderDocToolBar(),this.state.warning?React.createElement(ToolbarContainer,{ref:"toolbar-container"},React.createElement("div",{style:t},React.createElement("span",null,this.state.warning))):null,React.createElement("div",{style:e.gridContainer},React.createElement(DataGrid,{ref:"dataGrid",style:e.grid.mainTable,gridData:this.gridData,gridColumns:this.gridConfig,subtotals:this.subtotals,onClick:this.clickHandler,onDblClick:this.dblClickHandler,onHeaderClick:this.headerClickHandler,custom_styling:this.props.custom_styling?this.props.custom_styling:null,isSelect:this.state.showSelectFields,value:this.state.value}),this.state.getFilter?React.createElement(ModalPage,{ref:"modalpageFilter",modalPageBtnClick:this.modalPageBtnClick,modalPageName:"Filter",show:!0},React.createElement(GridFilter,{ref:"gridFilter",focusElement:this.gridConfig[1].id,docTypeId:this.docTypeId,handler:this.filterDataHandler,gridConfig:this.gridConfig,data:this.filterData})):null,React.createElement(ModalPageDelete,{show:this.state.isDelete,modalPageBtnClick:this.modalDeletePageBtnClick.bind(this)}),React.createElement(ModalReport,{show:this.state.isReport,report:this.state.txtReport,modalPageBtnClick:this.modalReportePageBtnClick})))}},{key:"setRegisterName",value:function(){var e=this,t=DocContext.menu.find(function(t){return t.kood===e.props.docTypeId});t&&(DocContext.pageName=t.name)}},{key:"handleInputChange",value:function(e,t){this.setState({limit:!t||t>Liimit?Liimit:t})}},{key:"headerClickHandler",value:function(e){var t=this;if("select"!=e[0].column){var a=this.gridConfig.find(function(t){return t.id==e[0].column});a&&a.type&&Object.assign(e[0],{type:a.type}),this.setState({sortBy:e},function(){return t.fetchData("selectDocs")})}}},{key:"dblClickHandler",value:function(){this.btnEditClick()}},{key:"clickHandler",value:function(e,t,a){t&&"number"==typeof t&&this.setState({value:t})}},{key:"btnFilterClick",value:function(){this.filterData.length||(this.filterData=createEmptyFilterData(this.gridConfig,this.filterData,this.docTypeId)),this.setState({getFilter:!0})}},{key:"btnRefreshClick",value:function(){var e=this;this.fetchData("selectDocs").then(function(){e.setState({warning:""+getTextValue("Edukalt"),warningType:"ok"})})}},{key:"btnAddClick",value:function(){return this.props.btnAddClick?void this.props.btnAddClick(this.state.value):this.props.history.push({pathname:"/"+this.props.module+"/"+this.docTypeId+"/0",state:{module:this.props.module}})}},{key:"btnEditClick",value:function(){return this.props.btnEditClick?void this.props.btnEditClick(this.state.value):this.props.history.push({pathname:"/"+this.props.module+"/"+this.docTypeId+"/"+this.state.value,state:{module:this.props.module}})}},{key:"btnDeleteClick",value:function(){this.setState({isDelete:!0})}},{key:"btnPrintClick",value:function(){var e=this.state.sqlWhere,t=void 0,a=encodeURIComponent(""+e),n=this.filterData.filter(function(e){return!!e.value}),r=encodeURIComponent(""+JSON.stringify(n));t=this.filterData.length?"/print/"+this.docTypeId+"/"+DocContext.userData.uuid+"/"+r:"/print/"+this.docTypeId+"/"+DocContext.userData.uuid+"/0",window.open(t+"/"+a)}},{key:"btnPdfClick",value:function(){var e=this.state.sqlWhere,t=void 0,a=encodeURIComponent(""+e),n=encodeURIComponent(""+JSON.stringify(this.filterData));t=this.filterData.length?"/pdf/"+this.docTypeId+"/"+DocContext.userData.uuid+"/"+n:"/pdf/"+this.docTypeId+"/"+DocContext.userData.uuid+"/0",window.open(t+"/"+a)}},{key:"modalPageBtnClick",value:function(e){var t=this,a="";"Ok"===e?a=prepareSqlWhereFromFilter(this.filterData,this.docTypeId):(a="",this.filterData.forEach(function(e){e.value=null,e.start&&(e.start=null),e.end&&(e.end=null)})),this.setState({getFilter:!1,sqlWhere:a,isEmptyFilter:!a},function(){return t.fetchData("selectDocs")})}},{key:"modalDeletePageBtnClick",value:function(e){var t=this;this.setState({isDelete:!1}),"Ok"===e&&(this.setState({warning:getTextValue("Töötan")+"...",warningType:"notValid"}),this.fetchData("delete").catch(function(e){}).then(function(e){if(e.error_message)t.setState({warning:getTextValue("Tekkis viga")+": "+e.error_message,warningType:"error"}),e.status&&401==e.status&&setTimeout(function(){document.location="/login"},1e3);else{t.fetchData("selectDocs");var a=t.docTypeId.toLowerCase();DocContext.libs[a]&&DocContext.libs[a].length>0&&(DocContext.libs[a]=[])}}))}},{key:"filterDataHandler",value:function(e){this.filterData=e,DocContext.filter||(DocContext.filter={}),DocContext.filter[this.docTypeId]||(DocContext.filter[this.docTypeId]=[]),e&&e.length>0&&this.props.history.location&&(DocContext.filter[this.docTypeId]=this.filterData)}},{key:"btnStartClickHanler",value:function(){this.setState({hasStartMenuVisible:!0})}},{key:"startMenuClickHandler",value:function(e){return this.setState({hasStartMenuVisible:!1}),this.props.history.push({pathname:"/"+this.props.module+"/"+e,state:{module:this.props.module}})}},{key:"btnSelectClick",value:function(){this.setState({showSelectFields:!this.state.showSelectFields})}},{key:"renderFilterToolbar",value:function(){var e=this.getFilterString(),t=void 0;return e&&(t=React.createElement(ToolbarContainer,{ref:"filterToolbarContainer",position:"left"},React.createElement("span",null," Filter: ",this.getFilterString()))),t}},{key:"getFilterString",value:function(){var e="";return this.filterData.map(function(t){var a=t.sqlNo&&0==t.sqlNo?"<>":"=";t.start?e=e+" "+t.name+">="+t.start+","+t.name+"<="+t.end+";":t.value&&(e=e+t.name+":"+a+" "+t.value+"; ")}),e}},{key:"renderDocToolBar",value:function(){var e=(this.getFilterString(),this.prepareParamsForToolbar());return React.createElement("div",null,React.createElement("div",{style:styles.docRow},React.createElement(InputText,{ref:"input-limit",title:"Limiit:",name:"limit",style:styles.limit,value:getTextValue(this.state.limit+""||Liimit,2),readOnly:!1,onChange:this.handleInputChange}),React.createElement(ToolbarContainer,{ref:"toolbarContainer"},React.createElement(BtnAdd,{onClick:this.btnAddClick,show:e.btnAdd.show,disable:e.btnAdd.disabled}),React.createElement(BtnEdit,{onClick:this.btnEditClick,value:"Muuda",show:e.btnEdit.show,disable:e.btnEdit.disabled}),React.createElement(BtnDelete,{onClick:this.btnDeleteClick.bind(this),show:e.btnDelete.show,disable:e.btnDelete.disabled}),React.createElement(BtnPrint,{onClick:this.btnPrintClick.bind(this),show:e.btnPrint.show,value:"Trükk",disable:e.btnPrint.disabled}),React.createElement(BtnPdf,{onClick:this.btnPdfClick.bind(this),show:e.btnPdf.show,value:"PDF",disable:e.btnPdf.disabled}),React.createElement(BtnEmail,{onClick:this.btnEmailClick.bind(this),show:e.btnEmail.show,value:"Email",docTypeId:this.docTypeId,disable:e.btnEmail.disabled}),React.createElement(BtnFilter,{onClick:this.btnFilterClick}),React.createElement(BtnRefresh,{onClick:this.btnRefreshClick}),React.createElement(BtnSelect,{show:e.btnSelect.show,value:"Valida",onClick:this.btnSelectClick,ref:"grid-button-select"}))))}},{key:"renderStartMenu",value:function(){var e=void 0;return this.state.hasStartMenuVisible&&(e=React.createElement(StartMenu,{ref:"startMenu",value:this.state.startMenuValue,clickHandler:this.startMenuClickHandler})),e}},{key:"prepareParamsForToolbar",value:function(){var e=(DocRights[this.docTypeId]?DocRights[this.docTypeId]:{},DocContext.userData?DocContext.userData.roles:[],{add:!this.props.toolbarProps||!!this.props.toolbarProps.add,edit:!this.props.toolbarProps||!!this.props.toolbarProps.edit,delete:!this.props.toolbarProps||!!this.props.toolbarProps.delete,print:!this.props.toolbarProps||!!this.props.toolbarProps.print,pdf:!this.props.toolbarProps||!!this.props.toolbarProps.pdf,email:!this.props.toolbarProps||!!this.props.toolbarProps.email,start:!this.props.toolbarProps||!!this.props.toolbarProps.start});return Object.assign({btnAdd:{show:e.add,disabled:!1},btnEdit:{show:e.edit,disabled:!this.state.value},btnDelete:{show:e.delete,disabled:!this.state.value},btnPrint:{show:e.print,disabled:!1},btnPdf:{show:e.pdf,disabled:!1},btnEmail:{show:e.email,disabled:!1},btnStart:{show:e.start},btnLogin:{show:!0,disabled:!1},btnAccount:{show:!0,disabled:!1},btnSelect:{show:!(!this.gridConfig||!this.gridConfig.length)&&!!this.gridConfig.find(function(e){return"select"===e.id}),disabled:!1}},this.props.toolbarParams?this.props.toolbarParams:{})}},{key:"fetchData",value:function(e,t){var a=this,n="/newApi",r=this.state.sqlWhere;switch(e){case"delete":n="/newApi/delete";break;case"print":n="/print/"+this.docTypeId;break;case"selectDocs":n="/newApi";break;default:n="/"+e}this.setState({warning:"Töötan...",warningType:"notValid"});var o=DocContext.userData.userId,i=DocContext.userData.uuid;if(this.props.store){var l=this.props.store.getState().statuses.user;o=l.id,i=l.uuid}var s={parameter:this.docTypeId,docTypeId:this.docTypeId,sortBy:this.state.sortBy,limit:this.state.limit,docId:this.state.value,method:e,sqlWhere:r,filterData:this.filterData,lastDocId:null,module:this.props.module,userId:o,uuid:i,data:t};return new Promise(function(t,r){_fetchData.fetchDataPost(n,s).then(function(n){if(n.status&&401===n.status&&(document.location="/login"),200!==n.status)return a.setState({warning:""+n.error_message,warningType:"error"}),{result:null,status:n.status,error_message:"error "+(n.data&&n.data.error_message?"response.data.error_message":n.error_message)};if("selectDocs"===e)a.gridData=n.data.result.data,n.data&&a.props.trigger_select&&a.props.trigger_select(a),a.setState({warning:""+getTextValue("Edukalt"),warningType:"ok"});else if("delete"==e&&n.data&&n.data.result&&n.data.result.error_code){var o=getTextValue("Tekkis viga: kustutamine ebaõnnestus");return a.setState({warning:o,warningType:"error",txtReport:n.data,isReport:!(!n.data.data||!n.data.data.length)}),r(o)}t(n.data)}).catch(function(e){return a.setState({warning:getTextValue("Tekkis viga")+" "+e,warningType:"error"}),r(e)})})}},{key:"btnEmailClick",value:function(){DocContext["email-params"]={docId:this.state.docId,docTypeId:this.docTypeId,queryType:"sqlWhere",sqlWhere:this.state.sqlWhere,filterData:this.filterData},this.props.history.push("/"+this.props.module+"/e-mail/0")}},{key:"modalReportePageBtnClick",value:function(e){var t=!e||"Ok"!=e;this.setState({isReport:t})}},{key:"_bind",value:function(){for(var e=this,t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];a.forEach(function(t){return e[t]=e[t].bind(e)})}}]),Documents}(React.Component);Documents.propTypes={initData:PropTypes.shape({result:PropTypes.object,gridConfig:PropTypes.array}),docTypeId:PropTypes.string.isRequired},Documents.defaultProps={module:"raama"},module.exports=Documents},function(e,t){"use strict";var a=function(e,t){var a="",n="";return e.forEach(function(e){if(e.value)switch(a+=a.length>0?" and ":" where ",n=e.sqlNo&&0==+e.sqlNo?"NOT":"",e.type){case"text":var r=e.value.split(",").map(function(e){return"'"+e.trim()+"'"}).join(",");a=e.value.match(/,/)?a+" "+e.id+" "+n+"  in ("+r+")":"KUU_TAABEL"==t?a+"  upper("+e.id+") "+n+" like upper('%"+e.value.trim()+"%')":a+"  upper("+e.id+") "+n+" like upper('%"+e.value.trim()+"%')";break;case"string":a=a+"  upper("+e.id+") "+n+" like upper('%"+e.value.trim()+"%')";break;case"date":a="start"in e&&e.start?a+" format_date("+e.id+"::text)  >=  format_date('"+e.start+"'::text) and (format_date("+e.id+"::text)  <=  format_date('"+e.end+"'::text) or "+e.end+" is null)":"valid"==e.id?a+" (format_date("+e.id+"::text)  >=  format_date('"+e.value+"'::text) or "+e.id+" is null)":a+e.id+(n&&"NOT"==n?"<>":"=")+"'"+e.value+"'";break;case"number":a="start"in e&&e.start?a+" "+e.id+"::numeric  >=  "+e.start+" and ("+e.id+"::numeric  <=  "+e.end+" or "+e.end+" is null)":a+e.id+"::numeric  "+(n&&"NOT"==n?"<>":"=")+e.value;break;case"integer":a="start"in e&&e.start?a+" "+e.id+"  >=  "+e.start+" and ("+e.id+"  <=  "+e.end+" or "+e.end+" is null)":a+e.id+"::integer  "+(n&&"NOT"==n?"<>":"=")+e.value}}),a};e.exports=a},function(e,t,a){"use strict";function n(e,t){var a=[];return r.filter||(r.filter={}),r.filter[t]||(r.filter[t]=[]),t&&r.filter[t].length>0?a=r.filter[t]:e.map(function(e){var t={id:e.id,value:e.value?e.value:e.default?e.default:null,name:e.id,sqlNo:1,type:e.type?e.type:"text",interval:!!e.interval,start:e.value?e.value:null,end:e.value?e.value:null};e.interval&&(t[e.id+"_start"]=e.value?e.value:null,t[e.id+"_end"]=e.value?e.value:null),a.push(t)}),a}var r=a(1);a(266);e.exports=n},function(e,t){"use strict";var a=function(e){return e<10?"0"+e:e},n=function(e){var t={start:null,end:null,value:null};Date.prototype.daysInMonth=function(){return 33-new Date(this.getFullYear(),this.getMonth(),33).getDate()};var n=new Date,r=a(n.getMonth()+1),o=a(n.getFullYear()),i=o+"-"+r+"-01",l=a(n.daysInMonth()),s=o+"-"+r+"-"+l;switch(e){case"KUU":t.start=i,t.end=s;break;case"AASTA":t.start=o+"-01-01",t.end=o+"-12-31";default:t.start=null,t.end=null}return t};e.exports=n},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(113),d=a(66),u=a(145),c=a(152),p=a(154),h=a(268),f=a(269),m=(a(271),a(273),a(287)),b=a(150),y=function(e,t){var a=!1;return e&&t in e&&(a=!0),a},g=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={activeRow:0,activeColumn:"",isDelete:!1,sort:{name:null,direction:null},value:a.props.value?a.props.value:0,gridData:e.gridData,subtotals:e.subtotals?e.subtotals:[],isSelect:a.props.isSelect},a.handleGridHeaderClick=a.handleGridHeaderClick.bind(a),a.handleCellDblClick=a.handleCellDblClick.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.prepareTableRow=a.prepareTableRow.bind(a),a.handleGridBtnClick=a.handleGridBtnClick.bind(a),a.getGridRowIndexById=a.getGridRowIndexById.bind(a),a.prepareTableFooter=a.prepareTableFooter.bind(a),a.getSum=a.getSum.bind(a),a.grid=[],a}return o(t,e),l(t,[{key:"render",value:function(){var e=Object.assign({},m.headerTable?m.headerTable:{},this.props.style),t=Object.assign({},m.mainTable?m.mainTable:{},this.props.style),a=Object.assign({btnAdd:{show:!0,disabled:!1},btnEdit:{show:!0,disabled:!1},btnDelete:{show:!0,disabled:!1},btnPrint:{show:!0,disabled:!1}},this.props.toolbarParams?this.props.toolbarParams:{});return m=i({},m,this.props.style),d.createElement("div",{style:m.main},this.props.showToolBar?d.createElement(u,{ref:"grid-toolbar-container",position:"left"},d.createElement(c,{show:a.btnAdd.show,onClick:this.handleGridBtnClick,value:"Lisa",ref:"grid-button-add"}),d.createElement(p,{show:a.btnEdit.show,onClick:this.handleGridBtnClick,value:"Muuda",ref:"grid-button-edit"}),d.createElement(h,{show:a.btnDelete.show,onClick:this.handleGridBtnClick,value:"Kustuta",ref:"grid-button-delete"})):null,d.createElement("div",{style:m.header},d.createElement("table",{ref:"dataGridTable",style:e,onKeyPress:this.handleKeyDown},d.createElement("tbody",null,d.createElement("tr",null,this.prepareTableHeader())))),d.createElement("div",{style:m.wrapper},d.createElement("table",{style:t,tabIndex:"1",onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyDown},d.createElement("tbody",null,d.createElement("tr",{style:{visibility:"collapse"}},this.prepareTableHeader(!0)),this.prepareTableRow(),this.props.subtotals&&this.props.subtotals.length?d.createElement("tr",null,this.prepareTableFooter()):null))),d.createElement(f,{show:this.state.isDelete,modalPageBtnClick:this.modalDeletePageBtnClick.bind(this)}))}},{key:"modalDeletePageBtnClick",value:function(e){this.setState({isDelete:!1}),"Ok"===e&&this.props.handleGridBtnClick&&this.props.handleGridBtnClick("delete",this.state.activeRow,this.state.gridData.length?this.state.gridData[this.state.activeRow].id:0,this.props.docTypeId?this.props.docTypeId:"")}},{key:"handleGridBtnClick",value:function(e){var t=this.state.activeRow,a=this.state.gridData.length?this.state.gridData[t].id:0,n=this.props.docTypeId?this.props.docTypeId:"";return"delete"!==e&&"Kustuta"!==e||this.state.isDelete?void(this.props.handleGridBtnClick&&this.props.handleGridBtnClick(e,t,a,n)):this.setState({isDelete:!0})}},{key:"getGridRowIndexById",value:function(){var e=this,t=0;return this.state.value&&(t=this.state.gridData.findIndex(function(t){return t.id===e.state.value}),t=t>-1?t:0),t}},{key:"handleCellClick",value:function(e,t){var a=this;if(this.state.gridData.length>0){var n=this.props.onChangeAction||null,r=this.state.gridData[e].id,o=i({},this.state.gridData);if(this.state.isSelect&&"select"==t&&(o[e].select=!o[e].select),t){var l=this.props.gridColumns.filter(function(e){return e.id==t});l&&l.length&&!l[0].readOnly&&this.props.isForUpdate&&null!==o[e][t]&&void 0!==o[e][t]&&(o[e][t]=!o[e][t])}this.setState({
gridData:o,activeRow:e,value:r},function(){var o=a.state.gridData[e][t];a.props.onClick&&a.props.onClick(n,r,e,t,o)})}}},{key:"handleCellDblClick",value:function(e){this.handleCellClick(e,null),this.props.onDblClick&&this.props.onDblClick()}},{key:"handleGridHeaderClick",value:function(e){if("select"!==e&&"row_id"!==e){var t=this.state.sort;t.name===e?t.direction="asc"===t.direction?"desc":"asc":t={name:e,direction:"asc"};var a=[{column:t.name,direction:t.direction}];this.setState({activeColumn:e,sort:t}),this.props.onHeaderClick&&this.props.onHeaderClick(a)}else if(this.state.gridData.length>0&&"select"===e){var n=this.state.gridData;n.forEach(function(e){e.select=!e.select}),this.setState({gridData:n})}}},{key:"handleKeyDown",value:function(e){var t=this.state.activeRow;switch(e.which){case 40:t++,this.state.gridData.length<t&&(t=this.state.activeRow);break;case 38:t--,t=t<0?0:t}this.setState({activeRow:t})}},{key:"prepareTableRow",value:function(){var e=this,t=this.getGridRowIndexById();return this.state.gridData.map(function(a,n){var r="tr-"+n,o=e.props.gridColumns.map(function(t){return"select"===t.id&&e.props.isSelect&&(t.show=!0),t});return d.createElement("tr",{ref:r,onClick:e.handleCellClick.bind(e,n,null),onDoubleClick:e.handleCellDblClick.bind(e,n),onKeyDown:e.handleKeyDown.bind(e),style:Object.assign({},m.tr,t===n?m.focused:{}),key:r},o.map(function(t,r){var o=t.boolSumbolYes?t.boolSumbolYes:m.boolSumbol.yes.value||null,l=t.boolSumbolNo?t.boolSumbolNo:m.boolSumbol.no.value||null,s=t.boolSumbolNull?t.boolSumbolNull:m.boolSumbol.null?m.boolSumbol.null.value:null,u=t.type&&"integer"==t.type?+a[t.id]:a[t.id],c="td-"+n+"-"+r,p=!y(t,"show")||t.show,h=y(t,"width")?t.width:"100%",f=Object.assign({},m.td,p?{}:{display:"none"},{width:h});if(m.boolColour&&t.type&&"boolean"===t.type&&(f=Object.assign(f,{backgroundColor:a[t.id]?m.boolColour.yes:m.boolColour.no},{color:a[t.id]?m.boolSumbol.yes.color:m.boolSumbol.no.color})),t.yesBackgroundColor&&(a[t.id]||"Viga"==a[t.id])&&(f=i({},f,{backgroundColor:t.yesBackgroundColor})),!t.noBackgroundColor||a[t.id]&&"Ok"!=a[t.id]||(f=i({},f,{backgroundColor:t.noBackgroundColor})),t.nullBackgroundColor&&null==a[t.id]&&(f=i({},f,{backgroundColor:t.nullBackgroundColor})),m.td&&m.td.nullColour&&null==a[t.id]&&(f=Object.assign(f,{backgroundColor:m.td.nullColour})),e.props.custom_styling){var b=e.props.custom_styling(t,a);f=i({},f,b)}var g=!!t.hideEmptyValue&&t.hideEmptyValue;return t.hideEmptyValue&&a.nom_id&&999999999==a.nom_id&&(g=!1),d.createElement("td",{style:f,ref:c,key:c,align:t.type&&"boolean"===t.type?"center":"left",onClick:e.handleCellClick.bind(e,n,t.id)},t.type&&"boolean"===t.type?d.createElement("span",null,a[t.id]?o:null==a[t.id]?s:l):g&&!u?null:a[t.id])}))},this)}},{key:"prepareTableFooter",value:function(e){var t=this;return this.props.gridColumns.map(function(e,a){var n="td-"+a,r="td",o=!y(e,"show")||e.show,i=y(e,"width")?e.width:"100%",l=Object.assign({},m[r],o?{}:{display:"none"},{width:i}),s=t.props.subtotals.indexOf(e.id),u=void 0;return s>-1&&(u=t.getSum(e.id,e.type&&"integer"==e.type?0:2)),d.createElement("td",{style:l,ref:n,key:n},d.createElement("span",null,u))},this)}},{key:"prepareTableHeader",value:function(e){var t=this,a=this.props.gridColumns.map(function(e){return"select"===e.id&&(e.show=t.props.isSelect),e});return a.map(function(a,n){var r="th-"+n+a.id,o=e?"thHidden":"th",i={color:a.showBold&&m[o].boldColor?m[o].boldColor:m[o].color},l=!y(a,"show")||a.show,s=y(a,"width")?a.width:"100%",u=Object.assign({},m[o],l?{}:{display:"none"},{width:s},i),c=t.state.activeColumn,p=t.state.sort.direction,h=Object.assign({},m.image,c===a.id&&"asc"===p?{}:{display:"none"}),f=Object.assign({},m.image,c===a.id&&"desc"===p?{}:{display:"none"});return d.createElement("th",{style:u,ref:r,key:r,onClick:t.handleGridHeaderClick.bind(t,a.id)},d.createElement("span",null,b(a.name)),e?d.createElement("img",{ref:"imageAsc",style:h,src:m.icons.asc,alt:"asc"}):null,e?d.createElement("img",{ref:"imageDesc",style:f,src:m.icons.desc,alt:"desc"}):null)},this)}},{key:"getSum",value:function(e,t){var a=0,n=0;return this.state.gridData.length&&this.state.gridData.forEach(function(t){n=t[e]&&!isNaN(t[e])?+t[e]:t[e]?1:0,a+=+n}),a.toFixed(t?t:0)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(d.Component);g.propTypes={gridColumns:s.arrayOf(s.shape({id:s.string.isRequired,name:s.string.isRequired,width:s.string,show:s.bool,type:s.oneOf(["text","number","integer","date","string","select","boolean"])})).isRequired,gridData:s.array.isRequired,onChangeAction:s.string,onClick:s.func,onDblClick:s.func,onHeaderClick:s.func,custom_styling:s.func,activeRow:s.number,handleGridCellClick:s.func,showToolBar:s.bool,subtotals:s.array},g.defaultProps={gridColumns:[],gridData:[],style:{},showToolBar:!1,isForUpdate:!1,custom_styling:null,subtotals:[]},e.exports=g},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(a(113),a(66)),s=a(148),d=a(149),u="delete",c=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"handleClick",value:function(e){return this.props.onClick("delete")}},{key:"render",value:function(){var e=this;return l.createElement(d,{value:"Kustuta",ref:"btnDelete",show:this.props.show,disabled:this.props.disabled,onClick:function(t){return e.handleClick(t)}},l.createElement("img",{ref:"image",src:s.icons[u]}))}}]),t}(l.PureComponent);c.defaultProps={disabled:!1,show:!0},e.exports=c},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(a(113),a(66)),s=a(245),d=a(270),u=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={show:a.props.show},a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(s,{ref:"modalPage",modalPageBtnClick:this.props.modalPageBtnClick,show:this.state.show,modalPageName:"Delete document"},l.createElement("div",{ref:"container"},l.createElement("img",{ref:"image",src:d.icon}),l.createElement("span",{ref:"message"}," Kas kustuta dokument ? ")))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.show!==t.show?{show:e.show}:null}}]),t}(l.PureComponent);e.exports=u},function(e,t){"use strict";e.exports={icon:"/images/icons/delete.png"}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(162),d=a(66),u=a(272),c=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:!!e.value,readOnly:e.readOnly,disabled:e.disabled},a.onChange=a.onChange.bind(a),a}return o(t,e),i(t,[{key:"componentDidMount",value:function(){this.refs.checkbox.checked=this.state.value}},{key:"onChange",value:function(e){var t=e.target.checked;this.setState({value:t}),!this.state.readOnly&&this.props.onChange&&this.props.onChange(this.props.name,t)}},{key:"render",value:function(){var e=Object.assign({},u.input,this.props.width?{width:this.props.width}:{},this.state.readOnly?u.readOnly:{});return d.createElement("div",{style:u.wrapper},d.createElement("label",{style:u.label,htmlFor:this.props.name,ref:"label"},this.props.title),d.createElement("input",{type:"checkbox",id:this.props.name,ref:"checkbox",style:e,name:this.props.name,value:this.state.value,checked:this.state.value,readOnly:this.state.readOnly,onChange:this.onChange,disabled:this.state.readOnly}))}},{key:"focus",value:function(){this.refs.checkbox.focus()}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.value||e.readOnly!==t.readOnly?{value:e.value,readOnly:e.readOnly}:null}}]),t}(d.PureComponent);c.propTypes={name:l.string.isRequired,value:l.bool,readOnly:l.bool,disabled:l.bool,title:l.string},c.defaultProps={readOnly:!1,disabled:!1,value:!1,title:""},e.exports=s(c)},function(e,t){"use strict";e.exports={input:{":focus":{backgroundColor:"lightpink"}},readOnly:{backgroundColor:"#F3EFEF"},wrapper:{margin:"5px",display:"flex",width:"95%"},label:{width:"30%",margin:"5px"}}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ALL_PRINTABLE_KEYS=t.ALL_KEYS=t.Keys=t.setBinding=t.keydownScoped=t.default=void 0;var r=a(274);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}}),Object.defineProperty(t,"keydownScoped",{enumerable:!0,get:function(){return r.keydownScoped}});var o=a(276);Object.defineProperty(t,"setBinding",{enumerable:!0,get:function(){return o.setBinding}});var i=a(278);Object.defineProperty(t,"Keys",{enumerable:!0,get:function(){return n(i).default}}),Object.defineProperty(t,"ALL_KEYS",{enumerable:!0,get:function(){return i.ALL_KEYS}}),Object.defineProperty(t,"ALL_PRINTABLE_KEYS",{enumerable:!0,get:function(){return i.ALL_PRINTABLE_KEYS}}),a(286)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){}function o(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var o=a[0],i=Array.isArray(o);if(i||~["string","number","symbol"].indexOf(void 0===o?"undefined":d(o))){var l=i?o:a;return function(t,a,n){return a?e({target:t,descriptor:n,keys:l}):(0,c.default)(t,l)}}var s=a[0],u=a[1];return s&&!u?c.default.apply(void 0,a):r}function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return o.apply(void 0,[m.default].concat(t))}function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return o.apply(void 0,[h.default].concat(t))}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.keydownScoped=void 0;var d="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)},u=a(275),c=n(u),p=a(284),h=n(p),f=a(285),m=n(f);t.default=l,t.keydownScoped=i},function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":d(t))&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":d(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.ALL_KEYS,a=function(t){function a(e){o(this,a);var t=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={event:null},t}return l(a,t),c(a,[{key:"componentDidMount",value:function(){(0,b.onMount)(this)}},{key:"componentWillUnmount",value:function(){(0,b.onUnmount)(this)}},{key:"handleKeyDown",value:function(e){var t=this;this.setState({event:e},function(){return t.setState({event:null})})}},{key:"render",value:function(){return h.default.createElement(e,u({},this.props,{keydown:this.state}))}}]),a}(h.default.Component);return m.setBinding({keys:[].concat(t),fn:a.prototype.handleKeyDown,target:a.prototype}),a}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),p=a(66),h=r(p),f=a(276),m=n(f),b=a(281),y=a(278);t.default=s},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function o(){k.clear(),w.clear()}function i(e){var t=[].concat(e);t.length?(w.delete(null),t.forEach(function(e){w.delete(e),w.add(e)})):w.add(null)}function l(e){w.delete(e)}function s(e){if(!w.has(null)){var t=function(t){return(0,m.default)({keySet:t,event:e})},a=!0,n=!1,o=void 0;try{for(var i,l=[].concat(r(w)).reverse()[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){var s=i.value,u=d(s.constructor.prototype),c=!0,p=!1,f=void 0;try{for(var b,y=u[Symbol.iterator]();!(c=(b=y.next()).done);c=!0){var g=h(b.value,2),v=g[0],k=g[1];if(v.some(t))return{fn:k,instance:s}}}catch(e){p=!0,f=e}finally{try{!c&&y.return&&y.return()}finally{if(p)throw f}}}}catch(e){n=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw o}}}return null}function d(e){var t=e.__reactKeydownUUID;return k.get(t)}function u(){return w}function c(){return!w.size}function p(e){var t=e.keys,a=e.fn,n=e.target,r=(0,y.default)(t),o=n.__reactKeydownUUID;o?k.get(o).set(r,a):(n.__reactKeydownUUID=(0,v.default)(),k.set(n.__reactKeydownUUID,new Map([[r,a]])))}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t._resetStore=o,t.activate=i,t.deleteInstance=l,t.findBindingForEvent=s,t.getBinding=d,t.getInstances=u,t.isEmpty=c,t.setBinding=p;var f=a(277),m=n(f),b=a(279),y=n(b),g=a(280),v=n(g),k=new Map,w=new Set},function(e,t,a){"use strict";function n(e){var t=e.keySet,a=e.event,n=t.key,l=t.modifiers,s=void 0===l?[]:l,d=void 0;if(d=n===r.ALL_KEYS,n===r.ALL_PRINTABLE_KEYS)if(a.key)d=1===a.key.length;else{var u=String.fromCharCode(a.charCode);d=o.indexOf(u)>=0}if(n===a.which){var c=i.filter(function(e){return a[e+"Key"]}).sort();d=s.length===c.length&&s.every(function(e,t){return c[t]===e})}return d}Object.defineProperty(t,"__esModule",{value:!0});var r=a(278),o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ~!@#$%^&*()-_+=[]\\{}|;':\",./<>?£",i=Object.keys(r.modifiers);t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={backspace:8,del:46,delete:46,tab:9,enter:13,return:13,esc:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221};Object.keys(a).forEach(function(e){return a[e.toUpperCase()]=a[e]}),"0123456789".split("").forEach(function(e,t){return a[e]=t+48}),"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(function(e,t){a[e]=t+65,a[e.toLowerCase()]=t+65}),[1,2,3,4,5,6,7,8,9,10,11,12].forEach(function(e,t){return a["f"+t]=111+t});t.modifiers={control:"ctrl",ctrl:"ctrl",shift:"shift",meta:"meta",cmd:"meta",command:"meta",option:"alt",alt:"alt"},t.ALL_KEYS=Symbol("ALL_KEYS"),t.ALL_PRINTABLE_KEYS=Symbol("ALL_PRINTABLE_KEYS");t.default=a},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return e.map(function(e){var t={key:e};if("string"==typeof e){var a=e.toLowerCase().trim(),n=a.split(/\s?\+\s?/);t=1===n.length?{key:i.default[a]}:{key:i.default[n.pop()],modifiers:n.map(function(e){return o.modifiers[e]}).sort()}}return t})}Object.defineProperty(t,"__esModule",{value:!0});var o=a(278),i=n(o);t.default=r},function(e,t){"use strict";function a(){return"uid-"+n++}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var n=1},function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e){var t=e.target;b.activate([].concat(o(b.getInstances())).reduce(p.default.findContainerNodes(t),[]).sort(p.default.sortByDOMPosition).map(function(e){return e.instance}))}function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t||s(e)){var a=b.findBindingForEvent(e)||{},n=a.fn,r=a.instance;if(n)return n.call(r,e),!0}return!1}function s(e){var t=e.ctrlKey,a=e.target;return t||!~["INPUT","SELECT","TEXTAREA"].indexOf(a.tagName)&&(!a.getAttribute||"textbox"!==a.getAttribute("role"))}function d(e){b.activate(e),f.default.bindKeys(l),f.default.bindClicks(i),p.default.bindFocusables(e,b.activate)}function u(e){b.deleteInstance(e),b.isEmpty()&&(f.default.unbindClicks(i),f.default.unbindKeys(l))}Object.defineProperty(t,"__esModule",{value:!0}),t.onUnmount=t.onMount=void 0,t._onClick=i,t._onKeyDown=l,t._shouldConsider=s;var c=a(282),p=r(c),h=a(283),f=r(h),m=a(276),b=n(m);t.onMount=d,t.onUnmount=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(document.querySelectorAll)try{var a=s.default.findDOMNode(e);if(a){var n=a.querySelectorAll(d);if(n.length){var r=function(a){var n=a.onfocus;return function(r){t(e),n&&n.call(a,r)}};Array.prototype.slice.call(n).forEach(function(e){return e.onfocus=r(e)})}}}catch(e){}}function o(e){return function(t,a){try{var n=s.default.findDOMNode(a);n&&(n===e||n.contains(e))&&t.push({instance:a,node:n})}finally{return t}}}function i(e,t){return 10===e.node.compareDocumentPosition(t.node)?1:-1}Object.defineProperty(t,"__esModule",{value:!0});var l=a(72),s=n(l),d="a[href], button, input, object, select, textarea, [tabindex]";t.default={bindFocusables:r,findContainerNodes:o,sortByDOMPosition:i}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=!1,n=!1,r={bindKeys:function(e){n||(document.addEventListener("keydown",e),n=!0)},unbindKeys:function(e){n&&(document.removeEventListener("keydown",e),n=!1)},bindClicks:function(e){a||(document.addEventListener("click",e,!0),a=!0)},unbindClicks:function(e){a&&(document.removeEventListener("click",e,!0),a=!1)}};t.default=r},function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return e&&"object"===(void 0===e?"undefined":l(e))&&e.nativeEvent instanceof window.KeyboardEvent&&"keydown"===e.type}function o(e){var t=e.target,a=e.descriptor,n=e.keys,o=a.value;if(!d.getBinding(t)){var i=t.componentDidMount,l=t.componentWillUnmount;t.componentDidMount=function(){if((0,u.onMount)(this),i)return i.call(this)},t.componentWillUnmount=function(){if((0,u.onUnmount)(this),l)return l.call(this)}}return d.setBinding({keys:n,target:t,fn:o}),a.value=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t[0];if(r(n)){if(!n.ctrlKey)return(0,u._onKeyDown)(n,!0)}else if(!(n&&n instanceof window.KeyboardEvent&&"keydown"===n.type))return o.call.apply(o,[this].concat(t))},a}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)},s=a(276),d=n(s),u=a(281);t.default=o},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.target,a=e.descriptor,n=e.keys,r=t.componentWillReceiveProps,o=a.value;if(n){var l=function(e,t){return!(!t||!t.event||e.event)&&d.some(function(e){return(0,i.default)({keySet:e,event:t.event})})},d=(0,s.default)(n);t.componentWillReceiveProps=function(e){var t=e.keydown,a=this.props.keydown;if(l(a,t))return o.call(this,t.event);for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return r?r.call.apply(r,[this,e].concat(i)):void 0}}else;return a}Object.defineProperty(t,"__esModule",{value:!0});var o=a(277),i=n(o),l=a(279),s=n(l);t.default=r},function(e,t){"use strict";Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},a=function(e){var t=+e;return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},n=Math.pow(2,53)-1,r=function(e){var t=a(e);return Math.min(Math.max(t,0),n)};return function(e){var a=this,n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!t(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var l,s=r(n.length),d=t(a)?Object(new a(s)):Array(s),u=0;u<s;)l=n[u],i?d[u]=void 0===o?i(l,u):i.call(o,l,u):d[u]=l,u+=1;return d.length=s,d}}())},function(e,t){"use strict";e.exports={mainTable:{tableLayout:"fixed",width:"-webkit-calc(100% + 16px)",borderCollapse:"collapse",marginBottom:"20px"},headerTable:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse"},footerTable:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse"},th:{borderBottom:"1px solid black",backgroundColor:"grey",height:"30px",display:"table-cell",color:"black",boldColor:"red"},thHidden:{borderBottom:"1px solid black",backgroundColor:"grey",height:"1px",display:"table-cell"},tr:{backgroundColor:"white"},focused:{backgroundColor:"lightblue"},td:{display:"table-cell",paddingLeft:"5px"},icons:{asc:"/images/icons/sort-alpha-asc.png",desc:"/images/icons/sort-alpha-desc.png"},image:{margin:"1px"},wrapper:{height:"inherit",overflow:"auto",minHeight:"100px"},main:{height:"inherit"},header:{overflow:"hidden"},boolSumbol:{yes:{value:"✔",color:"green"},no:{color:null},null:{value:"-",color:null}},boolColour:{yes:null,no:null}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(a(113),a(66)),s=a(148),d=a(149),u="print",c=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"handleClick",value:function(e){return this.props.onClick(this.props.value)}},{key:"render",value:function(){var e=this;return l.createElement(d,{ref:"btnPrint",value:this.props.value,show:this.props.show,disabled:this.props.disabled,onClick:function(t){return e.handleClick(t)}},l.createElement("img",{ref:"image",src:s.icons[u]}))}}]),t}(l.PureComponent);c.defaultProps={disabled:!1,show:!0,value:"Print"},e.exports=c},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(a(113),a(66)),s=a(148),d=a(149),u="attachment",c=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"handleClick",value:function(e){if(this.props.onClick())return this.props.onClick()}},{key:"render",value:function(){var e=this;return l.createElement(d,{ref:"btnGetPdf",value:this.props.value?this.props.value:"PDF",onClick:function(t){return e.handleClick(t)}},l.createElement("img",{ref:"image",src:s.icons[u]}))}}]),t}(l.PureComponent);c.defaultProps={disabled:!1,show:!0},e.exports=c},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(a(113),a(66)),s=a(148),d=a(149),u="filter",c=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"handleClick",value:function(e){return this.props.onClick()}},{key:"render",value:function(){var e=this;return l.createElement(d,{ref:"btnFilter",value:"Filter",show:this.props.show,disabled:this.props.disabled,onClick:function(t){return e.handleClick(t)}},l.createElement("img",{ref:"image",src:s.icons[u]}))}}]),t}(l.PureComponent);c.defaultProps={disabled:!1,show:!0},e.exports=c},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(a(113),a(66)),s=a(148),d=a(149),u="select",c=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"handleClick",value:function(e){return this.props.onClick("select")}},{key:"render",value:function(){var e=this,t=this.props.value?this.props.value:"Valida";return l.createElement(d,{ref:"btnSelect",value:t,show:this.props.show,disabled:this.props.disabled,onClick:function(t){return e.handleClick(t)}},l.createElement("img",{ref:"image",src:s.icons[u]}))}}]),t}(l.PureComponent);c.defaultProps={disabled:!1,show:!0},e.exports=c},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(a(113),a(66)),s=a(148),d=a(149),u=a(245),c="mail",p=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showModal:!1},a.modalPageClick=a.modalPageClick.bind(a),a}return o(t,e),i(t,[{key:"handleClick",value:function(e){"arv"===this.props.docTypeId.toLowerCase()||"teatis"===this.props.docTypeId.toLowerCase()?this.setState({
showModal:!0}):this.modalPageClick("Ok")}},{key:"render",value:function(){var e=this;return l.createElement("div",null,l.createElement(d,{ref:"btnEmail",value:this.props.value,show:this.props.show,disabled:this.props.disabled,onClick:function(t){return e.handleClick(t)}},l.createElement("img",{ref:"image",src:s.icons[c]})),l.createElement(u,{modalPageBtnClick:this.modalPageClick,modalPageName:""+this.props.value,show:this.state.showModal,modalObjects:["btnOk","btnCancel"]},"Kas saada email ?"))}},{key:"modalPageClick",value:function(e){"Ok"===e&&this.props.onClick(this.props.value),this.setState({showModal:!1})}}]),t}(l.Component);p.defaultProps={disabled:!1,show:!0,value:"Email",docTypeId:""},e.exports=p},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(a(113),a(66)),s=a(148),d=a(149),u="refresh",c=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"handleClick",value:function(e){return this.props.onClick()}},{key:"render",value:function(){var e=this;return l.createElement(d,{ref:"btnRefresh",value:"Uuenda",show:this.props.show,disabled:this.props.disabled,onClick:function(t){return e.handleClick(t)}},l.createElement("img",{ref:"image",src:s.icons[u]}))}}]),t}(l.PureComponent);c.defaultProps={disabled:!1,show:!0},e.exports=c},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(113),d=a(1),u=a(265),c=a(150),p=a(66),h=a(295),f=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={gridConfig:e.gridConfig,data:e.data},a.handleChange=a.handleChange.bind(a),a.prepareFilterFields=a.prepareFilterFields.bind(a),a.returnInterval=a.returnInterval.bind(a),a.returnTextComponent=a.returnTextComponent.bind(a),a.handleSelectChange=a.handleSelectChange.bind(a),a}return o(t,e),l(t,[{key:"handleChange",value:function(e){this.saveFilterContent(e.target.name,e.target.value,null),this.forceUpdate()}},{key:"handleSelectChange",value:function(e){this.saveFilterContent(e.target.name,null,e.target.value),this.forceUpdate()}},{key:"saveFilterContent",value:function(e,t,a){var n=this.props.data;n=n.length?this.props.data:u(this.props.gridConfig,this.props.docTypeId);var r=1;if(d.filter[this.props.docTypeId]){var o=d.filter[this.props.docTypeId].findIndex(function(t){return t.id===e});o>=0&&(r=d.filter[this.props.docTypeId][o].sqlNo)}n=n.map(function(n){return n.id===e&&(n.value=a?n.value:t,n.sqlNo=t?r:a),n});for(var i=void 0,l=!!e.match(/_start/),s=!!e.match(/_end/),c=e,p=0;p<n.length;p++)if(l=!!e.match(/_start/),s=!!e.match(/_end/),l&&(c=e.replace(/_start/i,"")),s&&(c=e.replace(/_end/i,"")),n[p].id===c){i=p;break}i>-1&&(l&&(n[i].start=t,n[i][c+"_start"]=t,n[i].value=t),s&&(n[i].end=t,n[i][c+"_end"]=t,n[i].value=t),n[i].sqlNo=a?a:1),d.filter[this.props.docTypeId]=n,this.props.handler&&this.props.handler(n)}},{key:"componentDidMount",value:function(){var e=u(this.props.gridConfig,this.props.docTypeId);if(this.props.handler&&this.props.handler(e),this.props.focusElement){var t=this.refs[this.props.focusElement];t&&t.focus()}}},{key:"render",value:function(){return p.createElement("div",{style:h.fieldset},this.prepareFilterFields())}},{key:"prepareFilterFields",value:function(){var e=this,t=this.props.gridConfig.filter(function(e){if(!("id"===e.id||e.hideFilter||e.filter&&"show"!=e.filter))return e});return t.map(function(t,a){return p.createElement("div",{style:h.formWidget,key:"fieldSet-"+t.id},p.createElement("div",{style:h.formWidgetLabel},p.createElement("span",null,c(t.name))),p.createElement("div",{style:h.formWidgetInput},t.interval?e.returnInterval(t):e.returnTextComponent(t)))})}},{key:"returnTextComponent",value:function(e){var t=this.props.data;t.length||(t=u(this.props.gridConfig,this.props.docTypeId));var a=e.type?e.type:"text",n=e.value?e.value:"",r=1,o=t.find(function(t){return t.id==e.id});return o&&"value"in o&&(!o.value&&n&&(n=t[index][e.id].value),n=o.value?o.value:n,r=o.sqlNo?o.sqlNo:1),p.createElement("div",{style:h.wrapper},p.createElement("select",{style:h.select,value:r||1,name:e.id,disabled:!n,id:"sqlNo",onChange:this.handleSelectChange},p.createElement("option",{value:1},c("SISALDAB")),p.createElement("option",{value:0},c("EI SISALDA"))),p.createElement("input",{style:h.input,type:a,title:c(e.name),name:e.id,placeholder:c(e.toolTip?e.toolTip:e.name),ref:e.id,value:n||"",onChange:this.handleChange,defaultValue:this.props.data[e.id]}))}},{key:"returnInterval",value:function(e){if(e&&e.interval&&!("start"in e)){var t=e.value?e.value:null;e=i({},e,{start:t},{end:t})}var a=this.props.data,n=a.find(function(t){return t.id==e.id});if(!n)return null;var r=e.interval?n.start:n.value,o=e.interval?n.end:n.value,l=e.type?e.type:"text";return r&&o&&(this.saveFilterContent(e.name,r),this.saveFilterContent(e.name,o)),p.createElement("div",{style:h.interval},p.createElement("input",{style:h.input,type:l,title:e.name,name:e.id+"_start",placeholder:e.name,ref:e.id+"_start",value:r||"",onChange:this.handleChange,defaultValue:this.props.data[e.id]}),p.createElement("span",null,"-"),p.createElement("input",{style:h.input,type:l,title:e.name,name:e.id+"_end",placeholder:e.name,ref:e.id+"_end",value:o||"",onChange:this.handleChange,defaultValue:this.props.data[e.id]}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return JSON.stringify(e.gridConfig)!==JSON.stringify(t.gridConfig)||JSON.stringify(e.data)!==JSON.stringify(t.data)||0===t.data.length||t.data.length!==e.data.length?{gridConfig:e.gridConfig,data:e.data}:null}}]),t}(p.PureComponent);f.propTypes={gridConfig:s.array.isRequired,data:s.array.isRequired},e.exports=f},function(e,t){"use strict";function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n;e.exports={formWidget:{marginBottom:"5px",display:"flex",flexDirection:"row"},formWidgetLabel:{display:"flex",justifyContent:"flex-end",width:"40%",marginRight:"10px"},formWidgetInput:{width:"100%",borderRadius:"2px",padding:"3px",border:"0px"},input:{borderRadius:"2px",padding:"5px",display:"inline-block"},select:(n={borderRadius:"2px",padding:"5px",display:"inline-block",width:"auto"},a(n,"display","flex"),a(n,"marginRight","5px"),n),wrapper:{margin:"5px",display:"flex",width:"95%"},fieldSet:{borderRadius:"2px",margin:"10px"},ui:{borderRadius:"2px",padding:"5px",display:"inline-block"},interval:{display:"inline-flex"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(162),d=a(66),u=a(297),c=a(150),p=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value||"",readOnly:e.readOnly,disabled:e.disabled,valid:e.valid},a.onChange=a.onChange.bind(a),a}return o(t,e),i(t,[{key:"onChange",value:function(e){var t=e.target.value;this.setState({value:t}),this.props.onChange&&this.props.onChange(this.props.name,t)}},{key:"render",value:function(){var e=this.props.placeholder||this.props.title,t=Object.assign({},u.input,this.props.width?{width:this.props.width}:{},this.props.style?this.props.style:{},this.state.readOnly?u.readOnly:{});return d.createElement("div",{style:u.wrapper},d.createElement("label",{style:u.label,htmlFor:this.props.name,ref:"label"},c(this.props.title)),d.createElement("input",{type:"text",id:this.props.name,ref:"input",style:t,name:this.props.name,value:this.state.value,readOnly:this.state.readOnly,title:this.props.title,pattern:this.props.pattern,placeholder:e,onChange:this.onChange,maxLength:this.props.maxLength,disabled:this.props.disabled}))}},{key:"focus",value:function(){this.refs.input.focus()}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.value||e.readOnly!==t.readOnly?{value:e.value,readOnly:e.readOnly}:null}}]),t}(d.PureComponent);p.propTypes={name:l.string.isRequired,value:l.string,readOnly:l.bool,disabled:l.bool,valid:l.bool,placeholder:l.string,pattern:l.string,title:l.string},p.defaultProps={readOnly:!1,disabled:!1,valid:!0,value:"",title:""},e.exports=s(p)},function(e,t){"use strict";e.exports={input:{width:"70%",margin:"5px 2px",borderRadius:"3px",":focus":{backgroundColor:"lightpink"},border:"1px solid gray",height:"30px"},readOnly:{backgroundColor:"#F3EFEF"},wrapper:{margin:"5px",display:"flex",width:"95%"},label:{width:"30%",margin:"5px"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(113),d=a(66),u=a(245),c=a(299),p=a(300),h=a(267),f=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={show:a.props.show},a}return o(t,e),l(t,[{key:"render",value:function(){var e=a(160).tulemused.gridConfig,t=this.props.systemMessage?this.props.systemMessage:"",n=this.props.report?this.props.report:"",r=["btnOk"],o=this.loeTulemused(n);return d.createElement(u,{ref:"modalPage",style:c.modalPage,show:this.props.show,modalPageBtnClick:this.props.modalPageBtnClick,modalPageName:"Tööülesanne report",modalObjects:r},d.createElement("div",{ref:"container"},d.createElement("img",{ref:"image",src:c.icon}),d.createElement("span",null," ",t," "),d.createElement("div",{style:c.docRow},d.createElement(p,{title:"Report",style:c.tulemus,name:"report",ref:"textarea-report",value:o.kokkuVotte,readOnly:!0})),d.createElement("div",{ref:"grid-row-container"},d.createElement(h,{gridData:o.data,gridColumns:e,showToolBar:!1,ref:"data-grid"}))))}},{key:"loeTulemused",value:function(e){var t={kokkuVotte:"",data:[]},a=0;return e&&e.data&&"object"==i(e.data)&&!e.data.length&&(t.data.push({id:1,result:e.result&&!e.error_code?"Ok":"Viga",kas_vigane:e.kas_vigane?"Viga":"Ok",error_code:e.error_code,error_message:e.error_message,viitenr:e.viitenr?e.viitenr:null}),e.result||a++),e&&e.data&&"object"==(void 0===e?"undefined":i(e))&&e.data.length&&e.data.map(function(e,n){t.data.push({id:e.id?e.id:n,kas_vigane:e.kas_vigane?"Viga":"Ok",result:e.result&&!e.error_code?"Ok":"Viga",error_code:e.error_code,error_message:e.error_message,viitenr:e.viitenr?e.viitenr:null}),e.result||a++}),t.kokkuVotte="Vead kokku "+a+", Read kokku: "+t.data.length+", Õnnestus: "+(t.data.length-a),t}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.show!==t.show?{show:e.show}:null}}]),t}(d.PureComponent);f.propTypes={systemMessage:s.string,modalPageBtnClick:s.func},e.exports=f},function(e,t){"use strict";e.exports={icon:"/images/icons/info.png",modalPage:{height:"75%"},tulemus:{height:"2em"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(301),d=a(162),u=a(150),c=a(113),p=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value||"",readOnly:!0,disabled:e.disabled||!0},a.onChange=a.onChange.bind(a),a}return o(t,e),i(t,[{key:"onChange",value:function(e){var t=e.target.value;this.setState({value:t}),this.props.onChange&&this.props.onChange(this.props.name,t)}},{key:"render",value:function(){var e=this.props.placeholder||this.props.title,t=Object.assign({},s.input,this.props.width?{width:this.props.width}:{},this.state.readOnly?s.readOnly:{},this.props.style?this.props.style:{});return l.createElement("div",{style:s.wrapper},l.createElement("label",{htmlFor:this.props.name,ref:"label",style:s.label},l.createElement("span",null,u(this.props.title))),l.createElement("textarea",{style:t,ref:"input",id:this.props.name,name:this.props.name,value:this.state.value||"",readOnly:this.props.readOnly,title:this.props.title,placeholder:e,onChange:this.onChange,disabled:this.props.disabled}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.value||e.readOnly!==t.readOnly?{value:e.value,readOnly:e.readOnly}:null}}]),t}(l.PureComponent);p.propTypes={name:c.string.isRequired,value:c.string,readOnly:c.bool,disabled:c.bool,valid:c.bool,placeholder:c.string,title:c.string},p.defaultProps={readOnly:!1,disabled:!1,valid:!0,title:"",value:""},e.exports=d(p)},function(e,t){"use strict";e.exports={input:{width:"100%",borderRadius:"3px",overflow:"scroll",height:"fit-content",":focus":{backgroundColor:"lightpink"},border:"1px solid gray"},focused:{backgroundColor:"lightblue"},readOnly:{backgroundColor:"#F3EFEF"},wrapper:{margin:"5px",display:"flex",width:"98%",flexDirection:"column"},label:{margin:"5px"}}},function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row wrap"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{position:"relative",height:"100%",display:"flex",flexDirection:"column"},gridContainer:{display:"flex",flexFlow:"row wrap",height:"95%"},grid:{mainTable:{tableLayout:"fixed",position:"relative",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"},minHeight:"200px",marginBottom:"20px"},headerTable:{tableLayout:"fixed"}},limit:{width:"20%",margin:"5px 2px"},ok:{backgroundColor:"lightgreen",width:"100%",textAlign:"right"},error:{backgroundColor:"lightcoral",width:"100%",textAlign:"right"},notValid:{backgroundColor:"yellow",width:"100%",textAlign:"right"},total:{width:"auto"}}},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=a(305),u="ASUTUSED",c=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleClick=a.handleClick.bind(a),a.renderer=a.renderer.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(s,{history:this.props.history?this.props.history:null,store:this.props.store,module:this.props.module,ref:"register",docTypeId:u,style:d,render:this.renderer})}},{key:"renderer",value:function(){return null}},{key:"handleClick",value:function(e){var t=this.refs.register;return t?void(e&&(t.setState({warning:"Edukalt:  "+e+": ",warningType:"ok"}),setTimeout(function(){t.fetchData("selectDocs")},1e4))):null}}]),t}(l.PureComponent);e.exports=c},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(113),d=a(1),u=a(307),c=a(296),p=a(300),h=a(245),f=a(326),m=a(267),b=a(327),y=a(150),g=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:e.docId?e.docId:+e.match.params.docId,loadedData:!1},a.createGridRow=a.createGridRow.bind(a),a.renderer=a.renderer.bind(a),a.handleGridRow=a.handleGridRow.bind(a),a.gridValidateFields=a.gridValidateFields.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(u,{docId:this.state.docId,ref:"document",store:this.props.store,history:this.props.history,module:d.module,docTypeId:"ASUTUSED",initData:this.props.initData,renderer:this.renderer,createGridRow:this.createGridRow,gridValidator:this.gridValidateFields,focusElement:"input-regkood"})}},{key:"renderer",value:function(e){if(!e.docData||!e.docData.nimetus)return l.createElement("div",{style:f.doc},l.createElement(b,{label:"Laadimine..."}));var t=e.state.edited,a=e.docData.asutus_user,n=e.docData.gridAsutusUserConfig,r=e.docData.gridData,o=e.docData.gridConfig,i=e.docData.objects,s=e.docData.gridObjectsConfig;return l.createElement("div",{style:f.doc},l.createElement("div",{style:f.docRow},l.createElement("div",{style:f.docColumn},l.createElement(c,{title:"Reg.kood/ Isikukood",name:"regkood",ref:"input-regkood",readOnly:!t,value:e.docData.regkood||"",onChange:e.handleInputChange}),l.createElement(c,{title:"Nimetus",name:"nimetus",ref:"input-nimetus",readOnly:!t,value:e.docData.nimetus||"",onChange:e.handleInputChange}),l.createElement(c,{title:"Om.vorm",name:"omvorm",ref:"input-omvorm",readOnly:!t,value:e.docData.omvorm||"",onChange:e.handleInputChange}),l.createElement(c,{title:"Telefon",name:"tel",ref:"input-tel",value:e.docData.tel||"",readOnly:!t,onChange:e.handleInputChange}),l.createElement(c,{title:"Email",name:"email",ref:"input-email",value:e.docData.email||"",readOnly:!t,onChange:e.handleInputChange}),l.createElement("label",{ref:"label"},y("Arvelduste arved")),l.createElement("div",{style:f.docRow},l.createElement(m,{source:"asutus_aa",gridData:r,gridColumns:o,showToolBar:t,readOnly:!t,style:f.grid.headerTable,handleGridRow:e.handleGridRow,handleGridBtnClick:e.handleGridBtnClick,ref:"asutus_aa-data-grid"})),e.state.gridRowEdit?this.createGridRow(e):null)),l.createElement("div",{style:f.docRow},l.createElement(p,{title:"Aadress",name:"aadress",ref:"textarea-aadress",onChange:e.handleInputChange,value:e.docData.aadress||"",readOnly:!t})),l.createElement("div",{style:f.docRow},l.createElement(p,{title:"Kontakt",name:"kontakt",ref:"textarea-kontakt",onChange:e.handleInputChange,value:e.docData.kontakt||"",readOnly:!t})),l.createElement("div",{style:f.docRow},l.createElement(p,{title:"Muud",name:"muud",ref:"textarea-muud",onChange:e.handleInputChange,value:e.docData.muud||"",readOnly:!t})),l.createElement("div",{style:f.docRow},l.createElement(p,{title:"Märkused",name:"mark",ref:"textarea-mark",onChange:e.handleInputChange,value:e.docData.mark||"",readOnly:!t})),l.createElement("div",{style:f.docRow},l.createElement("label",{ref:"label"},y("Kasutaja objektid"))),l.createElement("div",{style:f.docRow},l.createElement(m,{source:"objects",gridData:i,gridColumns:s,showToolBar:!1,readOnly:!0,style:f.grid.headerTable,docTypeId:"object",ref:"objects-data-grid"})),l.createElement("div",{style:f.docRow},l.createElement("label",{ref:"label"},y("Kasutaja andmed"))),l.createElement("div",{style:f.docRow},l.createElement(m,{source:"userid",gridData:a,gridColumns:n,showToolBar:!1,readOnly:!0,style:f.grid.headerTable,docTypeId:"userid",ref:"userid-data-grid"})))}},{key:"createGridRow",value:function(e){var t=e.gridRowData?e.gridRowData:{},a="",n=a.length>0||!e.state.checked,r=["btnOk","btnCancel"];return n&&r.splice(0,1),t?l.createElement("div",{className:".modalPage"},l.createElement(h,{modalObjects:r,ref:"modalpage-grid-row",show:!0,modalPageBtnClick:e.modalPageClick,modalPageName:"Rea lisamine / parandamine"},l.createElement("div",{ref:"grid-row-container"},l.createElement("div",{style:f.docRow},l.createElement(c,{title:"Arveldus arve: ",name:"aa",value:t.aa||"",bindData:!1,ref:"aa",onChange:e.handleGridRowInput}))),l.createElement("div",null,l.createElement("span",null,a)))):l.createElement("div",null)}},{key:"gridValidateFields",value:function(){var e="",t=this.refs.document;return t&&t.gridRowData&&t.gridRowData&&!t.gridRowData.aa&&(e+=" Расчетный счет"),e}},{key:"handleGridRow",value:function(e){this.setState({gridRowEdit:!0,gridRowEvent:e})}}]),t}(l.PureComponent);g.propTypes={docId:s.number,initData:s.object,userData:s.object},g.defaultProps={initData:{},userData:{}},e.exports=g},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),PropTypes=__webpack_require__(113),React=__webpack_require__(66),_fetchData=__webpack_require__(31),DocContext=__webpack_require__(1),Menu=__webpack_require__(144),DocRights=__webpack_require__(249),checkRights=__webpack_require__(250),LIBS_URL=__webpack_require__(160).LIBS.POST_LOAD_LIBS_URL,URL=__webpack_require__(160).DOCS.POST_LOAD_DOCS_URL,Form=__webpack_require__(308),ToolbarContainer=__webpack_require__(145),DocToolBar=__webpack_require__(312),ModalPage=__webpack_require__(245),ModalReport=__webpack_require__(298),styles=__webpack_require__(325),DocumentTemplate=function(_React$Component){function DocumentTemplate(e){_classCallCheck(this,DocumentTemplate);var t=_possibleConstructorReturn(this,(DocumentTemplate.__proto__||Object.getPrototypeOf(DocumentTemplate)).call(this,e));return t.libs={},t.state={docId:t.props.docId,edited:0===t.props.docId,reloadData:!Object.keys(e.initData).length,gridRowEdit:!1,gridRowEvent:null,warning:"",warningStyle:"",gridWarning:"",checked:!0,loadedLibs:!1,libParams:{},logs:[],isDisableSave:e.isDisableSave,docData:{},isReport:!1,txtReport:[]},t.docData=Object.keys(e.initData).length?e.initData:{id:e.docId},t.backup={},t.requiredFields=[],t.serverValidation=[],t.bpm=[],t.pages=e.pages,t.loadingLibs={},t._bind("btnAddClick","btnEditClick","btnLogoutClick","validation","handleInputChange","prepareParamsForToolbar","btnDeleteClick","btnPrintClick","btnEmailClick","btnPdfClick","btnSaveClick","btnCancelClick","btnTaskClick","fetchData","createLibs","loadLibs","hasLibInCache","addRow","editRow","handleGridBtnClick","handleGridRowInput","handleGridRow","validateGridRow","modalPageClick","handleGridRowChange","handlePageClick","modalPageBtnClick","btnLogsClick","handleGridCellClick","setDocumentName","modalReportePageBtnClick"),t.gridRowData={},t}return _inherits(DocumentTemplate,_React$Component),_createClass(DocumentTemplate,[{key:"componentDidUpdate",value:function(){this.state.docId&&(DocContext[this.props.docTypeId.toLowerCase()]=this.state.docId)}},{key:"componentDidMount",value:function(){if(DocContext.docTypeId=this.props.docTypeId,this.state.reloadData&&this.fetchData(),this.libs=this.createLibs(),this.props.focusElement){var e=this.refs[this.props.focusElement];e&&e.focus()}this.setDocumentName()}},{key:"render",value:function(){var e=this.state.edited;if(this.props.libs.length&&!this.state.loadedLibs){var t=(new Date).toISOString().slice(0,10);this.docData&&this.docData.kpv&&(t=this.docData.kpv),this.loadLibs(null,t)}var a=styles[this.state.warningType]?styles[this.state.warningType]:null,n=this.serverValidation.length>0?"Dokument "+this.serverValidation[0].name+" = "+this.serverValidation[0].value+" juba olemas. Kas jätka?":"",r={btnStart:{show:!0},btnLogin:{show:!0,disabled:!1},btnAccount:{show:!0,disabled:!1}};return React.createElement("div",null,React.createElement(Menu,{params:r,ref:"menu",store:this.props.store,history:this.props.history,rekvId:DocContext.userData?DocContext.userData.asutusId:0,module:this.props.module?this.props.module:DocContext.module}),this.renderDocToolBar(),React.createElement(Form,{pages:this.pages,ref:"form",handlePageClick:this.handlePageClick,disabled:e},React.createElement(ToolbarContainer,{ref:"toolbar-container"},React.createElement("div",{className:"doc-toolbar-warning",style:a},this.state.warning?React.createElement("span",null,this.state.warning):null)),React.createElement("div",{style:styles.doc},this.props.renderer?this.props.renderer(this):null)),React.createElement(ModalPage,{show:this.serverValidation.length>0,modalPageName:"Kontrol",modalObjects:["btnOk","btnCancel"],modalPageBtnClick:this.modalPageBtnClick.bind(this)},React.createElement("div",{ref:"container"},React.createElement("img",{ref:"image",src:styles.modalValidate.iconImage}),React.createElement("span",null," ",n," "))),React.createElement(ModalReport,{show:this.state.isReport,report:this.state.txtReport,modalPageBtnClick:this.modalReportePageBtnClick}))}},{key:"btnAddClick",value:function(){var e=this;this.makeBackup(),this.props.history&&this.props.history.push("/"+(this.props.module?this.props.module:DocContext.module)+"/"+this.props.docTypeId+"/0"),this.setState({docId:0,edited:!0},function(){e.fetchData().then(function(){e.forceUpdate()})}),this.props.focusElement&&this.refs[this.props.focusElement]&&this.refs[this.props.focusElement].focus()}},{key:"btnEditClick",value:function(){this.setState({edited:!0,reloadData:!0}),this.makeBackup(),this.props.focusElement&&this.refs[this.props.focusElement]&&this.refs[this.props.focusElement].focus()}},{key:"btnDeleteClick",value:function(){}},{key:"btnPrintClick",value:function(){var e="/print/"+this.props.docTypeId+"/"+DocContext.userData.uuid+"/"+this.state.docId;window.open(""+e)}},{key:"btnPdfClick",value:function(){var e="/pdf/"+this.props.docTypeId+"/"+DocContext.userData.uuid+"/"+this.state.docId;window.open(""+e)}},{key:"btnEmailClick",value:function(){var e=this;"arv"==this.props.docTypeId.toLowerCase()||"teatis"==this.props.docTypeId.toLowerCase()?this.fetchData("Post","/email").then(function(t){if(200===t.status)e.setState({reloadData:!1,warning:"Email saadetud edukalt",warningType:"ok"});else{var a=t.error_message?t.error_message:"";e.setState({reloadData:!1,warning:"Tekkis viga "+a,warningType:"error"})}}):(DocContext["email-params"]={docId:this.state.docId,docTypeId:this.props.docTypeId,queryType:"id"},this.props.history.push("/"+(this.props.module?this.props.module:DocContext.module)+"/e-mail/0"))}},{key:"btnSaveClick",value:function(){var e=this;this.setState({edited:!1,warning:"Salvestan...",warningType:"notValid"}),this.fetchData("Put").then(function(t){return!!t&&(e.docData=t.data[0],void e.setState({reloadData:!1,warning:"Salvestatud edukalt",warningType:"ok",edited:!1,docId:e.docData.id?e.docData.id:0},function(){DocContext[e.props.docTypeId]=e.docData.id,DocContext.libs&&DocContext.libs[e.props.docTypeId.toLowerCase()]&&e.loadLibs(e.props.docTypeId.toLowerCase());
var t=e.props.docTypeId.toLowerCase();DocContext.libs&&DocContext.libs[t]&&DocContext.libs[t].length>0&&(DocContext.libs[t]=[]),e.props.reload&&setTimeout(function(){var t="/"+(e.props.module?e.props.module:DocContext.module)+"/"+e.props.docTypeId+"/"+e.docData.id;e.props.history.replace("/reload"),setTimeout(function(){e.props.history.replace(t)})},2e3)}))})}},{key:"btnCancelClick",value:function(){this.state.docId?this.restoreFromBackup():this.props.history.goBack(),this.setState({edited:!1,warning:"",warningType:null})}},{key:"btnTaskClick",value:function(e,t,a,n,r){var o=this,i=this.bpm.find(function(t){return t.name===e});if(!i)return void this.setState({warning:"Viga, task "+e+" ei leidnud",warningType:"error"});var l="/newApi/task/"+i.task;this.setState({warning:"Töötan...",warningType:"notValid"}),this.fetchData("Post",l,t||a||n||r?{seisuga:t,gruppId:a,viitenumber:n,kogus:r}:null).then(function(e){var t=e.result,a=e.data.error_message?e.data.error_message:"",n=t.docId;n?o.setState({warning:"Edukalt "+a,warningType:"ok"},function(){setTimeout(function(){var e="/"+(o.props.module?o.props.module:DocContext.module)+"/"+o.props.docTypeId+"/"+o.state.docId;o.props.history.replace("/reload"),setTimeout(function(){o.props.history.replace(e)})},2e3)}):a&&o.setState({warning:"Viga, "+a,warningType:"error"},function(){setTimeout(function(){var e="/"+(o.props.module?o.props.module:DocContext.module)+"/"+o.props.docTypeId+"/"+o.state.docId;o.props.history.replace("/reload"),setTimeout(function(){o.props.history.replace(e)})},2e3)})})}},{key:"btnLogsClick",value:function(){var e=this,t="/newApi/logs/";this.fetchData("Post",t).then(function(t){var a=t.data;e.setState({showLogs:!0,logs:a})})}},{key:"makeBackup",value:function(){this.backup=JSON.stringify(this.docData)}},{key:"restoreFromBackup",value:function(){this.docData=JSON.parse(this.backup)}},{key:"handleInputChange",value:function(e,t){return!!this.state.edited&&(this.docData[e]=t,this.props.handleInputChange&&this.props.handleInputChange(e,t),this.validation(),void this.forceUpdate())}},{key:"handleGridCellClick",value:function(e,t,a,n,r){this.docData&&this.docData.gridData&&(this.docData.gridData[a][n]=r,this.setState({docData:this.docData}),this.props.trigger&&this.props.trigger(this,a,n,r)),this.validation()}},{key:"validation",value:function validation(){var _this7=this;if(!this.state.edited)return"";var warning="",notRequiredFields=[],expressionFields=[],notMinMaxRule=[];return this.requiredFields&&(this.requiredFields.forEach(function(field){if(field.name&&field.name in _this7.docData){var value=_this7.docData[field.name];value||"B"===field.type?field.serverValidation&&_this7.fetchData("Post","/newApi/validate/"+field.serverValidation+"/"+value).then(function(e){if(e.data.data.length){var t=e.data.data[0].id,a=_this7.state.warning;t&&t!==_this7.state.docId&&(_this7.serverValidation.push({name:field.name,value:value,result:t}),a+=value+" ("+field.name+") juba olemas",_this7.setState({warning:a,warningType:"notValid"}),_this7.forceUpdate())}}):notRequiredFields.push(field.name);var checkValue=!1;switch(field.type){case"D":var controlledValueD=Date.parse(value);field.min&&controlledValueD<field.min&&field.max&&controlledValueD>field.max&&(checkValue=!0);break;case"N":var controlledValueN=+value;(field.min&&0===controlledValueN||field.min&&controlledValueN<field.min&&field.max&&controlledValueN>field.max)&&(checkValue=!0)}if(checkValue&&notMinMaxRule.push(field.name),field.expression){var data=_this7.docData,expression=field.expression,result=eval(field.expression);result||expressionFields.push(field.name)}}field.trigger&&field.trigger()}),notRequiredFields.length>0&&(warning=warning+" puudub vajalikud andmed ("+notRequiredFields.join(", ")+") "),notMinMaxRule.length>0&&(warning=warning?warning:" min/max on vale("+notMinMaxRule.join(", ")+") "),expressionFields.length>0&&(warning=warning?warning:" vale andmed ("+expressionFields.join(", ")+") "),this.setState({warning:warning,warningType:warning.length?"notValid":null})),warning}},{key:"renderDocToolBar",value:function(){var e=this.prepareParamsForToolbar();return React.createElement(ToolbarContainer,{ref:"toolbarContainer"},React.createElement(DocToolBar,{ref:"doc-toolbar",docTypeId:this.props.docTypeId,store:this.props.store,bpm:this.bpm?this.bpm:[],logs:this.state.logs,docId:this.state.docId,edited:this.state.edited,docStatus:this.docData.doc_status,validator:this.validation,btnAddClick:this.btnAddClick,btnEditClick:this.btnEditClick,btnCancelClick:this.btnCancelClick,btnPrintClick:this.btnPrintClick,btnEmailClick:this.btnEmailClick,btnSaveClick:this.btnSaveClick,btnLogsClick:this.btnLogsClick,btnTaskClick:this.btnTaskClick,toolbarParams:e}))}},{key:"prepareParamsForToolbar",value:function(){var e=this.props.store.getState().statuses.user,t=e.is_raama;return{btnAdd:{show:!!t,disabled:!1},btnEdit:{show:!!t,disabled:!1},btnSave:{show:this.state.edited,disabled:this.state.isDisableSave},btnDelete:{show:!!t,disabled:!1},btnPrint:{show:!0,disabled:!1},btnStart:{show:!0},btnLogin:{show:!0,disabled:!1},btnAccount:{show:!0,disabled:!1},btnRekv:{show:!0,disabled:!1}}}},{key:"fetchData",value:function(e,t,a){var n=this,r=t?t:URL+"/"+this.props.docTypeId+"/"+this.state.docId,o="fetchDataPost",i=void 0;this.props.store&&(i=this.props.store.getState().statuses.user);var l={docTypeId:this.props.docTypeId?this.props.docTypeId:DocContext.docTypeId,module:this.props.module?this.props.module:DocContext.module,userId:DocContext.userData.userId,uuid:i&&i.uuid?i.uuid:DocContext.userData.uuid,docId:this.state.docId,context:DocContext[t]?DocContext[t]:null};return e&&(o="fetchData"+e,l=Object.assign({},l,this.docData,a?a:{})),new Promise(function(e,t){_fetchData[o](r,l).then(function(a){if(a.status&&401===a.status&&(document.location="/login"),a.data){if(a.data.action&&"select"===a.data.action){if(n.docData=a.data.data[0],a.data.data[0].requiredFields&&(n.requiredFields=a.data.data[0].requiredFields),a.data.data[0].bpm){var r=DocRights[n.props.docTypeId]?DocRights[n.props.docTypeId]:[],o=DocContext.userData?DocContext.userData.roles:[];n.bpm=a.data.data[0].bpm.filter(function(e){return checkRights(o,r,e.task)})}n.setState({reloadData:!1,warning:"",warningType:null}),e(a.data.data[0])}if(a.data.action&&"save"===a.data.action&&a.data.result.error_code){var i=a.data.result&&a.data.result.error_message?a.data.result.error_message:"";return n.setState({warning:"Tekkis viga: salvestamine ebaõnnestus "+i,warningType:"error",txtReport:a.data,isReport:!(!a.data.data||!a.data.data.length)}),t()}return e(a.data)}return n.setState({warning:"Tekkis viga "+(a.data.error_message?a.data.error_message:""),warningType:"error"}),t()}).catch(function(e){return n.setState({warning:"Tekkis viga "+e,warningType:"error"}),t()})})}},{key:"loadLibs",value:function(e,t){var a=this,n=e?1:this.props.libs.length,r=e?[e]:Object.keys(this.libs);this.loadingLibs[e]||(this.loadingLibs[e]=!0,r.forEach(function(e){var r=e in a.state.libParams;(new Date).toISOString().slice(0,10);var o=Object.assign({module:a.props.module?a.props.module:DocContext.module,userId:DocContext.userData.id,uuid:DocContext.userData.uuid},r?{sql:a.state.libParams[e],kpv:t?t:(new Date).toISOString().slice(0,10)}:{});a.state.libParams[e]||!a.hasLibInCache(e)?_fetchData.fetchDataPost(LIBS_URL+"/"+e,o).then(function(t){t&&"data"in t&&(a.libs[e]=t.data.result.result.data,DocContext.libs[e]=a.libs[e],n--,a.loadingLibs[e]=!1,n||a.state.loadedLibs||a.setState({loadedLibs:!0,warning:"Kõik püsiandmed laaditud õnnestus",warningType:"ok"}))}).catch(function(e){}):(a.libs[e]=DocContext.libs[e].filter(function(e){var t=a.docData.valid?a.docData.valid:(new Date).toISOString().slice(0,10);if(t=a.docData.kpv?a.docData.kpv:t,!e.valid||new Date(t)<=new Date(e.valid))return e}),a.loadingLibs[e]=!1,n--,n||a.state.loadedLibs||a.setState({loadedLibs:!0,warning:"Kõik püsiandmed laaditud õnnestus",warningType:"ok"})),n<=1&&!a.state.loadedLibs&&a.setState({loadedLibs:!0,warning:"Kõik püsiandmed laaditud õnnestus",warningType:"ok"})}))}},{key:"hasLibInCache",value:function(e){return DocContext.libs||(DocContext.libs={}),!(!DocContext.libs[e]||0===DocContext.libs[e].length)}},{key:"createLibs",value:function(){var e=this,t={},a={};return this.props.libs.forEach(function(e){"object"==(void 0===e?"undefined":_typeof(e))?(t[e.id]=[],a[e.id]=e.filter):t[e]=[]}),this.setState({libParams:a},function(){return e.loadLibs()}),t}},{key:"createGridRow",value:function(){var e=void 0;return this.props.createGridRow&&(e=this.props.createGridRow(this)),e}},{key:"handlePageClick",value:function(e){var t=this;if(e.handlePageClick)e.handlePageClick(e.docTypeId);else if(e.docId){var a="/"+DocContext.module+"/"+e.docTypeId+"/"+e.docId;this.props.history.replace("/reload"),setTimeout(function(){t.props.history.replace(a)})}}},{key:"handleGridBtnClick",value:function(e,t,a,n){if(this.props.handleGridBtnClick)this.props.handleGridBtnClick(e,t,a,n);else switch(e.toLowerCase()){case"add":this.addRow();break;case"lisa":this.addRow();break;case"edit":this.editRow();break;case"muuda":this.editRow();break;case"delete":this.deleteRow();break;case"kustuta":this.deleteRow()}}},{key:"handleGridRow",value:function(e){this.setState({gridRowEdit:!0,gridRowEvent:e})}},{key:"addRow",value:function(){if(this.docData.gridConfig.length){for(var e=this.docData.gridConfig,t={},a=0;a<e.length;a++){var n=e[a].id;t[n]=""}t.id="NEW"+Math.random(),this.gridRowData=t,this.setState({gridRowEdit:!0,gridRowEvent:"add"})}}},{key:"editRow",value:function(){this.gridRowData=this.docData.gridData[this.refs["data-grid"].state.activeRow],this.setState({gridRowEdit:!0,gridRowEvent:"edit"})}},{key:"deleteRow",value:function(){this.docData.gridData.splice(this.refs["data-grid"].state.activeRow,1),this.props.recalcDoc&&this.props.recalcDoc(),this.validation(),this.forceUpdate()}},{key:"handleGridRowInput",value:function(e,t){var a=this.docData.gridConfig.filter(function(t){if(t.id===e)return t}),n=a.length&&a[0].type?a[0].type:"text";switch(n){case"text":this.gridRowData[e]=t+"";break;case"number":this.gridRowData[e]=+t;break;default:this.gridRowData[e]=t}this.forceUpdate(),this.validateGridRow()}},{key:"handleGridRowChange",value:function(e,t){this.gridRowData[e]=t,this.forceUpdate(),this.validateGridRow()}},{key:"validateGridRow",value:function(){var e="";this.props.gridValidator&&(e=this.props.gridValidator(this.gridRowData)),e.length>2&&(e="Отсутсвуют данные:"+e),this.setState({checked:!0,gridWarning:e})}},{key:"modalPageClick",value:function(e,t){var a=this,n=!1;return"Ok"!==e&&"OK"!==e||(this.docData.gridData.length&&this.docData.gridData.some(function(e){return e.id===a.gridRowData.id})?this.docData.gridData=this.docData.gridData.map(function(e){return e.id===a.gridRowData.id?a.gridRowData:e}):this.docData.gridData.splice(0,0,this.gridRowData),n=!!this.state.warning),this.props.recalcDoc&&this.props.recalcDoc(),this.setState({gridRowEdit:n}),n}},{key:"_bind",value:function(){for(var e=this,t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];a.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}},{key:"modalPageBtnClick",value:function(e){var t=this,a=this.serverValidation[0].result;if(this.serverValidation=[],"Ok"===e){this.props.history.push("/"+(this.props.module?this.props.module:DocContext.module)+"/"+this.props.docTypeId+"/"+a);var n="/"+(this.props.module?this.props.module:DocContext.module)+"/"+this.props.docTypeId+"/"+a;this.props.history.replace("/reload"),setTimeout(function(){t.props.history.replace(n)})}else this.forceUpdate()}},{key:"setDocumentName",value:function(){var e=this,t=DocContext.menu.find(function(t){return t.kood===e.props.docTypeId});t&&(DocContext.pageName=t.name)}},{key:"modalReportePageBtnClick",value:function(e){var t=!e||"Ok"!=e;this.setState({isReport:t})}}]),DocumentTemplate}(React.Component);DocumentTemplate.propTypes={initData:PropTypes.object,requiredFields:PropTypes.array,edited:PropTypes.bool,docTypeId:PropTypes.string.isRequired,docId:PropTypes.number.isRequired,libs:PropTypes.array,renderer:PropTypes.func,recalcDoc:PropTypes.func,focusElement:PropTypes.string},DocumentTemplate.defaultProps={initData:[],docId:0,edited:!1,requiredFields:[],pages:[],libs:[],isDisableSave:!1,isGridDataSave:!1},module.exports=DocumentTemplate},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(66),d=a(309),u=a(311),c=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handlePageClick=a.handlePageClick.bind(a),a}return o(t,e),i(t,[{key:"handlePageClick",value:function(e){this.props.handlePageClick&&this.props.handlePageClick(e)}},{key:"render",value:function(){var e=this,t=this.props.pages;return s.createElement("div",null,t.length?t.map(function(t,a){return s.createElement(d,{key:a,active:0==a,handlePageClick:e.handlePageClick,page:t,disabled:e.props.disabled,ref:"page-"+a})}):null,s.createElement("div",{style:u.page},this.props.children))}}]),t}(s.PureComponent);c.propTypes={pages:l.array.isRequired,handlePageClick:l.func,disabled:l.bool},c.defaultProps={disabled:(!1).valueOf(),pages:[]},e.exports=c},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(66),d=a(310),u=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={disabled:e.disabled},a.handleClick=a.handleClick.bind(a),a}return o(t,e),i(t,[{key:"handleClick",value:function(){if(!this.state.disabled){var e=this.props.page;this.props.handlePageClick&&this.props.handlePageClick(e)}}},{key:"render",value:function(){var e=this.props.page,t=Object.assign({},d.pageLabel,this.props.active?{backgroundColor:"white"}:{});return s.createElement("label",{style:t,disabled:this.state.disabled,ref:"pageLabel",onClick:this.handleClick},e.pageName)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.disabled!==t.disabled?{disabled:e.disabled}:null}}]),t}(s.PureComponent);u.propTypes={handlePageClick:l.func,page:l.object.isRequired,disabled:l.bool,active:l.bool},u.defaultProps={disabled:!1,active:!0},e.exports=u},function(e,t){"use strict";e.exports={pageLabel:{border:"1px solid lightGrey",borderRadius:"3px",borderBottom:"1px solid white",margin:"5px",marginLeft:"-7px",padding:"2px 10px 2px 10px"}}},function(e,t){"use strict";e.exports={page:{borderRadius:"3px"},icons:{add:"images/icons/add.png",edit:"images/icons/edit.png",delete:"images/icons/delete.png",filter:"images/icons/filter.png",print:"images/icons/print.png",ok:"images/icons/ok.png",cancel:"images/icons/cancel.png"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(66),d=a(145),u=a(152),c=a(154),p=a(313),h=a(314),f=a(288),m=a(292),b=(a(289),a(315)),y=a(317),g=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.btnEditClick=a.btnEditClick.bind(a),a.btnAddClick=a.btnAddClick.bind(a),a.btnSaveClick=a.btnSaveClick.bind(a),a.btnCancelClick=a.btnCancelClick.bind(a),a.btnPrintClick=a.btnPrintClick.bind(a),a.btnPdfClick=a.btnPdfClick.bind(a),a.btnEmailClick=a.btnEmailClick.bind(a),a.btnLogsClick=a.btnLogsClick.bind(a),a.handleButtonTask=a.handleButtonTask.bind(a),a.handleSelectTask=a.handleSelectTask.bind(a),a.docId=null,e.docId&&(a.docId=e.docId),a.state={docStatus:e.docStatus},a}return o(t,e),i(t,[{key:"render",value:function(){var e=this.props.edited,t=2===this.props.docStatus,a=this.docId,n={is_raama:!1};this.props.store&&(n=this.props.store.getState().statuses.user);var r=!!n.is_accounter;r&&e&&(r=!1);var o=!!n.is_accounter;o&&e&&(o=!1);var i={btnAdd:{show:r,disabled:e},btnEdit:{show:o,disabled:t},btnPrint:{show:!0,disabled:!1},btnEmail:{show:!0,disabled:!1},btnSave:{show:e&&!t,disabled:!(!this.props.toolbarParams||!this.props.toolbarParams.btnSave)&&this.props.toolbarParams.btnSave.disabled},btnCancel:{show:e&&0!==a,disabled:!1}};return s.createElement(d,{ref:"toolbarContainer"},s.createElement(u,{ref:"btnAdd",onClick:this.btnAddClick,show:i.btnAdd.show,disabled:i.btnAdd.disabled}),s.createElement(c,{ref:"btnEdit",value:"Muuda",onClick:this.btnEditClick,show:i.btnEdit.show,disabled:i.btnEdit.disabled}),s.createElement(p,{ref:"btnSave",value:"Salvesta",onClick:this.btnSaveClick,show:i.btnSave.show,disabled:i.btnSave.disabled}),s.createElement(h,{ref:"btnCancel",value:"Tühista",onClick:this.btnCancelClick,show:i.btnCancel.show,disabled:i.btnCancel.disabled}),s.createElement(f,{ref:"btnPrint",value:"Trükk",onClick:this.btnPrintClick,show:i.btnPrint.show,disabled:i.btnPrint.disabled}),s.createElement(m,{ref:"btnEmail",docTypeId:this.props.docTypeId,onClick:this.btnEmailClick,show:i.btnEmail.show,disabled:i.btnEmail.disabled}),s.createElement(b,{ref:"btnLogs",data:this.props.logs,onClick:this.btnLogsClick,show:!e}),!this.props.bpm.length||t||e?null:s.createElement(y,{ref:"taskWidget",taskList:this.props.bpm,handleSelectTask:this.handleSelectTask,handleButtonTask:this.handleButtonTask}))}},{key:"btnAddClick",value:function(){this.props.btnAddClick&&this.props.btnAddClick()}},{key:"btnEditClick",value:function(){if(!this.props.docStatus||this.props.docStatus<2){if(this.props.history)return this.props.history.push("/raama/"+value);this.props.btnEditClick&&this.props.btnEditClick()}}},{key:"btnPrintClick",value:function(){this.props.btnPrintClick&&this.props.btnPrintClick()}},{key:"btnPdfClick",value:function(){this.props.btnPdfClick&&this.props.btnPdfClick()}},{key:"btnEmailClick",value:function(){this.props.btnEmailClick&&this.props.btnEmailClick()}},{key:"btnSaveClick",value:function(){var e=this.props.validator?this.props.validator():"",t=!this.props.validator||!e;t&&this.props.btnSaveClick&&this.props.btnSaveClick()}},{key:"btnCancelClick",value:function(){this.props.btnCancelClick&&this.props.btnCancelClick()}},{key:"btnLogsClick",value:function(){this.props.btnLogsClick&&this.props.btnLogsClick()}},{key:"handleButtonTask",value:function(e,t,a,n,r){var o=this.props.bpm.find(function(t){return t.name===e});if(o)return this.props.btnTaskClick(o.name,t,a,n,r)}},{key:"handleSelectTask",value:function(e){var t=e.target.value;if(this.props.btnTaskClick)return this.props.btnTaskClick(t)}}]),t}(s.PureComponent);g.propTypes={bpm:l.array,edited:l.bool,docStatus:l.number,validator:l.func},g.defaultProps={bpm:[],edited:!1,docStatus:0},e.exports=g},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(66),d=a(148),u=a(149),c="save",p=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={disabled:e.disabled},a}return o(t,e),i(t,[{key:"handleClick",value:function(e){if(!this.state.disabled)return this.setState({disabled:!0}),this.props.onClick()}},{key:"componentDidUpdate",value:function(e){this.setState({disabled:e.disabled})}},{key:"render",value:function(){var e=this;return s.createElement(u,{ref:"btnSave",value:"Save",show:this.props.show,disabled:this.state.disabled,onClick:function(t){return e.handleClick(t)}},s.createElement("img",{ref:"image",src:d.icons[c]}))}}]),t}(s.PureComponent);p.propTypes={onClick:l.func.isRequired,disabled:l.bool},p.defaultProps={disabled:!1,show:!0},e.exports=p},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(66),d=a(148),u=a(149),c="cancel",p=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={disabled:e.disabled},a}return o(t,e),i(t,[{key:"handleClick",value:function(e){return this.props.onClick()}},{key:"componentDidUpdate",value:function(e){this.setState({disabled:e.disabled})}},{key:"render",value:function(){var e=this;return s.createElement(u,{ref:"btnCancel",value:"Cancel",show:this.props.show,disabled:this.state.disabled,onClick:function(t){return e.handleClick(t)}},s.createElement("img",{ref:"image",src:d.icons[c]}))}}]),t}(s.PureComponent);p.propTypes={onClick:l.func.isRequired,disabled:l.bool},p.defaultProps={disabled:!1,show:!0},e.exports=p},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(66),d=a(316),u=a(267),c=a(149),p=a(155),h=a(245),f=a(160).logs.gridConfig,m=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={show:!!a.props.data.length},a.modalPageClick=a.modalPageClick.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){var e=this;return this.state.show?this.modalPage():s.createElement(c,{ref:"btnLogs",value:"Loggid",show:this.props.show,onClick:function(t){return e.handleClick(t)}},s.createElement("img",{ref:"image",src:d.button.icon}))}},{key:"handleClick",value:function(){this.props.onClick(),this.setState({show:!0})}},{key:"modalPage",value:function(){var e=["btnOk"];return s.createElement(h,{modalObjects:e,ref:"modalpage-grid",show:!0,modalPageBtnClick:this.modalPageClick,modalPageName:"Loggid"},s.createElement("div",{style:d.btnInfo},s.createElement(p,{ref:"btnInfo",value:"",docTypeId:"logid",show:!0})),s.createElement("div",{ref:"grid-row-container"},s.createElement(u,{gridData:this.props.data.data,gridColumns:f,showToolBar:!1,ref:"data-grid"})))}},{key:"modalPageClick",value:function(e){"Ok"===e&&this.setState({show:!1})}}]),t}(s.PureComponent);m.propTypes={show:l.bool},m.defaultProps={show:!0},e.exports=m},function(e,t){"use strict";e.exports={wrapper:{margin:"5px",display:"flex",width:"95%"},button:{icon:"/images/icons/info.png",width:"10%"},btnInfo:{display:"flex",flexDirection:"row-reverse"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(318),d=a(66),u=a(319),c=a(149),p=a(238),h=a(320),f=a(296),m=a(322),b=a(245),y=a(324),g=a(1),v=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={taskList:e.taskList||[],actualTask:e.taskList[0].name,showList:!1,showModal:!1,showDate:!0,titleDate:null,showViitenumber:!1,titleViitenumber:null,showYksus:e.kasShowYksus,titleYksus:null,showKogus:e.kasShowKogus,titleKogus:null,viitenumber:null,yksus:0,kogus:g.mkJaak?g.mkJaak:0,seisuga:s()},a.handleSelectTask=a.handleSelectTask.bind(a),a.handleButtonTask=a.handleButtonTask.bind(a),a.handleButtonOpenClick=a.handleButtonOpenClick.bind(a),a.modalPageClick=a.modalPageClick.bind(a),a.handleInputChange=a.handleInputChange.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){var e=this;if(!this.state.taskList)return d.createElement("div",null);var t=this.state.taskList.map(function(e,t){return{id:t++,name:" ",kood:e.name}});t.findIndex(function(t){return t.name==e.state.actualTask});return d.createElement("div",{style:y.wrapper},d.createElement("div",null,d.createElement("div",{style:y.wrapper},d.createElement(u,{ref:"buttonTask",onClick:this.handleButtonTask,value:this.state.actualTask}),d.createElement(c,{ref:"buttonOpenList",onClick:this.handleButtonOpenClick,value:"v"})),this.state.showList?d.createElement(p,{name:"name",style:y.select,data:t,collId:"kood",value:this.state.actualTask||"",defaultValue:this.state.actualTask,ref:"select-name",onChange:this.handleSelectTask,readOnly:!1}):null,this.state.showModal?d.createElement(b,{modalPageBtnClick:this.modalPageClick,modalPageName:"Tegevus",show:!0,modalObjects:["btnOk","btnCancel"]},"Kas käivata "+this.state.actualTask+" ?",this.state.showDate?d.createElement(h,{title:this.state.titleDate?this.state.titleDate:"Seisuga ",name:"seisuga",value:this.state.seisuga,ref:"input-kpv",readOnly:!1,onChange:this.handleInputChange}):null,this.state.showYksus?d.createElement(p,{title:this.state.titleYksus?this.state.titleYksus:"Üksus:",name:"yksus",libs:"lapse_grupp",data:g.libs.lapse_grupp?g.libs.lapse_grupp:[],ref:"select-lapse_grupp",collId:"id",onChange:this.handleInputChange,value:this.state.yksus||0,disabled:!1,readOnly:!1}):null,this.state.showViitenumber?d.createElement(f,{title:this.state.titleViitenumber?this.state.titleViitenumber:"Viitenumber:",name:"viitenumber",ref:"input-viitenumber",onChange:this.handleInputChange,value:this.state.viitenumber,readOnly:!1}):null,this.state.showKogus?d.createElement(m,{title:this.state.titleKogus?this.state.titleKogus:"Väärtus",name:"kogus",value:+this.state.kogus,ref:"input-kogus",readOnly:!1,max:g.mkJaak?g.mkJaak:999999999,onChange:this.handleInputChange}):null):null))}},{key:"modalPageClick",value:function(e){this.setState({showModal:!1}),"Ok"===e&&this.props.handleButtonTask(this.state.actualTask,this.state.seisuga,this.state.yksus,this.state.viitenumber,this.state.kogus)}},{key:"handleButtonOpenClick",value:function(){var e=!this.state.showList;this.setState({showList:e})}},{key:"handleSelectTask",value:function(e,t){var a=!this.state.showList,n=this.state.taskList.find(function(e){return e.name==t}),r=!n||!n.hasOwnProperty("hideDate")||!n.hideDate,o=!(!n||!n.hasOwnProperty("showYksus"))&&n.showYksus,i=!(!n||!n.hasOwnProperty("showViitenumber"))&&n.showViitenumber,l=!(!n||!n.hasOwnProperty("showKogus"))&&n.showKogus;this.setState({showList:a,actualTask:t,showDate:r,titleDate:n.titleDate?n.titleDate:null,showYksus:o,showViitenumber:i,titleViitenumber:n.titleViitenumber?n.titleViitenumber:null,showKogus:l,titleKogus:n.titleKogus?n.titleKogus:null})}},{key:"handleButtonTask",value:function(){var e=this,t=this.state.showYksus,a=(this.state.showViitenumber,this.state.showKogus,this.state.taskList.find(function(t){return t.name==e.state.actualTask})),n=!a||!a.hasOwnProperty("hideDate")||!a.hideDate,r=!(!a||!a.hasOwnProperty("showViitenumber"))&&a.showViitenumber,o=!(!a||!a.hasOwnProperty("showKogus"))&&a.showKogus;t=!(!a||!a.hasOwnProperty("showYksus"))&&a.showYksus,this.setState({showModal:!0,showYksus:t,showDate:n,showKogus:o,showViitenumber:r})}},{key:"handleInputChange",value:function(e,t){var a={seisuga:this.state.seisuga,yksus:this.state.yksus,viitenumber:this.state.viitenumber,kogus:this.state.kogus};a[e]=t,this.setState(a)}}]),t}(d.PureComponent);v.propTypes={taskList:l.array,handleButtonTask:l.func.isRequired,handleSelectTask:l.func.isRequired,kasShowYksus:l.bool,kasShowKogus:l.bool,kasShowViitenumber:l.bool},v.defaultProps={taskList:[],kasShowYksus:!1,kasShowKogus:!1,kasShowViitenumber:!1},e.exports=v},function(e,t){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return e.toISOString().substring(0,10)}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");
}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(66),d=a(148),u=a(149),c="execute",p=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleClick=a.handleClick.bind(a),a}return o(t,e),i(t,[{key:"handleClick",value:function(){this.props.onClick&&this.props.onClick()}},{key:"render",value:function(){return s.createElement(u,{ref:"btnExecute",value:this.props.value,show:this.props.show,disabled:this.props.disabled,onClick:this.handleClick},s.createElement("img",{ref:"image",src:d.icons[c]}))}}]),t}(s.PureComponent);p.propTypes={onClick:l.func.isRequired,value:l.string.isRequired},p.defaultProps={disabled:!1,show:!0},e.exports=p},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(162),d=a(66),u=a(321),c=a(150),p=(new Date).toLocaleDateString(),h=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value||"",readOnly:e.readOnly},a.onChange=a.onChange.bind(a),a}return o(t,e),i(t,[{key:"focus",value:function(){this.refs.input.focus()}},{key:"onChange",value:function(e){var t=e.target.value,a=this.validate(t);null==t&&(a=!0),a&&(this.setState({value:t}),this.props.onChange&&this.props.onChange(this.props.name,t))}},{key:"render",value:function(){var e=this.props.placeholder||this.props.title,t=Object.assign({},u.input,this.props.width?{width:this.props.width}:{},this.state.readOnly?u.readOnly:{},this.props.styles?this.props.styles:{});return d.createElement("div",{style:u.wrapper},d.createElement("label",{style:u.label,htmlFor:this.props.name,ref:"label"},c(this.props.title)),d.createElement("input",{type:"date",style:t,name:this.props.name,ref:"input",value:this.state.value||"",readOnly:this.state.readOnly,title:this.props.title,placeholder:e,min:this.props.min,max:this.props.max,onChange:this.onChange,disabled:this.props.disabled}))}},{key:"validate",value:function(e){var t=!0;if(this.props.min&&this.props.max&&e){var a=new Date(e);t=a>this.props.min&&a<this.props.max}return t}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.value||e.readOnly!==t.readOnly?{value:e.value,readOnly:e.readOnly}:null}}]),t}(d.PureComponent);h.propTypes={name:l.string.isRequired,value:l.string,min:l.string,max:l.string,readOnly:l.bool,disabled:l.bool,valid:l.bool,pattern:l.string,width:l.string,title:l.string,placeholder:l.string},h.defaultProps={readOnly:!1,disabled:!1,valid:!0,value:p+"",title:""},e.exports=s(h)},function(e,t){"use strict";e.exports={input:{width:"70%",borderRadius:"3px",margin:"5px 2px",":focus":{backgroundColor:"lightpink"},border:"1px solid gray",height:"30px"},focused:{backgroundColor:"lightblue"},readOnly:{backgroundColor:"#F3EFEF"},wrapper:{margin:"5px",display:"flex",width:"95%"},label:{width:"30%",margin:"5px"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(323),d=a(162),u=a(150),c=a(113),p=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value,readOnly:e.readOnly,disabled:e.disabled,valid:e.valid},a.onChange=a.onChange.bind(a),a}return o(t,e),i(t,[{key:"onChange",value:function(e){var t=e.target.value;this.setState({value:t}),this.props.onChange&&this.props.onChange(this.props.name,t)}},{key:"render",value:function(){var e=this.props.placeholder||this.props.name,t=Object.assign({},s.input,this.props.style?this.props.style:{},this.props.width?{width:this.props.width}:{},this.state.readOnly?s.readOnly:{}),a=this.props.min,n=this.props.max;return l.createElement("div",{style:s.wrapper},l.createElement("label",{style:s.label,htmlFor:this.props.name,ref:"label"},u(this.props.title)),l.createElement("input",{type:this.props.type?this.props.type:"number",id:this.props.name,ref:"input",style:t,name:this.props.name,value:this.state.value,readOnly:this.state.readOnly,title:this.props.title,placeholder:e,onChange:this.onChange,min:a,max:n,pattern:"\\d+(\\.\\d{2})?",step:"0.01",disabled:this.props.disabled}))}},{key:"focus",value:function(){this.refs.input.focus()}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.value||e.readOnly!==t.readOnly?{value:e.value,readOnly:e.readOnly}:null}}]),t}(l.PureComponent);p.propTypes={name:c.string.isRequired,value:c.number,readOnly:c.bool,disabled:c.bool,valid:c.bool,placeholder:c.string,pattern:c.string,title:c.string,min:c.number,max:c.number},p.defaultProps={readOnly:!1,disabled:!1,valid:!0,min:-999999999,max:999999999},e.exports=d(p)},function(e,t){"use strict";e.exports={input:{width:"70%",margin:"5px 2px",borderRadius:"3px",":focus":{backgroundColor:"lightpink"},border:"1px solid gray",height:"30px"},focused:{backgroundColor:"lightblue"},readOnly:{backgroundColor:"#F3EFEF"},wrapper:{margin:"5px",display:"flex",width:"95%"},label:{width:"30%",margin:"5px"}}},function(e,t){"use strict";e.exports={wrapper:{display:"inline-flex"},buttomOpen:{display:"flex"},select:{width:"auto",position:"absolute",height:"30px"}}},function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},ok:{backgroundColor:"lightgreen",width:"100%",textAlign:"right"},error:{backgroundColor:"lightcoral",width:"100%",textAlign:"right"},notValid:{backgroundColor:"yellow",width:"100%",textAlign:"right"},modalValidate:{iconImage:"/images/icons/info.png"}}},function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},function(e,t,a){"use strict";var n=a(328),r=function(e){return React.createElement("div",{style:n.window},React.createElement("label",{style:n.label},e.label))};e.exports=r},function(e,t){"use strict";e.exports={label:{width:"auto"},window:{display:"flex",justifyContent:"center",alignItems:"center"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(113),d=a(307),u=a(296),c=a(320),p=a(238),h=a(300),f=a(330),m=[{id:1,kood:"SD",name:"SD"},{id:2,kood:"SK",name:"SK"},{id:3,kood:"D",name:"D"},{id:4,kood:"K",name:"K"}],b=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:e.docId?e.docId:+e.match.params.docId,loadedData:!1},a.renderer=a.renderer.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(d,{docId:this.state.docId,ref:"document",docTypeId:"KONTOD",history:this.props.history?this.props.history:null,initData:this.props.initData,renderer:this.renderer,focusElement:"input-kood"})}},{key:"renderer",value:function(e){return e.docData?l.createElement("div",{style:f.doc},l.createElement("div",{style:f.docRow},l.createElement(u,{title:"Kood ",name:"kood",ref:"input-kood",readOnly:!e.state.edited,value:e.docData.kood||"",onChange:e.handleInputChange})),l.createElement("div",{style:f.docRow},l.createElement(u,{title:"Nimetus ",name:"nimetus",ref:"input-nimetus",readOnly:!e.state.edited,value:e.docData.nimetus||"",onChange:e.handleInputChange})),l.createElement("div",{style:f.docRow},l.createElement(p,{title:"Konto tüüp",name:"tyyp",data:m,value:e.docData.tyyp||0,defaultValue:e.docData.konto_tyyp,ref:"select-tyyp",btnDelete:e.state.edited,onChange:e.handleInputChange,readOnly:!e.state.edited})),l.createElement("div",{style:f.docRow},l.createElement(c,{title:"Kehtiv kuni:",name:"valid",value:e.docData.valid||"",ref:"input-valid",readOnly:!e.state.edited,onChange:e.handleInputChange})),l.createElement("div",{style:f.docRow},l.createElement(h,{title:"Muud",name:"muud",ref:"textarea-muud",onChange:e.handleInputChange,value:e.docData.muud||"",readOnly:!e.state.edited}))):null}}]),t}(l.PureComponent);b.propTypes={docId:s.number,initData:s.object,userData:s.object},b.defaultProps={initData:{},userData:{}},e.exports=b},function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=a(332),u="KONTOD",c=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.renderer=a.renderer.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(s,{initData:this.props.initData,history:this.props.history?this.props.history:null,ref:"register",module:this.props.module,docTypeId:u,style:d,render:this.renderer})}},{key:"renderer",value:function(){return null}}]),t}(l.PureComponent);e.exports=c},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(113),d=a(307),u=a(296),c=a(320),p=a(300),h=a(327),f=a(334),m=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:e.docId?e.docId:+e.match.params.docId,loadedData:!1},a.renderer=a.renderer.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(d,{docId:this.state.docId,ref:"document",docTypeId:"TUNNUS",module:this.props.module,initData:this.props.initData,userData:this.props.userData,renderer:this.renderer,focusElement:"input-kood",history:this.props.history})}},{key:"renderer",value:function(e){return e.docData?l.createElement("div",{style:f.doc},l.createElement("div",{style:f.docColumn},l.createElement("div",{style:f.docRow},l.createElement(u,{title:"Kood ",name:"kood",ref:"input-kood",readOnly:!e.state.edited,value:e.docData.kood||"",onChange:e.handleInputChange})),l.createElement("div",{style:f.docRow},l.createElement(u,{title:"Nimetus ",name:"nimetus",ref:"input-nimetus",readOnly:!e.state.edited,value:e.docData.nimetus||"",onChange:e.handleInputChange})),l.createElement("div",{style:f.docRow},l.createElement(c,{title:"Kehtiv kuni:",name:"valid",value:e.docData.valid,ref:"input-valid",readOnly:!e.state.edited,onChange:e.handleInputChange}))),l.createElement("div",{style:f.docRow},l.createElement(p,{title:"Muud",name:"muud",ref:"textarea-muud",onChange:e.handleInputChange,value:e.docData.muud||"",readOnly:!e.state.edited}))):l.createElement("div",{style:f.doc},l.createElement(h,{label:"Laadimine..."}))}}]),t}(l.PureComponent);m.propTypes={docId:s.number,initData:s.object},m.defaultProps={initData:{}},e.exports=m},function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=a(336),u="TUNNUS",c=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(s,{initData:this.props.initData,history:this.props.history?this.props.history:null,module:this.props.module,ref:"register",docTypeId:u,style:d,render:this.renderer})}},{key:"renderer",value:function(){return null}}]),t}(l.PureComponent);e.exports=c},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(113),d=a(307),u=a(296),c=a(300),p=a(320),h=a(338),f=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:e.docId?e.docId:+e.match.params.docId,loadedData:!1},a.renderer=a.renderer.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(d,{docId:this.state.docId,ref:"document",docTypeId:"PROJECT",history:this.props.history,initData:this.props.initData,module:this.props.module,userData:this.props.userData,renderer:this.renderer,focusElement:"input-kood"})}},{key:"renderer",value:function(e){return e.docData?l.createElement("div",{style:h.doc},l.createElement("div",{style:h.docRow},l.createElement(u,{title:"Kood ",name:"kood",ref:"input-kood",readOnly:!e.state.edited,value:e.docData.kood,onChange:e.handleInputChange})),l.createElement("div",{style:h.docRow},l.createElement(u,{title:"Nimetus ",name:"nimetus",ref:"input-nimetus",readOnly:!e.state.edited,value:e.docData.nimetus,onChange:e.handleInputChange})),l.createElement("div",{style:h.docRow},l.createElement(p,{title:"Kehtiv kuni:",name:"valid",value:e.docData.valid,ref:"input-valid",readOnly:!e.state.edited,onChange:e.handleInputChange})),l.createElement("div",{style:h.docRow},l.createElement(c,{title:"Muud",name:"muud",ref:"textarea-muud",onChange:e.handleInputChange,value:e.docData.muud||"",readOnly:!e.state.edited}))):null}}]),t}(l.PureComponent);f.propTypes={docId:s.number,initData:s.object,userData:s.object},f.defaultProps={initData:{},userData:{}},e.exports=f},function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=a(340),u="PROJECT",c=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.renderer=a.renderer.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(s,{initData:this.props.initData,userData:this.props.userData,history:this.props.history?this.props.history:null,ref:"register",module:this.props.module,btnEditClick:this.btnEditClick,docTypeId:u,style:d,render:this.renderer})}},{key:"renderer",value:function(){return null}}]),t}(l.PureComponent);e.exports=c},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(113),d=a(307),u=a(296),c=a(320),p=a(238),h=a(300),f=a(322),m=a(342),b=a(160).NOMENCLATURE,y=b.LIBRARIES,g=b.TAXIES,v=b.UHIK,k=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:e.docId?e.docId:+e.match.params.docId,loadedData:!1},a.renderer=a.renderer.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(d,{docId:this.state.docId,ref:"document",store:this.props.store,docTypeId:"NOMENCLATURE",module:this.props.module,initData:this.props.initData,history:this.props.history,userData:this.props.userData,libs:y,renderer:this.renderer,focusElement:"input-kood"})}},{key:"renderer",value:function(e){if(!e.docData)return null;var t=e.state.edited;return l.createElement("div",null,l.createElement("div",{style:m.doc},l.createElement("div",{style:m.docRow},l.createElement("div",{style:m.docColumn},l.createElement(u,{title:"Kood ",name:"kood",ref:"input-kood",value:e.docData.kood,onChange:e.handleInputChange}),l.createElement(u,{title:"Nimetus ",name:"nimetus",ref:"input-nimetus",value:e.docData.nimetus,onChange:e.handleInputChange}),l.createElement(p,{title:"Maksumäär:",name:"vat",data:g,collId:"kood",value:e.docData.vat||"",defaultValue:e.docData.vat,ref:"select-vat",btnDelete:t,onChange:e.handleInputChange,readOnly:!t}),l.createElement(f,{title:"Hind: ",name:"hind",ref:"input-hind",value:+(e.docData.hind||null),readOnly:!t,onChange:e.handleInputChange}),l.createElement(p,{title:"Mõttühik:",name:"uhik",data:v,collId:"kood",value:e.docData.uhik||"",defaultValue:e.docData.uhik,ref:"select-uhik",btnDelete:t,onChange:e.handleInputChange,readOnly:!t}))),l.createElement("div",{style:m.docRow},l.createElement("div",{style:m.docColumn},l.createElement(c,{title:"Kehtiv kuni:",name:"valid",value:e.docData.valid,ref:"input-valid",readOnly:!t,onChange:e.handleInputChange}))),l.createElement("div",{style:m.docRow},l.createElement(h,{title:"Muud",name:"muud",ref:"textarea-muud",onChange:e.handleInputChange,value:e.docData.muud||"",readOnly:!t}))))}}]),t}(l.PureComponent);k.propTypes={docId:s.number,initData:s.object,userData:s.object},k.defaultProps={initData:{},userData:{}},e.exports=k},function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=a(344),u="NOMENCLATURE",c=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.renderer=a.renderer.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(s,{initData:this.props.initData,store:this.props.store,history:this.props.history?this.props.history:null,ref:"register",module:this.props.module,docTypeId:u,style:d,render:this.renderer})}},{key:"renderer",value:function(){return null}}]),t}(l.PureComponent);e.exports=c},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=a(145),u=a(346),c=a(288),p=a(292),h=a(347),f=a(322),m=(a(348),a(349)),b=a(350),y=a(1),g=a(160).ARV.EVENTS,v=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClickHandler=a.onClickHandler.bind(a),a.renderer=a.renderer.bind(a),a.state={summa:0,jaak:0,read:0},a}return o(t,e),i(t,[{key:"render",value:function(){var e="ARV";return l.createElement("div",null,l.createElement(s,{initData:this.props.initData,store:this.props.store,history:this.props.history?this.props.history:null,module:this.props.module,ref:"register",docTypeId:e,style:b,render:this.renderer}),l.createElement(f,{title:"Read kokku:",name:"read_kokku",style:b.total,ref:"input-read",value:+this.state.read||0,disabled:!0}),l.createElement(f,{title:"Summa kokku:",name:"summa_kokku",style:b.total,ref:"input-summa",value:(+this.state.summa).toFixed(2)||0,disabled:!0}),l.createElement(f,{title:"Jääk kokku:",name:"jaak_kokku",style:b.total,ref:"input-jaak",value:(+this.state.jaak).toFixed(2)||0,disabled:!0}))}},{key:"renderer",value:function(e){var t="ARV",a=e.gridData?m(e.gridData,"summa"):0,n=e.gridData?m(e.gridData,"jaak"):0;return a&&this.setState({summa:a,read:e.gridData.length,jaak:n}),l.createElement(d,null,l.createElement(h,{onClick:this.onClickHandler,docTypeId:t,phrase:"Kas laadida XML (SWED) fail?",ref:"btnEarveSwedXML",value:g[6].name}),l.createElement(h,{onClick:this.onClickHandler,docTypeId:t,phrase:"Kas laadida XML (SEB) fail?",ref:"btnEarveSebXML",value:g[5].name}),l.createElement(h,{onClick:this.onClickHandler,docTypeId:t,phrase:"Kas laadida XML fail?",ref:"btnEarveXML",value:g[4].name}),l.createElement(h,{onClick:this.onClickHandler,docTypeId:t,ref:"btnEarveOmniva",value:g[3].name}),l.createElement(p,{onClick:this.onClickHandler,docTypeId:t,ref:"btnEmail",value:g[2].name}),l.createElement(c,{onClick:this.onClickHandler,docTypeId:t,ref:"btnPrint",value:g[1].name}),l.createElement(u,{history:e.props.history?e.props.history:null,docTypeId:t,onClick:this.onClickHandler,ref:"btnSettings",value:g[0].name}))}},{key:"onClickHandler",value:function(e,t){var a=this,n=new Set,r=this.refs.register;switch(e){case g[0].name:this.props.history.push("/"+this.props.module+"/config/"+y.userData.asutusId);break;case g[1].name:if(r.gridData.forEach(function(e){e.select&&e.kas_paberil&&n.add(e.id)}),n=Array.from(n),n.length>0){r.setState({warning:"Leidsin "+n.length+" arveid printimiseks",warningType:"ok"});var o="/multiple_print/"+DOC_TYPE_ID+"/"+y.userData.uuid+"/"+n;window.open(""+o)}else r.setState({warning:"Mitte ühtegi arve leidnum",warningType:"notValid"});break;case g[2].name:r.gridData.forEach(function(e){e.select&&e.kas_email&&n.add(e.id)}),n=Array.from(n),n.length?r.fetchData("email",n).then(function(e){e.result?r.setState({warning:"Kokku saadetud arveid emailga: "+e.result,warningType:"ok"}):r.setState({warning:"Tekkis viga: "+e.error_message,warningType:"error"})}).catch(function(e){r.setState({warning:"Tekkis viga: "+e,warningType:"error"})}):r.setState({warning:"Mitte ühtegi arve leidnum",warningType:"notValid"});break;case g[3].name:r.gridData.forEach(function(e){e.select&&e.kas_earved&&n.add(e.id)}),n=Array.from(n),n.length?r.fetchData("e-arved",n).then(function(e){if(e&&"result"in e)r.setState({warning:"Kokku saadetud arveid  : "+e.result,warningType:"ok"});else{var t=e.error_message;r.setState({warning:""+t,warningType:"error"})}}).catch(function(e){var t=e.TypeError;r.setState({warning:""+t,warningType:"error"})}):r.setState({warning:"Mitte ühtegi arve leidnum",warningType:"notValid"});break;case g[4].name:if(r.gridData.forEach(function(e){e.select&&e.kas_earved&&+e.summa>0&&n.add(e.id)}),n=Array.from(n),n.length){r.setState({warning:"Leidsin "+n.length+" arveid",warningType:"ok"});var i="/e-arved/"+y.userData.uuid+"/"+n;window.open(""+i)}else r.setState({warning:"Mitte ühtegi arve leidnum",warningType:"notValid"});break;case g[5].name:if(r.gridData.forEach(function(e){e.kas_earved&&e.pank&&"SEB"==e.pank&&e.select&&+e.summa>0&&n.add(e.id)}),n=Array.from(n),n.length){r.setState({warning:"Leidsin "+n.length+" arveid",warningType:"ok"});var l="/e-arved/seb/"+y.userData.uuid+"/"+n;window.open(""+l)}else r.setState({warning:"Mitte ühtegi arve leidnum",warningType:"notValid"});break;case g[6].name:if(r.gridData.forEach(function(e){e.kas_earved&&e.select&&e.pank&&"SWED"==e.pank&&+e.summa>0&&n.add(e.id)}),n=Array.from(n),n.length){r.setState({warning:"Leidsin "+n.length+" arveid",warningType:"ok"});var s="/e-arved/swed/"+y.userData.uuid+"/"+n;window.open(""+s)}else r.setState({warning:"Mitte ühtegi arve leidnum",warningType:"notValid"});break;case g[7].name:var d="";r.gridData.forEach(function(e){"Jah"==e.ebatoenaolised&&+e.jaak>0&&n.add(e.id)}),n=Array.from(n),n.length?r.fetchData("calc/ebatoenaolised",{docs:n,seisuga:t}).then(function(e){if(e.result){d="task saadetud täitmisele",r.setState({warning:""+d,warningType:"ok"});var t=e.data.result.tulemused;
a.setState({isReport:!0,txtReport:t})}else e.error_message?r.setState({warning:"Tekkis viga: "+e.error_message,warningType:"error"}):r.setState({warning:"Kokku arvestatud : "+e.result+", "+d,warningType:"notValid"})}):r.setState({warning:"Mitte ühtegi arve leidnum",warningType:"notValid"})}}}]),t}(l.PureComponent);e.exports=v},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=(a(113),a(148)),d=a(149),u="settings",c=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleClick=a.handleClick.bind(a),a}return o(t,e),i(t,[{key:"handleClick",value:function(e){return this.props.onClick(this.props.value)}},{key:"render",value:function(){return l.createElement(d,{value:this.props.value,ref:"btnSettings",style:s.button,disabled:!1,onClick:this.handleClick},l.createElement("img",{ref:"image",src:s.icons[u]}))}}]),t}(l.PureComponent);c.defaultProps={disabled:!1,show:!0,value:"Settings"},e.exports=c},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(a(113),a(66)),s=a(148),d=a(149),u=a(245),c="mail",p=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showModal:!1},a.modalPageClick=a.modalPageClick.bind(a),a}return o(t,e),i(t,[{key:"handleClick",value:function(e){this.setState({showModal:!0})}},{key:"render",value:function(){var e=this,t=this.props.phrase?this.props.phrase:"Kas saada E-Arve ?";return l.createElement("div",null,l.createElement(d,{ref:"btnEmail",value:this.props.value,show:this.props.show,disabled:this.props.disabled,onClick:function(t){return e.handleClick(t)}},l.createElement("img",{ref:"image",src:s.icons[c]})),l.createElement(u,{modalPageBtnClick:this.modalPageClick,modalPageName:""+this.props.value,show:this.state.showModal,modalObjects:["btnOk","btnCancel"]},t))}},{key:"modalPageClick",value:function(e){"Ok"===e&&this.props.onClick(this.props.value),this.setState({showModal:!1})}}]),t}(l.PureComponent);p.defaultProps={disabled:!1,show:!0,value:"Email"},e.exports=p},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=(a(113),a(318)),d=a(245),u=a(148),c=a(149),p=a(320),h=a(322),f="execute",m=a(150),b=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showModal:!1,seisuga:s(),kogus:0,kas_kond:!1},a.handleClick=a.handleClick.bind(a),a.modalPageClick=a.modalPageClick.bind(a),a.handleInputChange=a.handleInputChange.bind(a),a}return o(t,e),i(t,[{key:"handleClick",value:function(e){this.setState({showModal:!0})}},{key:"render",value:function(){var e=m(this.props.value?this.props.value:"Täitmine");return l.createElement("div",null,l.createElement(c,{show:!0,value:e,ref:"btnTask",style:u.button,disabled:!1,onClick:this.handleClick},l.createElement("img",{ref:"image",src:u.icons[f]})),this.state.showModal?l.createElement(d,{modalPageBtnClick:this.modalPageClick,modalPageName:e,show:!0,modalObjects:["btnOk","btnCancel"]},'Kas käivata "'+e+'" ?',this.props.showDate?l.createElement(p,{title:"Seisuga ",name:"kpv",value:this.state.seisuga,ref:"input-kpv",readOnly:!1,onChange:this.handleInputChange}):null,this.props.showKogus?l.createElement(h,{title:this.props.title?this.props.title:"Väärtus",name:"kogus",value:+this.state.kogus,ref:"input-kogus",readOnly:!1,onChange:this.handleInputChange}):null):null)}},{key:"modalPageClick",value:function(e){this.setState({showModal:!1}),"Ok"===e&&this.props.onClick(this.props.value,this.props.showKogus?this.state.kogus:this.state.seisuga,this.state.kas_kond)}},{key:"handleInputChange",value:function(e,t){switch(e){case"kpv":this.setState({seisuga:t});break;case"kogus":this.setState({kogus:t});break;case"kas_kond":this.setState({kas_kond:t})}}}]),t}(l.PureComponent);b.defaultProps={disabled:!1,show:!0,showDate:!0,showKogus:!1,showKond:!1},e.exports=b},function(e,t){"use strict";var a=function(e,t){var a=0;return e&&e.length&&e[0][t]&&e.forEach(function(e){return a+=+e[t]}),a.toFixed(2)};e.exports=a},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}},doc:{height:"100%"},total:{width:"auto"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(66),d=a(307),u=a(296),c=a(320),p=a(322),h=a(238),f=a(300),m=a(267),b=a(352),y=a(245),g=a(154),v=a(353),k=a(354),w=a(327),C=a(150),D=a(1),E=a(160).ARV.LIB_OBJS,_=a(249),O=a(250),P=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={loadedData:!1,module:e.module?e.module:D.module,lapsId:null,docId:e.docId?e.docId:+e.match.params.docId},a.createGridRow=a.createGridRow.bind(a),a.recalcDocSumma=a.recalcDocSumma.bind(a),a.renderer=a.renderer.bind(a),a.gridValidateFields=a.gridValidateFields.bind(a),a.btnEditAsutusClick=a.btnEditAsutusClick.bind(a),a.pages=[{pageName:"Arve",docTypeId:"ARV"}],a}return o(t,e),i(t,[{key:"render",value:function(){return s.createElement(d,{docId:this.state.docId,store:this.props.store,ref:"document",history:this.props.history,docTypeId:"ARV",module:this.state.module,initData:this.props.initData?this.props.initData:{},reload:!0,libs:E,pages:this.pages,renderer:this.renderer,createGridRow:this.createGridRow,gridValidator:this.gridValidateFields,recalcDoc:this.recalcDocSumma,focusElement:"input-number"})}},{key:"renderer",value:function(e){if(!e||!e.docData||!e.docData.kpv)return s.createElement("div",{style:v.doc},s.createElement(w,{label:"Laadimine..."}));var t=e.state.edited,a=e.docData.gridData,n=e.docData.gridConfig,r=e.docData.queryArvTasu,o=e.docData.gridTasudConfig;e.docData.relations&&b(e);var i=_.ASUTUSED?_.ASUTUSED:[],l=D.userData?D.userData.roles:[];return s.createElement("div",null,s.createElement("div",{style:v.doc},s.createElement("div",{style:v.docRow},s.createElement("div",{style:v.docColumn},s.createElement(u,{ref:"input-number",title:"Number",name:"number",value:e.docData.number||"",readOnly:!t,onChange:e.handleInputChange}),s.createElement(c,{title:"Kuupäev",name:"kpv",value:e.docData.kpv,ref:"input-kpv",readOnly:!t,onChange:e.handleInputChange}),s.createElement(c,{title:"Tähtaeg",name:"tahtaeg",value:e.docData.tahtaeg,ref:"input-tahtaeg",readOnly:!t,onChange:e.handleInputChange}))),s.createElement("div",{style:v.docRow},s.createElement("div",{style:v.docColumn},s.createElement(h,{title:"Maksja",libs:"asutused",name:"asutusid",data:e.libs.asutused,value:e.docData.asutusid||0,defaultValue:e.docData.asutus,onChange:e.handleInputChange,collId:"id",readOnly:!t})),O(l,i,"edit")?s.createElement("div",{style:v.docColumn},s.createElement(g,{ref:"btnEdit",value:"Muuda",onClick:this.btnEditAsutusClick,show:!t,style:v.btnEdit,disabled:!1})):null),s.createElement("div",{style:v.docRow},s.createElement("div",{style:v.docColumn},s.createElement(u,{title:"Lisa",name:"lisa",value:e.docData.lisa||"",ref:"input-lisa",readOnly:!t,onChange:e.handleInputChange}),s.createElement(u,{title:"Viitenumber",name:"viitenr",value:e.docData.viitenr||"",ref:"input-viitenumber",readOnly:!0,disable:!0,onChange:e.handleInputChange})),s.createElement("div",{style:v.docColumn},s.createElement(h,{title:"Arveldus arve",name:"aa_id",libs:"aa",value:e.docData.aa,data:e.libs.aa,defaultValue:e.docData.aa+""||"",onChange:e.handleInputChange,collId:"kood",ref:"select-aa",readOnly:!t}))),s.createElement("div",{style:v.docRow},s.createElement(f,{title:"Märkused",name:"muud",ref:"textarea-muud",onChange:e.handleInputChange,value:e.docData.muud||"",readOnly:!t})),s.createElement("div",{style:v.docRow},s.createElement(m,{source:"details",gridData:a,gridColumns:n,showToolBar:t,handleGridRow:this.handleGridRow,handleGridBtnClick:e.handleGridBtnClick,readOnly:!t,style:v.grid.headerTable,ref:"data-grid"})),s.createElement("div",{style:v.docRow},s.createElement(p,{title:"Summa",name:"summa",ref:"input-summa",value:+e.docData.summa||0,disabled:!0,style:v.summa}),s.createElement(p,{title:"Käibemaks",name:"kbm",ref:"input-kbm",disabled:!0,style:v.summa,value:+e.docData.kbm||0}),s.createElement(p,{title:"Jääk",type:"currency",name:"jaak",ref:"input-jaak",disabled:!0,style:v.summa,value:+e.docData.jaak||0})),e.state.gridRowEdit?this.createGridRow(e):null,s.createElement("br",null),s.createElement("div",{style:v.docRow},s.createElement("label",{ref:"label"},C("Tasud"))),s.createElement("div",{style:v.docRow},s.createElement(m,{source:"tasud",gridData:r,gridColumns:o,showToolBar:!1,handleGridBtnClick:e.handleGridBtnClick,docTypeId:"smk",readOnly:!0,style:v.grid.headerTable,ref:"tasud-data-grid"}))))}},{key:"createGridRow",value:function(e){var t=e.gridRowData?e.gridRowData:{},a="",n=a.length>0||!e.state.checked,r=["btnOk","btnCancel"];return n&&r.splice(0,1),t?s.createElement("div",{className:".modalPage"},s.createElement(y,{modalObjects:r,ref:"modalpage-grid-row",show:!0,modalPageBtnClick:e.modalPageClick,styles:v.gridRow,modalPageName:"Rea lisamine / parandamine"},s.createElement("div",{ref:"grid-row-container"},e.state.gridWarning.length?s.createElement("div",{style:v.docRow},s.createElement("span",null,e.state.gridWarning)):null,s.createElement("div",{style:v.docRow},s.createElement(h,{title:"Teenus:",name:"nomid",libs:"nomenclature",data:e.libs.nomenclature,readOnly:!1,value:t.nomid,collId:"id",ref:"nomid",placeholder:"Teenuse kood",onChange:e.handleGridRowChange})),s.createElement("div",{style:v.docRow},s.createElement(p,{title:"Kogus:",name:"kogus",value:+(t.kogus?t.kogus:0),readOnly:!1,disabled:!1,bindData:!1,ref:"kogus",pattern:"[0-9]{10}",onChange:e.handleGridRowInput})),s.createElement("div",{style:v.docRow},s.createElement(p,{title:"Hind:",name:"hind",value:+(t.hind?t.hind:0),readOnly:!1,disabled:!1,bindData:!1,ref:"hind",pattern:"[0-9]{10}",onChange:e.handleGridRowInput})),s.createElement("div",{style:v.docRow},s.createElement(p,{title:"Kbm-ta:",name:"kbmta",value:+(t.summa?t.summa-t.kbm:0),disabled:!0,bindData:!1,ref:"kbmta",pattern:"[0-9]{10}",onChange:e.handleGridRowChange})),s.createElement("div",{style:v.docRow},s.createElement(p,{title:"Kbm:",name:"kbm",value:+(t.kbm?t.kbm:0),disabled:!0,bindData:!1,ref:"kbm",pattern:"[0-9]{10}",onBlur:e.handleGridRowInput})),s.createElement("div",{style:v.docRow},s.createElement(p,{title:"Summa:",name:"Summa",value:+(t.summa?t.summa:0),disabled:!0,bindData:!1,ref:"summa",pattern:"[0-9]{10}",onChange:e.handleGridRowInput})),s.createElement("div",{style:v.docRow},s.createElement(h,{title:"Tunnus:",name:"tunnus",data:e.libs.tunnus,value:t.tunnus||"",ref:"tunnus",collId:"kood",onChange:e.handleGridRowChange})),s.createElement("div",{style:v.docRow},s.createElement(h,{title:"Projekt:",name:"proj",data:e.libs.project,value:t.proj||"",ref:"project",collId:"kood",onChange:e.handleGridRowChange})),s.createElement("div",{style:v.docRow},s.createElement(f,{title:"Märkused:",name:"muud",ref:"gridrow-textarea-muud",onChange:e.handleGridRowChange,value:t.muud||""}))),s.createElement("div",null,s.createElement("span",null,a)))):s.createElement("div",null)}},{key:"gridValidateFields",value:function(){var e="",t=this.refs.document;return t&&t.gridRowData&&(t.gridRowData&&!t.gridRowData.nomid&&(e+=" Код операции"),t.gridRowData.kogus||(e+=" Количество"),t.gridRowData.summa||(e+=" Сумма"),this.recalcRowSumm(),this.recalcDocSumma("summa")),e}},{key:"recalcRowSumm",value:function(){var e=this.refs.document;if(Object.keys(e.gridRowData).length){var t=0,a=0;if(e.gridRowData.nomid){var n=e.libs.nomenclature.find(function(t){return+t.id===+e.gridRowData.nomid});n&&(e.gridRowData.hind=n.hind&&!e.gridRowData.hind?n.hind:e.gridRowData.hind,t=n.vat?+n.vat/100:0,a=n.hind,e.gridRowData.kood=n.kood?n.kood:null,e.gridRowData.nimetus=n.nimetus?n.nimetus:null,e.gridRowData.uhik=n.uhik?n.uhik:null,e.gridRowData.konto=n.konto?n.konto:null,e.gridRowData.tunnus=n.tunnus?n.tunnus:null,e.gridRowData.proj=n.proj?n.proj:null,e.gridRowData.kood1=n.tegev?n.tegev:null,e.gridRowData.kood2=n.allikas?n.allikas:null,e.gridRowData.kood5=n.artikkel?n.artikkel:null)}e.gridRowData.kogus=+e.gridRowData.kogus,e.gridRowData.soodustus=e.gridRowData.soodustus?+e.gridRowData.soodustus:0,e.gridRowData.hind=a&&e.gridRowData.soodustus?+a-e.gridRowData.soodustus:+e.gridRowData.hind,e.gridRowData.kbmta=k(+e.gridRowData.kogus*+e.gridRowData.hind),e.gridRowData.kbm=k(+e.gridRowData.kbmta*t),e.gridRowData.summa=k(+e.gridRowData.kbmta+ +e.gridRowData.kbm)}}},{key:"recalcDocSumma",value:function(){var e=this.refs.document;e.docData.summa=0,e.docData.kbm=0,e.docData.gridData.forEach(function(t){e.docData.summa=+e.docData.summa+ +t.summa,e.docData.kbm=+e.docData.kbm+ +t.kbm}),e.docData.summa=k(e.docData.summa),e.docData.kbm=k(e.docData.kbm)}},{key:"btnEditAsutusClick",value:function(){var e=this.refs.document.docData.asutusid;this.props.history.push("/"+D.module+"/asutused/"+e)}}]),t}(s.PureComponent);P.propTypes={docId:l.number,initData:l.object,userData:l.object},P.defaultProps={params:{docId:0},initData:{},userData:{}},e.exports=P},function(e,t){"use strict";var a=function e(t){var a=t.pages,e=t.docData.relations?t.docData.relations:[];!t.pages||!t.pages.length||t.docData.id&&0!==t.docData.id||(a=[t.pages[0]],e=[]),e.length>0&&e.forEach(function(e){if(e.id){var t=a.find(function(t){return!!t.docId&&(t.docId==e.id&&t.docTypeId==e.doc_type)});t||a.push({docTypeId:e.doc_type,docId:e.id,pageName:e.name+(e.number?" nr:"+e.number:" id:"+e.id)})}}),t.pages=a};e.exports=a},function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},summa:{width:"auto"},grid:{mainTable:{width:"100%"},headerTable:{width:"100%"},gridContainer:{width:"100%"}},gridRow:{backgroundColor:"white",position:"relative",margin:"10% 30% 10% 30%",width:"750px",opacity:"1",alignSelf:"center"},btnEdit:{width:"min-content"}}},function(e,t){"use strict";var a=function(e){return+(Math.round(e+"e+2")+"e-2")};e.exports=a},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=a(356),u=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(s,{initData:this.props.initData,ref:"register",module:this.props.module,history:this.props.history?this.props.history:null,docTypeId:"JOURNAL",style:d,render:this.renderer})}},{key:"renderer",value:function(){return null}}]),t}(l.PureComponent);e.exports=u},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(66),d=a(307),u=a(296),c=a(320),p=a(322),h=a(238),f=a(300),m=a(267),b=a(352),y=a(245),g=a(358),v=["asutused","kontod","tunnus","project"],k=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:e.docId?e.docId:+e.match.params.docId,loadedData:!1},a.pages=[{pageName:"Journal"}],a.createGridRow=a.createGridRow.bind(a),a.recalcDocSumma=a.recalcDocSumma.bind(a),a.renderer=a.renderer.bind(a),a.gridValidateFields=a.gridValidateFields.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){var e=this.props.initData?this.props.initData:{};return s.createElement(d,{docId:this.state.docId,ref:"document",history:this.props.history?this.props.history:null,docTypeId:"JOURNAL",initData:e,libs:v,pages:this.pages,renderer:this.renderer,createGridRow:this.createGridRow,gridValidator:this.gridValidateFields,recalcDoc:this.recalcDocSumma,focusElement:"input-number"})}},{key:"renderer",value:function(e){var t=(e.docData&&e.docData.bpm?e.docData.bpm:[],e.state.edited),a=e.docData.gridData,n=e.docData.gridConfig;this.gridValidateFields();e.docData.relations&&b(e);var r=this.refs.document;r?r.libs:{};return s.createElement("div",null,s.createElement("div",{style:g.doc},s.createElement("div",{style:g.docColumn},s.createElement(u,{title:"Number",name:"number",value:e.docData.number+""||"",ref:"input-number",readOnly:!0}),s.createElement(c,{title:"Kuupäev ",name:"kpv",value:e.docData.kpv,ref:"input-kpv",onChange:e.handleInputChange,readOnly:!t}),s.createElement(h,{title:"Partner",name:"asutusid",libs:"asutused",data:e.libs.asutused,value:e.docData.asutusid||"",collId:"id",defaultValue:e.docData.asutus,onChange:e.handleInputChange,ref:"select-asutusid",readOnly:!t}),s.createElement(u,{title:"Dokument ",name:"dok",value:e.docData.dok||"",ref:"input-dok",onChange:e.handleInputChange,readOnly:!t})),s.createElement("div",{style:g.docRow},s.createElement(f,{title:"Selgitus",name:"selg",ref:"textarea-selg",value:e.docData.selg||"",onChange:e.handleInputChange,readOnly:!t})),s.createElement("div",{style:g.docRow},s.createElement("div",{style:g.gridContainer},s.createElement(m,{source:"details",gridData:a,gridColumns:n,handleGridRow:this.handleGridRow,readOnly:!t,showToolBar:t,handleGridBtnClick:e.handleGridBtnClick,style:g.grid.headerTable,ref:"data-grid"}))),s.createElement("div",{style:g.docRow},s.createElement(p,{title:"Summa: ",name:"summa",ref:"input-summa",value:+(e.docData.summa||0),disabled:!0,width:g.summa.width,pattern:"^[0-9]+(\\.[0-9]{1,4})?$"})),s.createElement("div",{style:g.docRow},s.createElement(f,{title:"Märkused",name:"muud",ref:"textarea-muud",value:e.docData.muud||"",onChange:e.handleInputChange,readOnly:!t})),e.state.gridRowEdit?this.createGridRow(e):null))}},{key:"createGridRow",value:function(e){var t=e.gridRowData,a="",n=a.length>0||!e.state.checked,r=["btnOk","btnCancel"];return n&&r.splice(0,1),t?s.createElement("div",{className:".modalPage"},s.createElement(y,{modalObjects:r,ref:"modalpage-grid-row",show:!0,modalPageBtnClick:e.modalPageClick,modalPageName:"Rea lisamine / parandamine"},s.createElement("div",{ref:"grid-row-container"},e.state.gridWarning.length?s.createElement("div",{style:g.docRow},s.createElement("span",null,e.state.gridWarning)):null,s.createElement("div",{style:g.docRow},s.createElement(h,{title:"Deebet",name:"deebet",libs:"kontod",data:e.libs.kontod,readOnly:!1,value:t.deebet,ref:"deebet",collId:"kood",onChange:e.handleGridRowChange})),s.createElement("div",{style:g.docRow},s.createElement(h,{title:"Kreedit",name:"kreedit",data:e.libs.kontod,readOnly:!1,value:t.kreedit,ref:"kreedit",collId:"kood",onChange:e.handleGridRowChange})),s.createElement("div",{style:g.docRow},s.createElement(p,{title:"Summa: ",name:"summa",value:+t.summa||0,disabled:!1,bindData:!1,ref:"summa",width:"auto",onChange:e.handleGridRowInput})),s.createElement("div",{style:g.docRow},s.createElement(h,{title:"Tunnus",name:"tunnus",libs:"tunnus",data:e.libs.tunnus,readOnly:!1,value:t.tunnus,ref:"tunnus",placeholder:"Tunnus",collId:"kood",onChange:e.handleGridRowChange})),s.createElement("div",{style:g.docRow},s.createElement(h,{title:"Project",name:"proj",libs:"project",data:e.libs.project,readOnly:!1,value:t.proj,ref:"proj",placeholder:"Projekt",collId:"kood",onChange:e.handleGridRowChange}))),s.createElement("div",null,s.createElement("span",null,a)))):s.createElement("div",null)}},{key:"gridValidateFields",value:function(){var e="",t=this.refs.document;return t&&t.gridRowData&&(t.gridRowData&&!t.gridRowData.deebet&&(e+=" Дебет"),t.gridRowData.kreedit||(e+=" Кредит"),t.gridRowData.summa||(e+=" Сумма"),this.recalcDocSumma("summa")),e}},{key:"recalcDocSumma",value:function(e){var t=this.refs.document.docData;t[e]=0,t.gridData&&t.gridData.length&&t.gridData.forEach(function(a){t[e]+=+a[e]})}}]),t}(s.PureComponent);k.propTypes={docId:l.number,initData:l.object,userData:l.object},k.defaultProps={initData:{},userData:{}},e.exports=k},function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},gridRow:{border:"1px solid black",backgroundColor:"white",position:"relative",margin:"10% 30% 10% 30%",width:"auto",opacity:"1",top:"100px"},grid:{mainTable:{width:"100%"},headerTable:{width:"100%"},gridContainer:{width:"100%"}},summa:{width:"auto"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=a(322),u=a(296),c=a(145),p=a(348),h=a(360),f="PANK_VV",m=a(249),b=(a(250),a(1)),y=(m[f]?m[f]:[],b.userData?b.userData.roles:[],a(349)),g=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.Doc=null,a.renderer=a.renderer.bind(a),a.render=a.render.bind(a),a.onClickHandler=a.onClickHandler.bind(a),a.state={summa:0,read:0,filtri_read:0},a.makse={},a}return o(t,e),i(t,[{key:"render",value:function(){var e=void 0;this.Doc&&(e=this.Doc&&this.Doc.state?this.Doc.state:null);var t={btnAdd:{show:!1},btnEdit:{show:!0},btnDelete:{show:!0},btnPrint:{show:!1},btnStart:{show:!1}};return l.createElement("div",null,l.createElement(s,{history:this.props.history?this.props.history:null,module:this.props.module,ref:"register",docTypeId:f,style:h,toolbarParams:t,render:this.renderer}),l.createElement(u,{title:"Filtri all / read kokku:",name:"read_kokku",style:h.total,ref:"input-read",value:this.state.filtri_read+"/"+this.state.read,disabled:!0}),l.createElement(d,{title:"Summa kokku:",name:"summa_kokku",style:h.total,ref:"input-summa",value:(+this.state.summa).toFixed(2)||0,disabled:!0}))}},{key:"renderer",value:function(e){if(!e)return null;this.Doc=e;var t=!1,a=this.Doc.state&&this.Doc.state.value?this.Doc.state.value:0;a&&(this.makse=this.Doc.gridData.find(function(e){return e.id==a}),this.makse&&!this.makse.doc_id&&(t=!0));var n=e.gridData?y(e.gridData,"summa"):0;return this.setState({summa:n,read:e.gridData&&e.gridData.length&&e.gridData[0].rows_total?e.gridData[0].rows_total:this.state.read,filtri_read:e.gridData&&e.gridData.length&&e.gridData[0].filter_total?e.gridData[0].filter_total:0}),l.createElement(c,null,t?l.createElement(p,{showDate:!1,value:"Loe makse",onClick:this.onClickHandler,ref:"btn-loe_makse",key:"key-loe_makse"}):null)}},{key:"onClickHandler",value:function(e,t){var a=this.refs.register,n="Edukalt";a.fetchData("calc/loe_makse",{makse_id:this.makse.id}).then(function(e){e.result?e.result&&e.result.error_code?a.setState({warning:"Tekkis viga: "+e.result.error_message,warningType:"error"}):e.result.data[0].error_message?a.setState({warning:"Tekkis viga: "+e.result.data[0].error_message,warningType:"error"}):a.setState({warning:""+n,warningType:"ok"},function(){return a.fetchData("selectDocs")}):e.error_message?a.setState({warning:"Tekkis viga: "+e.error_message,warningType:"error"}):a.setState({warning:"Kokku arvestatud : "+e.result+", "+n,warningType:"notValid"})})}}]),t}(l.PureComponent);e.exports=g},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}},total:{width:"auto"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(113),d=a(307),u=a(296),c=a(320),p=a(322),h=a(300),f=a(154),m=a(327),b=a(362),y=a(1),g=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:e.docId?e.docId:+e.match.params.docId,loadedData:!1},a.renderer=a.renderer.bind(a),a.btnEditMKClick=a.btnEditMKClick.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(d,{docId:this.state.docId,ref:"document",docTypeId:"PANK_VV",module:this.props.module,initData:this.props.initData,userData:this.props.userData,renderer:this.renderer,focusElement:"input-kood",history:this.props.history,reload:!0})}},{key:"renderer",value:function(e){return e.docData?l.createElement("div",{style:b.doc},l.createElement("div",{style:b.docRow},l.createElement("div",{style:b.docColumn},l.createElement(u,{title:"Pank ID ",name:"pank_id",ref:"input-pank_id",readOnly:!e.state.edited,value:e.docData.pank_id||"",onChange:e.handleInputChange}))),l.createElement("div",{style:b.docRow},l.createElement("div",{style:b.docColumn},l.createElement(c,{title:"Maksepäev:",name:"valid",value:e.docData.kpv,ref:"input-kpv",readOnly:!e.state.edited,onChange:e.handleInputChange}))),l.createElement("div",{style:b.docRow},l.createElement("div",{style:b.docColumn},l.createElement(p,{title:"Summa: ",name:"summa",value:+e.docData.summa,ref:"summa",readOnly:!e.state.edited,onChange:e.handleInputChange}))),l.createElement("div",{style:b.docRow},l.createElement("div",{style:b.docColumn},l.createElement(u,{title:"Viitenumber:",name:"viitenumber",ref:"input-viitenumber",readOnly:!e.state.edited,value:e.docData.viitenumber||"",onChange:e.handleInputChange})),l.createElement("div",{style:b.docColumn},l.createElement("label",null,"("+(e.docData.nimi?e.docData.nimi||","||e.docData.asutus:"Puudub")+")"))),l.createElement("div",{style:b.docRow},l.createElement("div",{style:b.docColumn},l.createElement(u,{title:"Reg.(Isiku) kood:",name:"isikukood",ref:"input-isikukood",readOnly:!e.state.edited,value:e.docData.isikukood||"",onChange:e.handleInputChange}))),l.createElement("div",{style:b.docRow},l.createElement("div",{style:b.docColumn},l.createElement(u,{title:"Maksja:",name:"maksja",ref:"input-maksja",readOnly:!e.state.edited,value:e.docData.maksja||"",onChange:e.handleInputChange}))),l.createElement("div",{style:b.docRow},l.createElement("div",{style:b.docColumn},l.createElement(u,{title:"Maksja AA:",name:"iban",ref:"input-iban",readOnly:!e.state.edited,value:e.docData.iban||"",onChange:e.handleInputChange
}))),l.createElement("div",{style:b.docRow},l.createElement("div",{style:b.docColumn},l.createElement(u,{title:"Pank:",name:"pank",ref:"input-pank",readOnly:!e.state.edited,value:e.docData.pank||"",onChange:e.handleInputChange}))),l.createElement("div",{style:b.docRow},l.createElement(h,{title:"Selgitus",name:"selg",ref:"textarea-selg",onChange:e.handleInputChange,value:e.docData.selg||"",readOnly:!e.state.edited})),e.docData.doc_id?l.createElement("div",{style:b.docRow},l.createElement("div",{style:b.docColumn},l.createElement(u,{title:"Koostatud MK:",name:"number",ref:"input-number",readOnly:!0,value:e.docData.number||"",onChange:e.handleInputChange})),l.createElement("div",{style:b.docColumn},l.createElement(f,{ref:"btnEdit",value:"Muuda",onClick:this.btnEditMKClick,show:!e.state.edited,style:b.btnEdit,disabled:!1}))):null):l.createElement("div",{style:b.doc},l.createElement(m,{label:"Laadimine..."}))}},{key:"btnEditMKClick",value:function(){var e=this.refs.document.docData.doc_id;this.props.history.push("/"+(this.props.module?this.props.module:y.module)+"/smk/"+e)}}]),t}(l.PureComponent);g.propTypes={docId:s.number,initData:s.object},g.defaultProps={initData:{}},e.exports=g},function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},btnEdit:{width:"min-content"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=a(364),u="SMK",c=a(365),p=a(367),h=a(145),f=a(322),m=(a(349),a(250)),b=a(1),y=a(249),g=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.renderer=a.renderer.bind(a),a.handleClick=a.handleClick.bind(a),a.state={summa:0,read:0,isReport:!1,txtReport:[]},a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(s,{initData:this.props.initData,history:this.props.history?this.props.history:null,module:this.props.module,store:this.props.store,ref:"register",docTypeId:u,style:d,render:this.renderer}),l.createElement(f,{title:"Read kokku:",name:"read_kokku",style:d.total,ref:"input-read",value:+this.state.read||0,disabled:!0}),l.createElement(f,{title:"Summa kokku:",name:"summa_kokku",style:d.total,ref:"input-summa",value:(+this.state.summa).toFixed(2)||0,disabled:!0}))}},{key:"renderer",value:function(e){if(!e)return null;var t=y[u]?y[u]:[],a=b.userData?b.userData.roles:[],n=e.gridData&&e.gridData.length?e.gridData[0].deebet_total:0;return this.setState({summa:n,read:e.gridData.length}),l.createElement(h,null,m(a,t,"import")?l.createElement(c,{ref:"btnUpload",docTypeId:u,onClick:this.handleClick,show:!0,mimeTypes:".csv,.xml"}):null,l.createElement(p,{history:e.props.history?e.props.history:null,ref:"btnLogs",value:"Panga VV logid"}))}},{key:"handleClick",value:function(){var e=this.refs.register;setTimeout(function(){e.fetchData("selectDocs")},1e3)}}]),t}(l.PureComponent);e.exports=g},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}},doc:{height:"100%"},total:{width:"auto"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(31),d=a(1),u=a(66),c=a(366),p=a(149),h=a(245),f=a(298),m=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={show:!1,selectedFile:null,response:null,loading:!1,isReport:!1,txtReport:[]},a.modalPageClick=a.modalPageClick.bind(a),a.onChangeHandler=a.onChangeHandler.bind(a),a.handleClick=a.handleClick.bind(a),a.fecthData=a.fecthData.bind(a),a.modalReportePageBtnClick=a.modalReportePageBtnClick.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){var e=this;return this.state.show?this.modalPage():u.createElement("div",null,u.createElement(p,{ref:"btnUpload",value:this.props.value?this.props.value:"Import",show:!0,onClick:function(t){return e.handleClick(t)}},u.createElement("img",{ref:"image",src:c.button.icon})),u.createElement(f,{show:this.state.isReport,report:this.state.txtReport,modalPageBtnClick:this.modalReportePageBtnClick}))}},{key:"handleClick",value:function(){this.setState({show:!0})}},{key:"modalPage",value:function(){var e=this.state.loading?["btnCancel"]:["btnOk","btnCancel"],t=this.props.mimeTypes?this.props.mimeTypes:".csv, .xml";return u.createElement("div",null,u.createElement(h,{modalObjects:e,ref:"modalpage-upload",show:!0,modalPageBtnClick:this.modalPageClick,modalPageName:"Import"},u.createElement("div",{style:c.docRow},u.createElement("input",{type:"file",name:"file",onChange:this.onChangeHandler,accept:t})),u.createElement("div",null,this.state.response?u.createElement("span",null,this.state.response):null)))}},{key:"modalPageClick",value:function(e){var t=this;"Ok"===e?(this.state.selectedFile?(this.setState({loading:!0}),this.fecthData().then(function(e){var a="";e.data&&e.data.error_message?(a=e.data.error_message,t.props.onClick&&t.props.onClick(e.data),t.setState({show:!1,loading:!1,isReport:!0,txtReport:e.data&&e.data.data?e.data.data:[]})):(a=e.data,t.setState({response:a},function(){setTimeout(function(){t.setState({response:null,show:!1,loading:!1})},1e3)}))})):this.setState({response:null,show:!1,loading:!1}),this.props.onClick&&this.props.onClick()):this.setState({response:null,show:!1,loading:!1})}},{key:"onChangeHandler",value:function(e){this.setState({selectedFile:e.target.files[0]})}},{key:"fecthData",value:function(){var e=({parameter:this.props.docTypeId,uuid:d.userData.uuid},new FormData);return e.append("file",this.state.selectedFile),e.append("uuid",d.userData.uuid),e.append("docTypeId",this.props.docTypeId),s.fetchDataPost("/newApi/upload/",e)}},{key:"modalReportePageBtnClick",value:function(e){var t=!e||"Ok"!=e;this.setState({isReport:t})}}]),t}(u.PureComponent);m.propTypes={show:l.bool},m.defaultProps={show:!1},e.exports=m},function(e,t){"use strict";e.exports={wrapper:{margin:"5px",display:"flex",width:"95%"},button:{icon:"/images/icons/import.png",width:"10%"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(113),d=a(1),u=a(148),c=a(149),p="info",h=a(150),f=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value||"Logid"},a}return o(t,e),i(t,[{key:"handleClick",value:function(e){if(this.props.onClick)return this.props.onClick("logid");var t=d.menu.find(function(e){return e.kood.toUpperCase()==="pank_vv".toUpperCase()});t||(d.pageName=t?t.name:"Panga väljavõtte"),this.props.history.push({pathname:"/"+d.module+"/pank_vv",state:{module:d.module}})}},{key:"render",value:function(){var e=this;return l.createElement(c,{value:h(this.state.value),ref:"btnLogid",style:u.button,show:!this.props.show||this.props.show,onClick:function(t){return e.handleClick(t)}},l.createElement("img",{ref:"image",src:u.icons[p]}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.value?{value:e.value}:null}}]),t}(l.PureComponent);f.propTypes={value:s.string},f.defaultProps={disabled:!1,show:!0,value:"Logid"},e.exports=f},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(113),d=a(307),u=a(296),c=a(320),p=a(322),h=a(238),f=(a(369),a(300)),m=a(267),b=(a(371),a(352)),y=a(245),g=a(327),v=a(373),k=a(374),w=a(150),C="SMK",D=a(1),E=[{id:"nomenclature",filter:"where dok in ('MK','SMK')"},{id:"asutused",filter:""},{id:"aa",filter:""}],_=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:e.docId?e.docId:+e.match.params.docId,loadedData:!1,lapsId:null,module:a.props.module,isAskToCreateFromArv:!0,getSMK:!1,arvId:0,kas_aa_kasitsi:!1},a.createGridRow=a.createGridRow.bind(a),a.recalcDocSumma=a.recalcDocSumma.bind(a),a.recalcRowSumm=a.recalcRowSumm.bind(a),a.renderer=a.renderer.bind(a),a.gridValidateFields=a.gridValidateFields.bind(a),a.modalPageBtnClick=a.modalPageBtnClick.bind(a),a.pages=[{pageName:"Sissemakse korraldus",docTypeId:"SMK"}],a}return o(t,e),i(t,[{key:"componentDidMount",value:function(){if(this.props.history&&this.props.history.location.state){var e=this.props.history.location.state.lapsId,t=this.props.history.location.state.module?this.props.history.location.state.module:"lapsed";this.setState({lapsId:e,module:t})}}},{key:"render",value:function(){return l.createElement(d,{docId:this.state.docId,ref:"document",store:this.props.store,docTypeId:C,history:this.props.history,module:this.state.module,initData:this.props.initData,reload:!0,libs:E,pages:this.pages,renderer:this.renderer,createGridRow:this.createGridRow,gridValidator:this.gridValidateFields,recalcDoc:this.recalcDocSumma,focusElement:"input-number"})}},{key:"renderer",value:function(e){if(!e||!e.docData||!e.docData.kpv)return l.createElement("div",{style:k.doc},l.createElement(g,{label:w("Laadimine...")}));var t=e.state.edited;e.docData.relations&&b(e);!e.docData.id||0===e.docData.id;e.docData.id&&0!==e.docData.id||!e.docData.arvid||!this.state.isAskToCreateFromArv||this.setState({getSMK:!0,isAskToCreateFromArv:!1,arvId:e.docData.arvid});var a=e.docData.queryArvTasu,n=e.docData.gridArvConfig;return e.docData.jaak&&(D.mkJaak=e.docData.jaak),l.createElement("div",null,l.createElement("div",{className:"div-doc"},l.createElement("div",{style:k.docRow},l.createElement("div",{style:k.docColumn},l.createElement(u,{title:"Number",name:"number",value:(e.docData.number||"")+"",ref:"input-number",onChange:e.handleInputChange,readOnly:!t}),l.createElement(c,{title:"Kuupäev",name:"kpv",value:e.docData.kpv||"01-07-2020",ref:"input-kpv",onChange:e.handleInputChange,readOnly:!t}),l.createElement(h,{title:"Arveldus arve",name:"aa_id",libs:"aa",value:+e.docData.aa_id||0,data:e.libs.aa,defaultValue:e.docData.pank+""||"",onChange:e.handleInputChange,ref:"select-aaId",readOnly:!t}),l.createElement(c,{title:"Maksepäev",name:"maksepaev",value:e.docData.maksepaev||"",ref:"input-maksepaev",onChange:e.handleInputChange,readOnly:!t}),l.createElement(u,{title:"Viitenumber",name:"viitenr",value:e.docData.viitenr||"",ref:"input-viitenr",onChange:e.handleInputChange,readOnly:!t}))),l.createElement("div",{style:k.docRow},l.createElement(f,{title:"Selgitus",name:"selg",ref:"textarea-selg",value:e.docData.selg||"",onChange:e.handleInputChange,readOnly:!t})),l.createElement("div",{style:k.docRow},l.createElement(m,{source:"details",gridData:e.docData.gridData,gridColumns:e.docData.gridConfig,showToolBar:t,handleGridRow:e.handleGridRow,handleGridBtnClick:e.handleGridBtnClick,readOnly:!t,style:k.grid.headerTable,ref:"data-grid"})),l.createElement("div",{style:k.docRow},l.createElement("div",{style:k.docColumn},l.createElement(u,{title:"Kokku:",name:"summa",ref:"input-summa",value:e.docData.summa+""||"0.00",width:"auto",disabled:!0})),l.createElement("div",{style:k.docColumn},l.createElement(u,{title:"Määramata summa:",name:"mk_jaak",ref:"input-jaak",value:e.docData.jaak+""||"0.00",width:"auto",disabled:!0})))),l.createElement("div",{style:k.docRow},l.createElement(f,{title:"Märkused",name:"muud",ref:"textarea-muud",value:e.docData.muud||"",onChange:e.handleInputChange,readOnly:!t})),e.state.gridRowEdit?this.createGridRow(e):null,l.createElement(y,{ref:"modalpageCreateOrder",modalPageBtnClick:this.modalPageBtnClick,modalPageName:"Kas koosta SMK",show:this.state.getSMK},"Kas koosta SMK?"),l.createElement("br",null),l.createElement("div",{style:k.docRow},l.createElement("label",{ref:"label"},w("Arved"))),l.createElement("div",{style:k.docRow},l.createElement(m,{source:"arved",gridData:a,gridColumns:n,showToolBar:!1,handleGridBtnClick:e.handleGridBtnClick,docTypeId:"arv",readOnly:!0,style:k.grid.headerTable,ref:"arved-data-grid"})))}},{key:"modalPageBtnClick",value:function(e){var t=this;if(this.setState({getSMK:!1}),"Ok"===e){var a=this.refs.document,n="/calc/koostaMK",r={docTypeId:C,module:this.props.module?this.props.module:D.module,userId:D.userData.userId,uuid:D.userData.uuid,docs:[+this.state.arvId],seisuga:a.docData&&a.docData.kpv?a.docData.kpv:null,context:D[n]?D[n]:null,taskName:"koostaMK"};a.fetchData("Post",n,{data:r}).then(function(e){if(e&&e.error_message)a.setState({warning:"viga: "+e.error_message,warningType:"error"});else if(e&&e.result){var n=e.data&&e.data&&e.data.result&&e.data.result.doc_id?e.data.result.doc_id:0;a.setState({warning:"Edukalt, suunatan ...",warningType:"ok"}),n&&setTimeout(function(){var e="/"+(t.props.module?t.props.module:D.module)+"/smk/"+n;t.props.history.replace("/reload"),setTimeout(function(){t.props.history.replace(e)})},2e3)}else a.setState({warning:"Tekkis viga",warningType:"error"})}).catch(function(e){a.setState({warning:"Viga "+e,warningType:"error"})})}}},{key:"createGridRow",value:function(e){var t=e.gridRowData?e.gridRowData:{},a="",n=a.length>0||!e.state.checked,r=["btnOk","btnCancel"];return n&&r.splice(0,1),t?l.createElement("div",{className:".modalPage"},l.createElement(y,{modalObjects:r,ref:"modalpage-grid-row",show:!0,modalPageBtnClick:e.modalPageClick,modalPageName:"Rea lisamine / parandamine"},l.createElement("div",{ref:"grid-row-container"},l.createElement("div",{style:k.docRow},l.createElement(h,{title:"Operatsioon",name:"nomid",data:e.libs.nomenclature,value:t.nomid||0,collId:"id",defaultValue:t.kood||"",ref:"nomid",onChange:e.handleGridRowChange})),l.createElement("div",{style:k.docRow},l.createElement(h,{title:"Partner",name:"asutusid",data:e.libs.asutused,value:t.asutusid,defaultValue:t.asutus||"",collId:"id",ref:"asutusid",onChange:e.handleGridRowChange}),l.createElement(v,{self:e,lib:"asutused"})),l.createElement("div",{style:k.docRow},l.createElement(u,{title:"Arveldus arve: ",name:"aa",value:t.aa||"",bindData:!1,ref:"aa",onChange:e.handleGridRowInput})),l.createElement("div",{style:k.docRow},l.createElement(p,{title:"Summa: ",name:"summa",value:+t.summa,bindData:!1,ref:"summa",onChange:e.handleGridRowInput})),l.createElement("div",{style:k.docRow},l.createElement(h,{title:"Korr. konto",name:"konto",libs:"kontod",data:e.libs.kontod,value:t.konto,ref:"konto",collId:"kood",onChange:e.handleGridRowChange})),l.createElement("div",{style:k.docRow},l.createElement(h,{title:"Tunnus:",name:"tunnus",libs:"tunnus",data:e.libs.tunnus,value:t.tunnus,ref:"tunnus",collId:"kood",onChange:e.handleGridRowChange})),l.createElement("div",{style:k.docRow},l.createElement(h,{title:"Project:",name:"proj",libs:"project",data:e.libs.project,value:t.proj,ref:"project",collId:"kood",onChange:e.handleGridRowChange}))),l.createElement("div",null,l.createElement("span",null,a)))):l.createElement("div",null)}},{key:"recalcDocSumma",value:function(){var e=this.refs.document;e.docData.summa=0,e.docData.gridData.forEach(function(t){e.docData.summa+=+t.summa})}},{key:"recalcRowSumm",value:function(){var e=this.refs.document;if(Object.keys(e.gridRowData).length){if(e.gridRowData.nomid){var t=e.libs.nomenclature.find(function(t){return t.id===+e.gridRowData.nomid});t&&(e.gridRowData.kood=t.kood,e.gridRowData.nimetus=t.nimetus)}if(e.gridRowData.asutusid){var a=e.libs.asutused.find(function(t){return t.id===+e.gridRowData.asutusid});a&&(e.gridRowData.asutus=a.nimetus,e.gridRowData.aa||(e.gridRowData.aa=a.pank))}}}},{key:"gridValidateFields",value:function(){var e="",t=this.refs.document;return t&&t.gridRowData&&(t.gridRowData&&!t.gridRowData.nomid&&(e+=" Код операции"),t.gridRowData.summa||(e+=" Сумма"),t.gridRowData.asutusid||(e+=" Платильщик"),this.recalcRowSumm(),this.recalcDocSumma("summa")),e}}]),t}(l.PureComponent);_.propTypes={docId:s.number,initData:s.object,userData:s.object},_.defaultProps={initData:{},userData:{}},e.exports=_},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(1),s=a(113),d=a(31),u=a(160).LIBS.POST_LOAD_LIBS_URL,c=a(66),p=a(370),h=a(267),f=a(149),m=a(296),b=a(245),y=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value,fieldValue:e.defaultValue,readOnly:e.readOnly,disabled:e.disabled,edited:e.edited,gridData:[],gridConfig:e.config,gridActiveRow:0,show:a.props.show,limit:"10"},a.handleInputChange=a.handleInputChange.bind(a),a.handleGridClick=a.handleGridClick.bind(a),a.modalPageClick=a.modalPageClick.bind(a),a.loadLibs=a.loadLibs.bind(a),a.handleClick=a.handleClick.bind(a),a.handleGridBtnClick=a.handleGridBtnClick.bind(a),a}return o(t,e),i(t,[{key:"componentDidMount",value:function(){this.state.value&&this.loadLibs("")}},{key:"componentDidUpdate",value:function(e,t){this.state.value&&t.value!==this.state.value&&!this.state.fieldValue&&this.loadLibs()}},{key:"render",value:function(){var e=!this.state.readOnly,t=Object.assign({},p.button,{display:e?"inline":"none"}),a=this.props.readOnly;return this.state.show&&(a=!1),c.createElement("div",{style:p.wrapper},c.createElement(m,{ref:"inputName",title:this.props.title,name:this.props.name,value:this.state.fieldValue||"",readOnly:a,onChange:this.handleInputChange}),c.createElement(f,{value:"v",ref:"btnShow",style:t,onClick:this.handleClick}),this.state.show?this.modalPage():null)}},{key:"handleClick",value:function(){this.setState({show:!0})}},{key:"modalPage",value:function(){var e=["btnOk","btnCancel"],t=p.limitInput,a={btnAdd:{show:!0,disabled:!1},btnEdit:{show:!0,disabled:!1},btnDelete:{show:!1,disabled:!1},btnPrint:{show:!1,disabled:!1}};return c.createElement(b,{modalObjects:e,ref:"modalpage-grid",show:!0,modalPageBtnClick:this.modalPageClick,modalPageName:"Vali rea"},c.createElement("div",{ref:"grid-row-container"},c.createElement(m,{ref:"input-filter",title:"Otsingu parametrid:",name:"gridFilter",value:this.state.fieldValue||"",readOnly:this.props.readOnly||!this.state.show,onChange:this.handleInputChange}),c.createElement(h,{gridData:this.state.gridData,gridColumns:this.state.gridConfig,onClick:this.handleGridClick,handleGridBtnClick:this.handleGridBtnClick,showToolBar:!0,toolbarParams:a,ref:"data-grid"}),c.createElement(m,{ref:"input-limit",title:"Limiit:",width:t,name:"limit",value:this.state.limit||"10",readOnly:!1,onChange:this.handleInputChange})))}},{key:"handleInputChange",value:function(e,t){var a=this;this.props.readOnly||("gridFilter"===e?this.setState({value:0,fieldValue:t,show:!0},function(){t.length&&setTimeout(function(){a.loadLibs(t)},100)}):this.setState({value:0,fieldValue:t,show:!1},function(){t.length&&setTimeout(function(){a.loadLibs(t)},500)}),"limit"===e&&this.setState({limit:t}))}},{key:"modalPageClick",value:function(e){if("Ok"===e){var t=this.props.boundToGrid?this.props.boundToGrid:"name",a=!!this.props.boundToData&&this.props.boundToData,n=this.props.name,r=this.state.gridActiveRow,o=this.state.gridData[r].id,i=this.state.gridData[r][t];this.setState({value:o,fieldValue:i,show:!1}),this.props.onChange&&(this.props.onChange(n,o),a&&this.props.onChange(a,i),this.props.collName&&this.props.onChange(this.props.collName,i))}else this.setState({value:this.props.value,fieldValue:this.props.defaultValue,show:!1})}},{key:"handleGridClick",value:function(e,t,a){this.setState({gridActiveRow:a,value:t})}},{key:"loadLibs",value:function(e,t){var a=this,n=this.props.libName,r="",o=this.state.limit?this.state.limit:100,i=this.state.value&&!e;this.props.sqlFields&&this.props.sqlFields.length&&e&&e.length>0&&this.props.sqlFields.forEach(function(t){var a=r.length>0?" or ":"";r=r.concat(" "+a+" encode("+t+"::bytea, 'escape') ilike '%"+e.trim()+"%'")}),i&&(r="id = "+this.state.value),r="where "+r;var s=Object.assign({uuid:l.userData.uuid},r.length?{sql:r,limit:o,kpv:t?t:(new Date).toISOString().slice(0,10)}:{});r.length>0&&d.fetchDataPost(u+"/"+n,s).then(function(e){var t=[],n=[];e&&"data"in e&&(t=e.data.result.result.data,n=e.data.result.result.gridConfig),t&&t.length>0&&(i&&!a.state.show?a.setState({fieldValue:t[0][a.props.boundToGrid],value:t[0].id,gridData:t,gridConfig:n}):a.setState({gridData:t,gridConfig:n,show:!0}))}).catch(function(e){})}},{key:"handleGridBtnClick",value:function(e,t,a,n){this.setState({show:!1});var r=this.state.gridData[t].id;switch(e){case"Muuda":this.props.history.push("/"+l.module+"/"+this.props.libName+"/"+r);break;case"edit":this.props.history.push("/"+l.module+"/"+this.props.libName+"/"+r);break;case"add":this.props.history.push("/"+l.module+"/"+this.props.libName+"/0")}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.value?{value:e.value}:null}}]),t}(c.PureComponent);y.propTypes={readOnly:s.bool,disabled:s.bool,collId:s.string,title:s.string,placeholder:s.string,name:s.string.isRequired,show:s.bool},y.defaultProps={readOnly:!1,disabled:!1,btnDelete:!1,value:0,collId:"id",title:"",show:!1},e.exports=y},function(e,t){"use strict";e.exports={wrapper:{margin:"5px",marginLeft:"20px",display:"flex",width:"95%"},input:{width:"75%",marginLeft:"15px",borderRadius:"3px",height:"30px"},hide:{display:"none"},select:{width:"60%",marginLeft:"15px"},readOnly:{backgroundColor:"#F3EFEF"},label:{width:"40%",margin:"5px"},button:{width:"10%"},limitInput:{width:"10%"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(113),s=a(238),d=a(154),u=a(152),c=(a(300),a(1)),p=a(372),h=a(66),f=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value?e.value:null,description:"",libData:e.data},a.handleSelectOnChange=a.handleSelectOnChange.bind(a),a.handleClick=a.handleClick.bind(a),a}return o(t,e),i(t,[{key:"handleSelectOnChange",value:function(e,t){var a=this;this.setState({value:t},function(){a.props.onChange(a.props.name,t)})}},{key:"handleClick",value:function(e){"edit"===e||"Muuda"===e?this.props.history.push({pathname:"/"+c.module+"/dokprops/"+this.state.value,state:{dokPropId:c.docTypeId,type:"text"}}):"add"!==e&&"Lisa"!==e||this.props.history.push({pathname:"/"+c.module+"/dokprops/0",state:{dokPropId:c.docTypeId,type:"text"}})}},{key:"getDescriptionBySelectValue",value:function(e){var t=this,a=e.filter(function(e){if(e.id===t.props.value)return e}),n="",r=a.length?a[0].details:"";for(var o in r)r.hasOwnProperty(o)&&(n=n+o+":"+r[o]);return n}},{key:"render",value:function(){return h.createElement("div",{style:p.wrapper},h.createElement(s,{className:this.props.className,ref:"select",title:this.props.title,name:this.props.name,data:this.props.data,collId:"id",value:this.state.value||"",defaultValue:this.props.defaultValue||"",placeholder:this.props.placeholder||this.props.title,readOnly:this.props.readOnly,onChange:this.handleSelectOnChange}),this.state.value?h.createElement(d,{value:"Muuda",show:this.props.readOnly,onClick:this.handleClick}):h.createElement(u,{value:"Lisa",show:this.props.readOnly,onClick:this.handleClick}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.value?{value:e.value}:null}}]),t}(h.PureComponent);f.propTypes={value:l.number,name:l.string.isRequired,title:l.string,libs:l.string,defaultValue:l.string,readOnly:l.bool,placeholder:l.string},f.defaultProps={readOnly:!1,title:""},e.exports=f},function(e,t){"use strict";e.exports={wrapper:{margin:"5px",display:"flex",width:"95%"},input:{width:"70%",marginLeft:"5px",borderRadius:"5px"},a:{width:"70%",marginLeft:"5px",borderRadius:"5px"},hide:{display:"none"},select:{width:"70%",heigth:"100%",marginLeft:"5px",borderRadius:"5px",":focus":{backgroundColor:"lightpink"}},readOnly:{backgroundColor:"#F3EFEF"},label:{width:"30%",margin:"5px"},button:{width:"5%"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(a(113),a(66)),s=a(148),d=a(149),u="refresh",c=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"handleClick",value:function(e){if(this.props.onClick)return this.props.onClick();if(this.props.self&&this.props.self.loadLibs&&this.props.lib){var t=this.props.self;t.loadLibs(this.props.lib)}}},{key:"render",value:function(){var e=this;return l.createElement(d,{ref:"btnUuenda",show:this.props.show,disabled:this.props.disabled,onClick:function(t){return e.handleClick(t)}},l.createElement("img",{ref:"image",src:s.icons[u]}))}}]),t}(l.PureComponent);c.defaultProps={disabled:!1,show:!0},e.exports=c},function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},gridRow:{border:"1px solid black",backgroundColor:"white",position:"relative",margin:"10% 30% 10% 30%",width:"auto",opacity:"1",top:"100px"},docToolbarWarning:{float:"left",backgroundColor:"red",margin:"10px"},grid:{mainTable:{width:"100%"},headerTable:{width:"100%"},gridContainer:{width:"100%"}}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=a(322),u=a(349),c=a(376),p=a(1),h=a(145),f=a(347),m="VMK",b=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClickHandler=a.onClickHandler.bind(a),a.renderer=a.renderer.bind(a),a.state={summa:0,read:0},a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(s,{initData:this.props.initData,ref:"register",store:this.props.store,history:this.props.history?this.props.history:null,docTypeId:m,module:this.props.module,style:c,render:this.renderer}),l.createElement(d,{title:"Read kokku:",name:"read_kokku",style:c.total,ref:"input-read",value:+this.state.read||0,disabled:!0}),l.createElement(d,{title:"Summa kokku:",name:"summa_kokku",style:c.total,ref:"input-summa",value:(+this.state.summa).toFixed(2)||0,disabled:!0}))}},{key:"renderer",value:function(e){
var t=e.gridData?u(e.gridData,"kreedit"):0;return t&&this.setState({summa:t,read:e.gridData.length}),l.createElement(h,null,l.createElement(f,{onClick:this.onClickHandler,phrase:"Kas laadida XML fail?",ref:"btnSepaXML",value:"Saama XML (SEPA) kõik valitud maksed"}))}},{key:"onClickHandler",value:function(e){var t=new Set,a=this.refs.register;if(a.gridData.forEach(function(e){t.add(e.id)}),t=Array.from(t),t.length){a.setState({warning:"Leidsin "+t.length+" maksed",warningType:"ok"});var n="/sepa/"+p.userData.uuid+"/"+t;window.open(""+n)}else a.setState({warning:"Mitte ühtegi makse leidnum",warningType:"notValid"})}}]),t}(l.PureComponent);e.exports=b},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}},doc:{height:"100%"},total:{width:"auto"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(113),d=a(307),u=a(296),c=a(320),p=a(322),h=a(238),f=(a(369),a(154),a(300)),m=a(267),b=(a(371),a(352)),y=a(245),g=a(327),v=a(373),k=a(378),w=[{id:"aa",filter:""},{id:"asutused",filter:"where id in (select asutusid from lapsed.vanemad)"},{id:"nomenclature",filter:"where dok in ('VMK','MK')"}],C=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:e.docId?e.docId:+e.match.params.docId,loadedData:!1,module:a.props.module},a.createGridRow=a.createGridRow.bind(a),a.recalcDocSumma=a.recalcDocSumma.bind(a),a.recalcRowSumm=a.recalcRowSumm.bind(a),a.renderer=a.renderer.bind(a),a.gridValidateFields=a.gridValidateFields.bind(a),a.pages=[{pageName:"Väljamakse korraldus",docTypeId:"SMK"}],a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(d,{docId:this.state.docId,ref:"document",store:this.props.store,docTypeId:"VMK",module:"lapsed",reload:!0,history:this.props.history,initData:this.props.initData,libs:w,pages:this.pages,renderer:this.renderer,createGridRow:this.createGridRow,gridValidator:this.gridValidateFields,recalcDoc:this.recalcDocSumma,focusElement:"input-number"})}},{key:"renderer",value:function(e){var t=e.state.edited;return e&&e.docData&&e.docData.kpv?(e.docData.relations&&b(e),l.createElement("div",null,l.createElement("div",{className:"div-doc"},l.createElement("div",{style:k.docRow},l.createElement("div",{style:k.docColumn},l.createElement(u,{title:"Number",name:"number",value:e.docData.number+""||"",ref:"input-number",onChange:e.handleInputChange,readOnly:!t}),l.createElement(c,{title:"Kuupäev ",name:"kpv",value:e.docData.kpv,ref:"input-kpv",onChange:e.handleInputChange,readOnly:!t}),l.createElement(h,{title:"Arveldus arve",name:"aa_id",libs:"aa",value:+e.docData.aa_id||0,data:e.libs.aa,defaultValue:e.docData.pank+""||e.libs.aa,collId:"id",onChange:e.handleInputChange,ref:"select-aaId",readOnly:!t}),l.createElement(u,{title:"Arve nr.",name:"arvnr",value:e.docData.arvnr||"",ref:"input-arvnr",onChange:e.handleInputChange,readOnly:!0}),l.createElement(c,{title:"Maksepäev ",name:"maksepaev",value:e.docData.maksepaev,ref:"input-maksepaev",onChange:e.handleInputChange,readOnly:!t}),l.createElement(u,{title:"Viitenumber ",name:"viitenr",value:e.docData.viitenr||"",ref:"input-viitenr",onChange:e.handleInputChange,readOnly:!t})))),l.createElement("div",{style:k.docRow},l.createElement(f,{title:"Selgitus",name:"selg",ref:"textarea-selg",value:e.docData.selg||"",onChange:e.handleInputChange,readOnly:!t})),l.createElement("div",{style:k.docRow},l.createElement(m,{source:"details",gridData:e.docData.gridData,gridColumns:e.docData.gridConfig,showToolBar:t,handleGridRow:e.handleGridRow,handleGridBtnClick:e.handleGridBtnClick,readOnly:!t,style:k.grid.headerTable,ref:"data-grid"})),l.createElement("div",{style:k.docRow},l.createElement(u,{title:"Kokku: ",name:"summa",ref:"input-summa",value:e.docData.summa+""||"0.00",width:"auto",disabled:!0})),l.createElement("div",{style:k.docRow},l.createElement(f,{title:"Märkused",name:"muud",ref:"textarea-muud",value:e.docData.muud||"",onChange:e.handleInputChange,readOnly:!t})),e.state.gridRowEdit?this.createGridRow(e):null)):l.createElement("div",{style:k.doc},l.createElement(g,{label:"Laadimine..."}))}},{key:"createGridRow",value:function(e){var t=e.gridRowData?e.gridRowData:{},a="",n=a.length>0||!e.state.checked,r=["btnOk","btnCancel"];if(n&&r.splice(0,1),!t)return l.createElement("div",null);var o=e.libs.nomenclature.filter(function(e){if("MK"===e.dok||"VMK"===e.dok)return e});return l.createElement("div",{className:".modalPage"},l.createElement(y,{modalObjects:r,ref:"modalpage-grid-row",show:!0,modalPageBtnClick:e.modalPageClick,modalPageName:"Rea lisamine / parandamine"},l.createElement("div",{ref:"grid-row-container"},l.createElement("div",{style:k.docRow},l.createElement(h,{title:"Operatsioon",name:"nomid",data:o,value:t.nomid||0,collId:"id",defaultValue:t.kood||"",ref:"nomid",onChange:e.handleGridRowChange})),l.createElement("div",{style:k.docRow},l.createElement(h,{title:"Partner",name:"asutusid",data:e.libs.asutused,value:t.asutusid,defaultValue:t.asutus||"",collId:"id",ref:"asutusid",onChange:e.handleGridRowChange}),l.createElement(v,{self:e,lib:"asutused"})),l.createElement("div",{style:k.docRow},l.createElement(u,{title:"Arveldus arve: ",name:"aa",value:t.aa||"",bindData:!1,ref:"aa",onChange:e.handleGridRowInput})),l.createElement("div",{style:k.docRow},l.createElement(p,{title:"Summa: ",name:"summa",value:+t.summa,bindData:!1,ref:"summa",onChange:e.handleGridRowInput})),l.createElement("div",{style:k.docRow},l.createElement(h,{title:"Korr. konto",name:"konto",libs:"kontod",data:e.libs.kontod,value:t.konto,ref:"konto",collId:"kood",onChange:e.handleGridRowChange})),l.createElement("div",{style:k.docRow},l.createElement(h,{title:"Tunnus:",name:"tunnus",libs:"tunnus",data:e.libs.tunnus,value:t.tunnus,ref:"tunnus",collId:"kood",onChange:e.handleGridRowChange})),l.createElement("div",{style:k.docRow},l.createElement(h,{title:"Project:",name:"proj",libs:"project",data:e.libs.project,value:t.proj,ref:"project",collId:"kood",onChange:e.handleGridRowChange}))),l.createElement("div",null,l.createElement("span",null,a))))}},{key:"recalcDocSumma",value:function(){var e=this.refs.document;e.docData.summa=0,e.docData.gridData.forEach(function(t){e.docData.summa+=+t.summa})}},{key:"recalcRowSumm",value:function(){var e=this.refs.document;if(Object.keys(e.gridRowData).length){if(e.gridRowData.nomid){var t=e.libs.nomenclature.find(function(t){return t.id===+e.gridRowData.nomid});t&&(e.gridRowData.kood=t.kood,e.gridRowData.nimetus=t.nimetus)}if(e.gridRowData.asutusid){var a=e.libs.asutused.find(function(t){return t.id===+e.gridRowData.asutusid});a&&(e.gridRowData.asutus=a.nimetus,!e.gridRowData.aa&&a.pank&&(e.gridRowData.aa=a.pank))}}}},{key:"gridValidateFields",value:function(){var e="",t=this.refs.document;return t&&t.gridRowData&&(t.gridRowData&&!t.gridRowData.nomid&&(e+=" Код операции"),t.gridRowData.summa||(e+=" Сумма"),t.gridRowData.asutusid||(e+=" Платильщик"),this.recalcRowSumm(),this.recalcDocSumma("summa")),e}}]),t}(l.Component);C.propTypes={docId:s.number,initData:s.object,userData:s.object},C.defaultProps={initData:{},userData:{}},e.exports=C},function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},gridRow:{border:"1px solid black",backgroundColor:"white",position:"relative",margin:"10% 30% 10% 30%",width:"auto",opacity:"1",top:"100px"},docToolbarWarning:{float:"left",backgroundColor:"red",margin:"10px"},grid:{mainTable:{width:"100%"},headerTable:{width:"100%"},gridContainer:{width:"100%"}},btnEdit:{width:"min-content"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=(a(348),a(145),a(322)),u=a(296),c=(a(327),a(380)),p="KAIVE_ARUANNE",h={add:!1,edit:!1,delete:!1,start:!1,print:!0,email:!0},f=a(1),m=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClickHandler=a.onClickHandler.bind(a),a.renderer=a.renderer.bind(a),a.state={alg_saldo:0,arvestatud:0,laekumised:0,tagastused:0,jaak:0,read:0,filtri_read:0},a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(s,{initData:this.props.initData,history:this.props.history?this.props.history:null,module:this.props.module,store:this.props.store,ref:"register",toolbarProps:h,docTypeId:p,style:c,render:this.renderer}),l.createElement(u,{title:"Filtri all / read kokku:",name:"read_kokku",style:c.total,ref:"input-read",value:this.state.filtri_read+"/"+this.state.read||0,disabled:!0}),l.createElement(d,{title:"Alg.saldo kokku:",name:"alg_saldo_kokku",style:c.total,ref:"input-read",value:+this.state.alg_saldo||0,disabled:!0}),l.createElement(d,{title:"Arvestatud kokku:",name:"arvestatud_kokku",style:c.total,ref:"input-arvestatud",value:+this.state.arvestatud||0,disabled:!0}),l.createElement(d,{title:"Laekumised kokku:",name:"laekumised_kokku",style:c.total,ref:"input-laekumised",value:+this.state.laekumised||0,disabled:!0}),l.createElement(d,{title:"Tagastused kokku:",name:"tagastused_kokku",style:c.total,ref:"input-tagastused",value:+this.state.tagastused||0,disabled:!0}),l.createElement(d,{title:"Jääk kokku:",name:"jaak_kokku",style:c.total,ref:"input-jaak",value:+this.state.jaak||0,disabled:!0}))}},{key:"renderer",value:function(e){if(!e||!e.gridData||!e.gridData.length)return null;var t=e.gridData?e.gridData[0].alg_saldo_total:0,a=e.gridData?e.gridData[0].arvestatud_total:0,n=e.gridData?e.gridData[0].laekumised_total:0,r=e.gridData?e.gridData[0].tagastused_total:0,o=e.gridData?e.gridData[0].jaak_total:0,i=e.gridData&&e.gridData.length&&e.gridData[0].rows_total?e.gridData[0].rows_total:0,l=e.gridData&&e.gridData.length&&e.gridData[0].filter_total?e.gridData[0].filter_total:0;this.setState({alg_saldo:t,arvestatud:a,laekumised:n,tagastused:r,jaak:o,read:i,filtri_read:l})}},{key:"onClickHandler",value:function(){var e=this.refs.register;if(e.gridData&&e.gridData.length){var t=e.state.sqlWhere,a="/reports/kaive_aruanne/"+f.userData.uuid,n=encodeURIComponent(""+t),r=encodeURIComponent(""+JSON.stringify(e.filterData)),o=t?a+"/"+r+"/"+n:a+"/"+r;window.open(o)}else e.setState({warning:"Mitte ühtegi kirjed leidnud",warningType:"notValid"})}}]),t}(l.PureComponent);e.exports=m},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}},doc:{height:"100%"},total:{width:"100px",margin:"0px 0px 0px 5px"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=(a(348),a(145),a(322)),u=a(296),c=(a(327),a(382)),p="KAIBEANDMIK",h={add:!1,edit:!1,delete:!1,start:!1,print:!0,email:!0},f=a(1),m=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClickHandler=a.onClickHandler.bind(a),a.renderer=a.renderer.bind(a),a.state={alg_saldo:0,deebet:0,kreedit:0,lopp_saldo:0,read:0,filtri_read:0},a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(s,{initData:this.props.initData,history:this.props.history?this.props.history:null,module:this.props.module,store:this.props.store,ref:"register",toolbarProps:h,docTypeId:p,style:c,render:this.renderer}),l.createElement(u,{title:"Filtri all / read kokku:",name:"read_kokku",style:c.total,ref:"input-read",value:this.state.filtri_read+"/"+this.state.read||0,disabled:!0}),l.createElement(d,{title:"Alg.saldo kokku:",name:"alg_saldo_kokku",style:c.total,ref:"input-read",value:+this.state.alg_saldo||0,disabled:!0}),l.createElement(d,{title:"Deebet kokku:",name:"deebet_kokku",style:c.total,ref:"input-deebet",value:+this.state.deebet||0,disabled:!0}),l.createElement(d,{title:"Kreedit kokku:",name:"kreedit_kokku",style:c.total,ref:"input-kreedit",value:+this.state.kreedit||0,disabled:!0}),l.createElement(d,{title:"Lõpp saldo kokku:",name:"lopp_saldo_kokku",style:c.total,ref:"input-lopp_saldo",value:+this.state.lopp_saldo||0,disabled:!0}))}},{key:"renderer",value:function(e){if(!e||!e.gridData||!e.gridData.length)return null;var t=e.gridData?e.gridData[0].alg_saldo_total:0,a=e.gridData?e.gridData[0].deebet_total:0,n=e.gridData?e.gridData[0].kreedit_total:0,r=e.gridData?e.gridData[0].lopp_saldo_total:0,o=e.gridData&&e.gridData.length&&e.gridData[0].rows_total?e.gridData[0].rows_total:0,i=e.gridData&&e.gridData.length&&e.gridData[0].filter_total?e.gridData[0].filter_total:0;this.setState({alg_saldo:t,deebet:a,kreedit:n,lopp_saldo:r,read:o,filtri_read:i})}},{key:"onClickHandler",value:function(){var e=this.refs.register;if(e.gridData&&e.gridData.length){var t=e.state.sqlWhere,a="/reports/kaibeandmik/"+f.userData.uuid,n=encodeURIComponent(""+t),r=encodeURIComponent(""+JSON.stringify(e.filterData)),o=t?a+"/"+r+"/"+n:a+"/"+r;window.open(o)}else e.setState({warning:"Mitte ühtegi kirjed leidnud",warningType:"notValid"})}}]),t}(l.PureComponent);e.exports=m},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}},doc:{height:"100%"},total:{width:"100px",margin:"0px 0px 0px 5px"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=(a(348),a(145),a(322)),u=a(296),c=(a(327),a(384)),p="KONTOANDMIK",h={add:!1,edit:!1,delete:!1,start:!1,print:!0,email:!0},f=a(1),m=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClickHandler=a.onClickHandler.bind(a),a.renderer=a.renderer.bind(a),a.state={alg_saldo:0,deebet:0,kreedit:0,lopp_saldo:0,read:0,filtri_read:0},a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(s,{initData:this.props.initData,history:this.props.history?this.props.history:null,module:this.props.module,ref:"register",toolbarProps:h,docTypeId:p,style:c,render:this.renderer}),l.createElement(u,{title:"Filtri all / read kokku:",name:"read_kokku",style:c.total,ref:"input-read",value:this.state.filtri_read+"/"+this.state.read||0,disabled:!0}),l.createElement(d,{title:"Alg.saldo kokku:",name:"alg_saldo_kokku",style:c.total,ref:"input-read",value:+this.state.alg_saldo||0,disabled:!0}),l.createElement(d,{title:"Deebet kokku:",name:"deebet_kokku",style:c.total,ref:"input-deebet",value:+this.state.deebet||0,disabled:!0}),l.createElement(d,{title:"Kreedit kokku:",name:"kreedit_kokku",style:c.total,ref:"input-kreedit",value:+this.state.kreedit||0,disabled:!0}),l.createElement(d,{title:"Lõpp saldo kokku:",name:"lopp_saldo_kokku",style:c.total,ref:"input-lopp_saldo",value:+this.state.lopp_saldo||0,disabled:!0}))}},{key:"renderer",value:function(e){if(!e||!e.gridData||!e.gridData.length)return null;var t=e.gridData?e.gridData[0].alg_saldo_total:0,a=e.gridData?e.gridData[0].deebet_total:0,n=e.gridData?e.gridData[0].kreedit_total:0,r=e.gridData?e.gridData[0].lopp_saldo_total:0,o=e.gridData&&e.gridData.length&&e.gridData[0].rows_total?e.gridData[0].rows_total:0,i=e.gridData&&e.gridData.length&&e.gridData[0].filter_total?e.gridData[0].filter_total:0;this.setState({alg_saldo:t,deebet:a,kreedit:n,lopp_saldo:r,read:o,filtri_read:i})}},{key:"onClickHandler",value:function(){var e=this.refs.register;if(e.gridData&&e.gridData.length){var t=e.state.sqlWhere,a="/reports/kontoandmik/"+f.userData.uuid,n=encodeURIComponent(""+t),r=encodeURIComponent(""+JSON.stringify(e.filterData)),o=t?a+"/"+r+"/"+n:a+"/"+r;window.open(o)}else e.setState({warning:"Mitte ühtegi kirjed leidnud",warningType:"notValid"})}}]),t}(l.PureComponent);e.exports=m},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}},doc:{height:"100%"},total:{width:"100px",margin:"0px 0px 0px 5px"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=a(348),u=a(145),c=a(322),p=a(347),h=a(349),f=a(1),m=a(386),b=[{name:"Saama CSV fail",method:null,docTypeId:null},{name:"Saama XML e-arved (SEB) kõik valitud arved",method:null,docTypeId:null},{name:"Saama XML e-arved (SWED) kõik valitud arved",method:null,docTypeId:null}],y="ARVED_KOODI_JARGI",g={add:!1,edit:!1,delete:!1,start:!1,print:!0,email:!0},v=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={summa:0,read:0},a.renderer=a.renderer.bind(a),a.onClickHandler=a.onClickHandler.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(s,{initData:this.props.initData,history:this.props.history?this.props.history:null,module:this.props.module,ref:"register",toolbarProps:g,docTypeId:y,style:m,render:this.renderer}),l.createElement(c,{title:"Read kokku:",name:"read_kokku",style:m.total,ref:"input-read",value:+this.state.read||0,disabled:!0}),l.createElement(c,{title:"Summa kokku:",name:"summa_kokku",style:m.total,ref:"input-summa",value:(+this.state.summa).toFixed(2)||0,disabled:!0}))}},{key:"renderer",value:function(e){var t=e.gridData?h(e.gridData,"summa"):0,a=e.gridData?e.gridData.length:0;return t&&this.setState({summa:t,read:a}),l.createElement(u,null,l.createElement(p,{onClick:this.onClickHandler,docTypeId:y,phrase:"Kas laadida XML (SWED) fail?",ref:"btnEarveSwedXML",value:b[2].name}),l.createElement(p,{onClick:this.onClickHandler,docTypeId:y,phrase:"Kas laadida XML (SEB) fail?",ref:"btnEarveSebXML",value:b[1].name}),l.createElement(d,{value:"Saama CSV fail",onClick:this.onClickHandler,showDate:!1,ref:"btn-getcsv"}))}},{key:"onClickHandler",value:function(e){var t=this.refs.register,a=new Set;switch(e){case b[0].name:if(t.gridData&&t.gridData.length){var n=t.state.sqlWhere,r="/reports/arved_koodi_jargi/"+f.userData.uuid,o=encodeURIComponent(""+n);window.open(r+"/"+o)}else t.setState({warning:"Mitte ühtegi kirjed leidnud",warningType:"notValid"});case b[1].name:if(t.gridData.forEach(function(e){e.pank&&"SEB"==e.pank&&e.select&&+e.summa>0&&a.add(e.id)}),a=Array.from(a),a.length){t.setState({warning:"Leidsin "+a.length+" arveid",warningType:"ok"});var i="/e-arved/seb/"+f.userData.uuid+"/"+a;window.open(""+i)}else t.setState({warning:"Mitte ühtegi arve leidnum",warningType:"notValid"});break;case b[2].name:if(t.gridData.forEach(function(e){e.select&&e.pank&&"SWED"==e.pank&&+e.summa>0&&a.add(e.id)}),a=Array.from(a),a.length){t.setState({warning:"Leidsin "+a.length+" arveid",warningType:"ok"});var l="/e-arved/swed/"+f.userData.uuid+"/"+a;window.open(""+l)}else t.setState({warning:"Mitte ühtegi arve leidnum",warningType:"notValid"})}}}]),t}(l.PureComponent);e.exports=v},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"95%"}},total:{width:"auto"},doc:{height:"100%"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(263),d=a(322),u=a(296),c=a(349),p=a(388),h="ARVE_KOKKUVOTE",f={add:!1,edit:!1,delete:!1,start:!1,print:!0,email:!0},m=(a(1),function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.renderer=a.renderer.bind(a),a.state={arvestatud:0,laekumised:0,read:0,filtri_read:0},a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement("div",null,l.createElement(s,{initData:this.props.initData,history:this.props.history?this.props.history:null,module:this.props.module,ref:"register",toolbarProps:f,docTypeId:h,style:p,render:this.renderer}),l.createElement(u,{title:"Filtri all / read kokku:",name:"read_kokku",style:p.total,ref:"input-read",value:this.state.filtri_read+"/"+this.state.read||0,disabled:!0}),l.createElement(d,{title:"Arvestatud kokku:",name:"arvestatud_kokku",style:p.total,ref:"input-arvestatud",value:+this.state.arvestatud||0,disabled:!0}),l.createElement(d,{title:"Laekumised kokku:",name:"laekumised_kokku",style:p.total,ref:"input-laekumised",value:+this.state.laekumised||0,disabled:!0}))}},{key:"renderer",value:function(e){if(!e||!e.gridData||!e.gridData.length)return null;var t=e.gridData?c(e.gridData,"summa"):0,a=e.gridData?c(e.gridData,"tasutud"):0,n=e.gridData&&e.gridData.length&&e.gridData[0].rows_total?e.gridData[0].rows_total:0,r=e.gridData&&e.gridData.length&&e.gridData[0].filter_total?e.gridData[0].filter_total:0;this.setState({arvestatud:t,laekumised:a,read:n,filtri_read:r})}}]),t}(l.PureComponent));e.exports=m},function(e,t){"use strict";e.exports={grid:{mainTable:{width:"100%",td:{border:"1px solid lightGrey",display:"table-cell",paddingLeft:"5px"}},headerTable:{width:"100%"},gridContainer:{width:"100%"}},doc:{height:"100%"},total:{width:"100px",margin:"0px 0px 0px 5px"}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(66),s=a(113),d=a(307),u=a(296),c=a(267),p=a(300),h=a(245),f=a(238),m=a(271),b=a(390),y=[],g=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={docId:1,loadedData:!1},a.renderer=a.renderer.bind(a),a.createGridRow=a.createGridRow.bind(a),a}return o(t,e),i(t,[{key:"render",value:function(){return l.createElement(d,{docId:this.state.docId,ref:"document",docTypeId:"REKV",store:this.props.store,history:this.props.history,module:this.props.module,libs:y,initData:this.props.initData,renderer:this.renderer,createGridRow:this.createGridRow})}},{key:"renderer",value:function(e){if(!e.docData)return null;var t=e.docData.gridData,a=e.docData.gridConfig;return l.createElement("div",{style:b.doc},l.createElement("div",{style:b.docRow},l.createElement(u,{title:"Regkood: ",name:"regkood",ref:"input-regkood",readOnly:!e.state.edited,value:e.docData.regkood||"",onChange:e.handleInputChange})),l.createElement("div",{style:b.docRow},l.createElement(u,{title:"KBM kood: ",name:"kbmkood",ref:"input-kbmkood",readOnly:!e.state.edited,value:e.docData.kbmkood||"",onChange:e.handleInputChange})),l.createElement("div",{style:b.docRow},l.createElement(u,{title:"Nimetus: ",name:"nimetus",ref:"input-nimetus",readOnly:!e.state.edited,value:e.docData.nimetus||"",onChange:e.handleInputChange})),l.createElement("div",{style:b.docRow},l.createElement(u,{title:"Täis. nimetus: ",name:"muud",ref:"input-muud",readOnly:!e.state.edited,value:e.docData.muud||"",onChange:e.handleInputChange})),l.createElement("div",{style:b.docRow},l.createElement(p,{title:"Aadress: ",name:"aadress",ref:"textarea-aadress",onChange:e.handleInputChange,value:e.docData.aadress||"",readOnly:!e.state.edited})),l.createElement("div",{style:b.docRow},l.createElement(u,{title:"Juhataja: ",name:"juht",ref:"input-juht",readOnly:!e.state.edited,value:e.docData.juht||"",onChange:e.handleInputChange})),l.createElement("div",{style:b.docRow},l.createElement(u,{title:"Raamatupidaja: ",name:"raama",ref:"input-raama",readOnly:!e.state.edited,value:e.docData.raama||"",onChange:e.handleInputChange})),l.createElement("div",{style:b.docRow},l.createElement(u,{title:"Email: ",name:"email",ref:"input-email",readOnly:!e.state.edited,value:e.docData.email||"",onChange:e.handleInputChange})),l.createElement("div",{style:b.docRow},l.createElement(c,{source:"details",gridData:t,gridColumns:a,showToolBar:e.state.edited,handleGridRow:this.handleGridRow,handleGridBtnClick:e.handleGridBtnClick,readOnly:!e.state.edited,style:b.grid.headerTable,ref:"data-grid"})),e.state.gridRowEdit?this.createGridRow(e):null)}},{key:"createGridRow",value:function(e){var t=e.gridRowData?e.gridRowData:{},a="",n=a.length>0||!e.state.checked,r=["btnOk","btnCancel"];return n&&r.splice(0,1),t?l.createElement("div",{className:".modalPage"},l.createElement(h,{modalObjects:r,ref:"modalpage-grid-row",show:!0,modalPageBtnClick:e.modalPageClick,modalPageName:"Rea lisamine / parandamine"},l.createElement("div",{ref:"grid-row-container"},e.state.gridWarning.length?l.createElement("div",{style:b.docRow},l.createElement("span",null,e.state.gridWarning)):null,l.createElement("div",{style:b.docRow},l.createElement(u,{title:"Number: ",name:"arve",value:t.arve||"",readOnly:!1,disabled:!1,bindData:!1,ref:"number",onChange:e.handleGridRowInput})),l.createElement("div",{style:b.docRow},l.createElement(u,{title:"Nimetus: ",name:"nimetus",value:t.nimetus||"",readOnly:!1,disabled:!1,bindData:!1,ref:"number",onChange:e.handleGridRowInput})),l.createElement("div",{style:b.docRow},l.createElement(f,{title:"Tüüp: ",name:"kassapank",data:[{id:0,nimetus:"Kassa"},{id:1,nimetus:"Pank"},{id:2,nimetus:"TP"}],value:t.kassapank||"",ref:"kassapank",collId:"id",onChange:e.handleGridRowChange})),l.createElement("div",{style:b.docRow},l.createElement(m,{title:"Kas põhiline?",name:"default_",value:!!e.docData.default_,ref:"checkbox_default_",onChange:e.handleInputChange,readOnly:!1}))),l.createElement("div",null,l.createElement("span",null,a)))):l.createElement("div",null)}}]),t}(l.PureComponent);g.propTypes={docId:s.number,initData:s.object},g.defaultProps={initData:{}},e.exports=g},function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",width:"50%"},doc:{display:"flex",flexDirection:"column"},grid:{mainTable:{width:"100%"},headerTable:{width:"100%"},gridContainer:{width:"100%"}},gridRow:{backgroundColor:"white",position:"relative",margin:"10% 30% 10% 30%",width:"auto",opacity:"1",top:"100px"},btnEdit:{width:"min-content"}}}]);