var main=webpackJsonp_name_([0],{0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(1),i=(r(a),n(4)),o=n(24),s=r(o),l=n(62),c=n(63),u=n(108),d=r(u),p=n(72),h=n(109),f=h.BrowserRouter,m=(0,i.createStore)(s.default,(0,l.composeWithDevTools)((0,i.applyMiddleware)(d.default))),b=n(141);if(localStorage.getItem("user")){var y=JSON.parse(localStorage.getItem("user")),g=new Date,v=y.loadedDate?new Date(y.loadedDate):null;v&&v.getDate()===g.getDate()?m.dispatch({type:"user",user:y}):delete localStorage.user}m.dispatch({type:"model",payload:"main"}),p.hydrate(React.createElement(c.Provider,{store:m},React.createElement(f,null,React.createElement(b,{store:m}))),document.getElementById("doc"))},141:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(66),c=(n(113),n(142)),u=n(259),d=n(109),p=d.Route,h=n(162),f=h.StyleRoot,m="main",b=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={updated:!1},n}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.store;return l.createElement(f,null,l.createElement(p,{exact:!0,path:"/main",render:function(t){return l.createElement(c,{store:e,history:t.history,module:m})}}),l.createElement(p,{exact:!0,path:"/main/:docId",render:function(t){return l.createElement(u,o({},t,{history:t.history,store:e}))}}),l.createElement(p,{exact:!0,path:"/",render:function(t){return l.createElement(c,{store:e,history:t.history,module:m})}}))}}]),t}(l.Component);e.exports=b},142:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(66),l=n(143),c=n(31),u=n(144),d=(n(160),n(251)),p=n(252),h=n(254),f=n(256),m=n(257),b=n(145),y=n(258),g={btnStart:{show:!0},btnLogin:{show:!0,disabled:!1},btnAccount:{show:!0,disabled:!1}},v=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.btnClickEventHandler=n.btnClickEventHandler.bind(n),n.fetchData=n.fetchData.bind(n),n.btnAddClick=n.btnAddClick.bind(n),n.loadLibs=n.loadLibs.bind(n),n.data=[],n.state={warning:null,warningStyle:null,initLoad:!1,editDocument:!1,pictureId:null,activeComponent:"pictures",filter:""};var i=n.props.store;return i&&i.subscribe(function(){var e=i.getState().filters.filter,t=i.getState().statuses.activePageComponent;e.searchText===n.state.filter&&JSON.stringify(e.additionalFilter)===JSON.stringify(n.state.additionalFilter)||n.setState({filter:e.searchText,additionalFilter:e.additionalFilter},function(){n.fetchData()}),t!==n.state.activeComponent&&n.setState({activeComponent:t},function(){return n.fetchData()});var r=i.getState().statuses.reloadActivePageComponent;r&&(i.dispatch({type:"reloadActivePageComponent",reloadActivePageComponent:!1}),n.fetchData())}),n}return i(t,e),o(t,[{key:"componentDidMount",value:function(){this.fetchData(),this.loadLibs("reload","authors")}},{key:"render",value:function(){var e=Object.assign({},l,this.props.style?this.props.style:{}),t=this.state.warningStyle&&l[this.state.warningStyle]?l[this.state.warningStyle]:null;return s.createElement("div",{style:e.doc},s.createElement(u,{params:g,ref:"menu",store:this.props.store,btnClickEventHandler:this.btnClickEventHandler,history:this.props.history,module:this.props.module}),this.state.warning?s.createElement(b,{ref:"toolbar-container"},s.createElement("div",{style:t},s.createElement("span",null,this.state.warning))):null,s.createElement("div",{style:l.pageFrame},s.createElement("div",{style:l.filterFrame},s.createElement("span",null,"Addition filters"),s.createElement(y,{store:this.props.store})),s.createElement("div",{style:l.componentFrame},"pictures"==this.state.activeComponent?s.createElement(d,{store:this.props.store,btnClickEventHandler:this.btnClickEventHandler}):null,"DEALS"==this.state.activeComponent?s.createElement(f,{store:this.props.store,btnClickEventHandler:this.btnClickEventHandler}):null,"TAOTLUS_LOGIN"==this.state.activeComponent?s.createElement(h,{store:this.props.store,btnClickEventHandler:this.btnClickEventHandler}):null,"AUTHORS"==this.state.activeComponent?s.createElement(m,{store:this.props.store,btnClickEventHandler:this.btnClickEventHandler}):null)),"pictures"==this.state.activeComponent&&this.state.editDocument?s.createElement(p,{store:this.props.store,id:this.state.pictureId,show:!0,btnClickEventHandler:this.btnClickEventHandler}):null)}},{key:"btnClickEventHandler",value:function(e,t){switch(e){case"btnAdd":this.props.store.dispatch({type:"pictureId",pictureId:null}),this.props.store.dispatch({type:"isPictureShow",isPictureShow:!0}),this.setState({editDocument:!0,pictureId:null});break;case"reload":this.fetchData(),this.setState({editDocument:!1,pictureId:t});break;case"Cancel":this.setState({editDocument:!1,pictureId:null});break;case"saved":this.setState({editDocument:!1,pictureId:t})}}},{key:"renderDocToolBar",value:function(){var e={btnStart:{show:!0},btnAdd:{show:!0},btnLogin:{show:!0,disabled:!1},btnAccount:{show:!0,disabled:!1}};return s.createElement("div",null,s.createElement("div",{style:l.docRow},s.createElement(b,{ref:"toolbarContainer"},s.createElement(BtnAdd,{onClick:this.btnAddClick,show:e.btnAdd.show,disable:e.btnAdd.disabled}))))}},{key:"btnAddClick",value:function(){this.fetchData(),this.forceUpdate()}},{key:"loadLibs",value:function(e,t){var n=this,r=[];if("authors"===t&&(r=this.props.store.getState().authors.authors),!r||!r.length||"reload"===e){var a="/main/"+t;return new Promise(function(e,r){c.fetchDataPost(a).then(function(a){if(200!==a.status)return r();var i=n.props.store;i.dispatch({type:t,library:a.data.data}),n.forceUpdate(),e(a.data)}).catch(function(e){return r(e)})})}}},{key:"fetchData",value:function(e){var t=this;this.setState({warning:"Data is loading...",warningStyle:"info"});var n="/main/data/";"pictures"!==this.state.activeComponent&&(n="/main/"+this.state.activeComponent.toLowerCase()+"/"),e&&(n=e);var r=this.props.store.getState().statuses.user,a=this.props.store.getState().filters.filter.additionalFilter,i=this.props.store.getState().filters.filter.searchText,o={filter:i,additionalFilters:a,user:r};return new Promise(function(e,r){c.fetchDataPost(n,o).then(function(n){if(200!==n.status)return t.setState({warning:"Data loading error",warningStyle:"error"}),r();t.setState({warning:"Data loaded successfuly",warningStyle:"ok"});var a=t.props.store;switch(t.state.activeComponent){case"pictures":a.dispatch({type:"pictures",pictures:n.data.data});break;case"TAOTLUS_LOGIN":a.dispatch({type:"userApplications",userApplications:n.data.data});break;case"DEALS":a.dispatch({type:"deals",deals:n.data.data});break;case"AUTHORS":a.dispatch({type:"authors",library:n.data.data})}t.forceUpdate(),e(n.data)}).catch(function(e){return r(e)})})}}]),t}(s.PureComponent);e.exports=v},251:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(66),l=n(143),c=n(252),u=n(253),d=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={warning:null,initLoad:!1,pictures:[],user:{},editDocument:!1,saleDocument:!1,pictureId:null},n.btnClickHandler=n.btnClickHandler.bind(n);var i=n.props.store;return i&&i.subscribe(function(){var e=i.getState().pictures.pictures,t=i.getState().statuses.user;JSON.stringify(e)===JSON.stringify(n.state.pictures)&&JSON.stringify(t)===JSON.stringify(n.state.user)||n.setState({pictures:e,user:t},function(){n.forceUpdate()})}),n}return i(t,e),o(t,[{key:"render",value:function(){var e=this,t=void 0,n=this.state.pictures;!n.length&&this.props.store&&(n=this.props.store.getState().pictures.pictures);var r=!1,a=void 0,i=!1;this.props.store&&(a=this.props.store.getState().statuses.user,i=a.is_admin,r=!(!a||!a.id)),t=n&&n.length?n.map(function(t,n){return s.createElement("div",{style:Object.assign({},l.docRow,l.pictureFrame),key:t.id},s.createElement("div",{style:l.docColumn},s.createElement("div",{style:l.frame},s.createElement("img",{src:"data:image/jpeg;base64,/"+t.file,alt:"Image",key:t.id,style:l.img,href:"/main/"+t.id}))),s.createElement("div",{style:l.docColumn},s.createElement("div",{style:l.docRow,key:t.id},r?s.createElement("button",{style:l.btnEdit,onClick:function(){return e.btnClickHandler("edit",n)},onDoubleClick:function(){return e.btnClickHandler("edit",n)}},s.createElement("img",{ref:"image",src:l.icons.edit})):null,r&&1===t.status&&!i?s.createElement("button",{style:l.btnSale,onClick:function(){return e.btnClickHandler("sale",n)},onDoubleClick:function(){return e.btnClickHandler("sale",n)}},s.createElement("img",{ref:"image",src:l.icons.sale})):null),s.createElement("span",null,"Code: "),s.createElement("input",{value:t.kood||"",disabled:!0,name:"kood"}),s.createElement("span",null,"Description:"),s.createElement("input",{value:t.description||"",disabled:!0,name:"description"}),s.createElement("span",null,"Author:"),s.createElement("input",{value:t.author||"",disabled:!0,name:"Author"}),s.createElement("span",null,"Price:"),s.createElement("input",{value:t.price||"",disabled:!0,name:"Price"}),s.createElement("span",null,"Status:"),s.createElement("input",{value:t.status_name||"",disabled:!0,name:"Status"})))}):s.createElement("div",null,"Pictures are loading");var o=void 0;return this.props.store&&(o=this.props.store.getState().statuses.pictureId),s.createElement("div",null,t,this.state.editDocument?s.createElement(c,{store:this.props.store,id:o,show:!0,btnClickEventHandler:this.props.btnClickEventHandler}):null,this.state.saleDocument?s.createElement(u,{store:this.props.store,id:o,show:!0,btnClickEventHandler:this.props.btnClickEventHandler}):null)}},{key:"btnClickHandler",value:function(e,t){var n=this.props.store.getState().pictures.pictures,r=n[t].id;switch(this.props.store.dispatch({type:"pictureId",pictureId:r}),e){case"btnAdd":this.props.store.dispatch({type:"pictureId",pictureId:null}),this.props.store.dispatch({type:"isPictureShow",isPictureShow:!0}),this.setState({editDocument:!0,pictureId:null});break;case"edit":this.props.store.dispatch({type:"pictureId",pictureId:r}),this.props.store.dispatch({type:"isPictureShow",isPictureShow:!0}),this.setState({editDocument:!0,saleDocument:!1,pictureId:r});break;case"sale":this.props.store.dispatch({type:"isPictureShow",isPictureShow:!0}),this.setState({saleDocument:!0,editDocument:!1,pictureId:r})}}}]),t}(s.PureComponent);e.exports=d},252:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(113),l=n(66),c=n(143),u=n(31),d=n(245),p=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={selectedFile:"",selectedFiles:null,selectedFileType:"",uploadedImage:null,fileName:"",pictureShow:!0,id:n.props.id,lastId:0,kood:n.props.kood,description:n.props.description,author_id:0,author:""},n.onClickHandled=n.onClickHandled.bind(n),n.onChangeHandler=n.onChangeHandler.bind(n),n.fecthData=n.fecthData.bind(n),n.onChangeInput=n.onChangeInput.bind(n),n.getPictureFromStore=n.getPictureFromStore.bind(n);var i=n.props.store;return i&&i.subscribe(function(){var e=i.getState().statuses.isPictureShow,t=i.getState().authors.authors;n.setState({pictureShow:e,authors:t},function(){n.forceUpdate()})}),n}return i(t,e),o(t,[{key:"componentDidMount",value:function(){if(this.props.id){var e=this.getPictureFromStore();if(!e||!e.length)return;var t=this.props.store,n=t.getState().authors;n&&!n.length&&t.dispatch({type:"getAuthors",payload:[]}),this.setState({kood:e[0].kood,description:e[0].description,selectedFile:"data:image/jpeg;base64,/"+e[0].file,id:e[0].id,fileName:e[0].name,author_id:e[0].author_id})}}},{key:"render",value:function(){var e=".jpg, .png",t=[{id:0,code:"",name:""}].concat(this.props.store.getState().authors),n=this.getPictureFromStore(),r=n&&n.length?n[0]:0;r?n[0]=Object.assign({},n[0],this.state):(r=null,n=[{id:null,kood:this.state.kood,nimetus:this.state.nimetus,description:this.state.description,author_id:this.state.author_id,file:this.state.selectedFile}]);var a=n&&n.length&&n[0].id?"data:image/jpeg;base64,/"+n[0].file:this.state.uploadedImage;return l.createElement(d,{show:this.state.pictureShow,modalPageName:"Edit picture",modalPageBtnClick:this.onClickHandled},r?null:l.createElement("input",{type:"file",name:"file",onChange:this.onChangeHandler,accept:e}),l.createElement("div",{style:c.docRow},l.createElement("div",{style:c.pictureFrame},a?l.createElement("img",{src:a,alt:"Image",key:"img_1",style:c.picture}):null),l.createElement("div",{style:c.docColumn},l.createElement("label",null,"Kood: "),l.createElement("input",{type:"text",id:"kood",name:"kood",onChange:this.onChangeInput,value:n[0].kood||""}),l.createElement("label",null,"Description: "),l.createElement("input",{type:"text",id:"description",name:"description",onChange:this.onChangeInput,value:n[0].description||""}),l.createElement("label",null,"Athor: "),l.createElement("select",{ref:"select",style:c.select,value:n[0].author_id||0,id:"author",name:"author",onChange:this.onChangeInput},t.map(function(e,t){return l.createElement("option",{value:e.id}," ",e.code+"  "+e.name," ")})))))}},{key:"onChangeInput",value:function(e){var t=e.target.value,n=e.target.name;switch(n){case"kood":this.setState({kood:t});break;case"description":this.setState({description:t});break;case"author":var r="";if(t){var a=this.props.store.getState().authors.filter(function(e){return e.id==t});a&&(r=a[0].name)}this.setState({author_id:t,author:r})}}},{key:"onChangeHandler",value:function(e){var t=this,n=e.target.files[0],r=n.name,a=n.type,i=new FileReader;i.readAsDataURL(e.target.files[0]),i.onload=function(e){t.setState({uploadedImage:e.target.result,selectedFile:URL.createObjectURL(n),selectedFileType:a,fileName:r})}}},{key:"onClickHandled",value:function(e){"Ok"==e&&this.state.selectedFile&&this.fecthData(),this.props.store.dispatch({type:"isPictureShow",isPictureShow:!1}),this.setState({pictureShow:!this.state.pictureShow})}},{key:"fecthData",value:function(){var e=this,t=this.props.store.getState().user,n=new FormData,r=new File([this.state.uploadedImage],this.state.fileName);n.append("file",r,this.state.fileName),n.append("kood",this.state.kood),n.append("id",this.state.id),n.append("description",this.state.description),n.append("author_id",this.state.author_id?this.state.author_id:t.id),u.fetchDataPost("/upload",n,this.state.selectedFileType).then(function(t){e.setState({id:t.data.result});var n=e.props.store;n.dispatch({type:"addPicture",picture:t.data.docdata}),e.props.btnClickEventHandler("saved",t.data.result)})}},{key:"getPictureFromStore",value:function(){var e=this.props.store;if(!e)return[];var t=e.getState().pictures.pictures,n=e.getState().statuses.pictureId;return t.filter(function(e){return e.id===n})}}]),t}(l.PureComponent);p.propTypes={disabled:s.bool,pictureShow:s.bool},p.defaultProps={disabled:(!1).valueOf(),pages:[]},e.exports=p},253:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(113),l=n(66),c=n(143),u=n(31),d=n(245),p=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={selectedFile:"",selectedFiles:null,selectedFileType:"",uploadedImage:null,fileName:"",show:n.props.show,id:n.props.id,lastId:0,kood:n.props.kood,description:n.props.description,author_id:0,author:"",price:n.props.price},n.onClickHandled=n.onClickHandled.bind(n),n.fecthData=n.fecthData.bind(n),n.onChangeInput=n.onChangeInput.bind(n),n.getPictureFromStore=n.getPictureFromStore.bind(n);var i=n.props.store;return i&&i.subscribe(function(){var e=i.getState().statuses.isPictureShow,t=i.getState().statuses.pictureId,r=n.getPictureFromStore();n.setState({show:e,id:t,kood:r[0].kood,description:r[0].description,selectedFile:"data:image/jpeg;base64,/"+r[0].file,fileName:r[0].name,author_id:r[0].author_id,price:2*+r[0].price},function(){n.forceUpdate()})}),n}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.getPictureFromStore();e&&e.length&&this.setState({kood:e[0].kood,description:e[0].description,selectedFile:"data:image/jpeg;base64,/"+e[0].file,id:e[0].id,fileName:e[0].name,author_id:e[0].author_id,price:2*+e[0].price})}},{key:"render",value:function(){return l.createElement(d,{show:this.state.show,modalPageBtnClick:this.onClickHandled},l.createElement("div",{style:c.docRow},l.createElement("div",{style:c.pictureFrame},this.state.selectedFile?l.createElement("img",{src:this.state.selectedFile,alt:"Image",key:"img_1",style:c.picture}):null),l.createElement("div",{style:c.docColumn},l.createElement("label",null,"Kood: "),l.createElement("input",{type:"text",id:"kood",name:"kood",value:this.state.kood||"",disabled:!0}),l.createElement("label",null,"Description: "),l.createElement("input",{type:"text",id:"description",name:"description",value:this.state.description||"",disabled:!0}),l.createElement("label",null,"New price: "),l.createElement("input",{type:"number",ref:"price",value:this.state.price||0,id:"price",name:"price",onChange:this.onChangeInput}))))}},{key:"onChangeInput",value:function(e){var t=e.target.value,n=e.target.name;switch(n){case"price":this.setState({price:t})}}},{key:"onClickHandled",value:function(e){"Ok"==e&&this.fecthData();var t=this.props.store;t.dispatch({type:"isPictureShow",isPictureShow:!1})}},{key:"fecthData",value:function(){var e=this,t={picture_id:this.state.id,price:this.state.price,user:this.props.store.getState().statuses.user};u.fetchDataPost("/main/newDeal",t).then(function(t){e.setState({id:t.data.result});var n=e.props.store;n.dispatch({type:"reloadActivePageComponent",reloadActivePageComponent:!0})})}},{key:"getPictureFromStore",value:function(){var e=this.props.store;if(!e)return[];var t=e.getState().pictures.pictures,n=e.getState().statuses.pictureId;return n&&t&&t.length?t.filter(function(e){return e.id==n}):null}},{key:"loadPicture",value:function(){return source}}]),t}(l.PureComponent);p.propTypes={disabled:s.bool,show:s.bool},p.defaultProps={disabled:(!1).valueOf(),pages:[]},e.exports=p},254:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(66),l=n(143),c=n(31),u=n(255),d=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={warning:null,initLoad:!1,userApplications:[],user:{},info:null,editDocument:!1},n.btnClickHandler=n.btnClickHandler.bind(n),n.renderGridComponent=n.renderGridComponent.bind(n),n.fetchData=n.fetchData.bind(n);var i=n.props.store;return i&&i.subscribe(function(){var e=i.getState().userApplications.userApplications,t=i.getState().statuses.user;JSON.stringify(e)===JSON.stringify(n.state.userApplications)&&JSON.stringify(t)===JSON.stringify(n.state.user)||n.setState({userApplications:e,user:t},function(){n.forceUpdate()})}),n}return i(t,e),o(t,[{key:"render",value:function(){var e=void 0,t=this.state.userApplications;return!t.length&&this.props.store&&(t=this.props.store.getState().userApplications.userApplications),e=t&&t.length?this.renderGridComponent(t):s.createElement("div",null,"Data are loading")}},{key:"renderGridComponent",value:function(e){var t=this,n=this.state.user;n||(n=this.props.store.getState().statuses.user);var r=!(!n||!n.id),a=!(!n||!n.is_admin);return s.createElement("div",{style:l.grid.gridContainer},this.state.info?s.createElement("div",null,s.createElement("span",null,this.state.info)):null,s.createElement("table",{ref:"dataGridTable",style:l.grid.mainTable,onKeyPress:this.handleKeyDown},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("th",{style:l.grid.mainTable.th},"Login"),s.createElement("th",{style:l.grid.mainTable.th},"User name"),s.createElement("th",{style:l.grid.mainTable.th},"Email"),s.createElement("th",{style:l.grid.mainTable.th},"Status"))),e.map(function(e){return s.createElement("tr",null,s.createElement("td",{style:l.grid.mainTable.td},e.kasutaja),s.createElement("td",{style:l.grid.mainTable.td},e.nimi),s.createElement("td",{style:l.grid.mainTable.td},e.email),s.createElement("td",{style:l.grid.mainTable.td},e.status_name),s.createElement("td",{style:l.grid.mainTable.tdButtons},r?s.createElement("button",{style:l.btnEdit,onClick:function(){return t.btnClickHandler("edit",e.id)},onDoubleClick:function(){return t.btnClickHandler("edit",e.id)}},s.createElement("img",{ref:"image",src:l.icons.edit})):null,a&&0===e.status?s.createElement("button",{style:l.button_accept,onClick:function(){return t.btnClickHandler("accept",e.id)},onDoubleClick:function(){return t.btnClickHandler("accept",e.id)}},s.createElement("img",{ref:"image",src:l.icons.ok})):null,a?s.createElement("button",{style:l.button_delete,onClick:function(){return t.btnClickHandler("delete",e.id)},onDoubleClick:function(){return t.btnClickHandler("delete",e.id)}},s.createElement("img",{ref:"image",src:l.icons.delete})):null))})),this.state.editDocument?s.createElement(u,{store:this.props.store,show:!0,btnClickEventHandler:this.props.btnClickEventHandler}):null)}},{key:"btnClickHandler",value:function(e,t){"delete"!=e&&"accept"!=e||this.fetchData(e,t),"edit"==e&&(this.props.store.dispatch({type:"pictureId",pictureId:t}),this.props.store.dispatch({type:"isPictureShow",isPictureShow:!0}),this.setState({editDocument:!0,applicationId:t}))}},{key:"fetchData",value:function(e,t){var n=this;if("accept"===e){var r="/main/taotlus_accept/",a={id:t,event:e};return new Promise(function(e,t){c.fetchDataPost(r,a).then(function(r){return 200!==r.status?(n.setState({info:"Update with error"}),t()):(n.setState({info:"Update succefull"}),n.props.btnClickEventHandler&&n.props.btnClickEventHandler("reload"),e(r.data),void 0)}).catch(function(e){return n.setState({info:"Update with error "+e}),t(e)})})}}}]),t}(s.PureComponent);e.exports=d},255:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(113),c=n(66),u=n(143),d=n(31),p=n(245),h=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={kasutaja:"",login:"",code:"",name:"",id:0,email:"",aadress:"",continent:"",region:"",city:"",show:!0,isEditeMode:!1},n.onClickHandled=n.onClickHandled.bind(n),n.fecthData=n.fecthData.bind(n),n.onChangeInput=n.onChangeInput.bind(n),n.getAuthorFromStore=n.getAuthorFromStore.bind(n);var i=n.props.store;return i&&i.subscribe(function(){var e=i.getState().statuses.isPictureShow,t=n.getAuthorFromStore();n.setState({show:e,login:t[0].login,nimi:t[0].nimi,id:t[0].id,email:t[0].email,aadress:t[0].aadress,continent:t[0].continent,region:t[0].region,city:t[0].city},function(){n.forceUpdate()})}),n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.getAuthorFromStore();e&&e.length&&this.setState({login:e[0].login,code:e[0].code,name:e[0].name,id:e[0].id,email:e[0].email,aadress:e[0].aadress,continent:e[0].continent,region:e[0].region,city:e[0].city,show:!0})}},{key:"render",value:function(){var e=this.props.store.getState().statuses.isPictureShow,t=this.getAuthorFromStore()[0];return this.state.isEditeMode&&(t=this.state),c.createElement(p,{show:e,modalPageBtnClick:this.onClickHandled},c.createElement("div",{style:u.docRow},c.createElement("label",{style:u.label},"Login: "),c.createElement("input",{type:"text",id:"login",name:"login",disabled:!0,value:t.login||""})),c.createElement("div",{style:u.docRow},c.createElement("label",{style:u.label},"Code: "),c.createElement("input",{type:"text",id:"code",name:"code",onChange:this.onChangeInput,value:t.code||""})),c.createElement("div",{style:u.docRow},c.createElement("label",{style:u.label},"Name: "),c.createElement("input",{type:"text",id:"name",name:"name",onChange:this.onChangeInput,value:t.name||""})),c.createElement("div",{style:u.docRow},c.createElement("label",{style:u.label},"Email: "),c.createElement("input",{type:"text",ref:"email",value:t.email||"",id:"email",name:"email",onChange:this.onChangeInput})),c.createElement("div",{style:u.docRow},c.createElement("label",{style:u.label},"Address: "),c.createElement("input",{type:"text",ref:"aadress",value:t.aadress||"",id:"aadress",name:"aadress",onChange:this.onChangeInput})),c.createElement("div",{style:u.docRow},c.createElement("label",{style:u.label},"Continent: "),c.createElement("select",{ref:"select",style:u.select,value:t.continent||"",id:"continent",name:"continent",onChange:this.onChangeInput},this.props.store.getState().statuses.continents.map(function(e,t){return c.createElement("option",{value:e},e)}))),c.createElement("div",{style:u.docRow},c.createElement("label",{style:u.label},"Region: "),c.createElement("select",{ref:"select",style:u.select,value:t.region||"",id:"region",name:"region",onChange:this.onChangeInput},this.props.store.getState().statuses.regions.map(function(e,t){return c.createElement("option",{value:e},e)}))),c.createElement("div",{style:u.docRow},c.createElement("label",{style:u.label},"City: "),c.createElement("select",{ref:"city",style:u.select,value:t.city||"",id:"city",name:"city",onChange:this.onChangeInput},this.props.store.getState().statuses.cities.map(function(e,t){return c.createElement("option",{value:e},e)}))))}},{key:"onChangeInput",value:function(e){var t=e.target.value,n=e.target.name,r={};switch(r[n]=t,r=o({},this.state,{state:r}),n){case"code":this.setState({code:t,isEditeMode:!0});break;case"name":this.setState({name:t,isEditeMode:!0});break;case"aadress":this.setState({aadress:t,isEditeMode:!0});break;case"tel":this.setState({tel:t,isEditeMode:!0});break;case"email":this.setState({email:t,isEditeMode:!0});break;case"continent":this.setState({continent:t,isEditeMode:!0});break;case"region":this.setState({region:t,isEditeMode:!0});case"city":this.setState({city:t,isEditeMode:!0})}}},{key:"onClickHandled",value:function(e){"Ok"==e&&this.fecthData(),this.setState({show:!1});var t=this.props.store;t.dispatch({type:"isPictureShow",isPictureShow:!1})}},{key:"fecthData",value:function(){var e=this,t={id:this.state.id,code:this.state.code,name:this.state.name,email:this.state.email,aadress:this.state.aadress,continent:this.state.continent,region:this.state.region,city:this.state.city,user:this.props.store.getState().statuses.user};d.fetchDataPost("/main/save_author",t).then(function(t){e.setState({id:t.data.result});var n=e.props.store;
n.dispatch({type:"reloadActivePageComponent",reloadActivePageComponent:!0})})}},{key:"getAuthorFromStore",value:function(){var e=this.props.store;if(!e)return[];var t=e.getState().statuses.pictureId,n=e.getState().authors;return n.filter(function(e){return e.id==t})}}]),t}(c.PureComponent);h.propTypes={disabled:l.bool,show:l.bool},h.defaultProps={disabled:(!1).valueOf(),pages:[]},e.exports=h},256:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(66),l=n(143),c=n(31),u=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={warning:null,initLoad:!1,deals:[],user:{},info:null},n.btnClickHandler=n.btnClickHandler.bind(n),n.renderGridComponent=n.renderGridComponent.bind(n),n.fetchData=n.fetchData.bind(n);var i=n.props.store;return i&&i.subscribe(function(){var e=i.getState().deals.deals,t=i.getState().statuses.user;JSON.stringify(e)===JSON.stringify(n.state.deals)&&JSON.stringify(t)===JSON.stringify(n.state.user)||n.setState({deals:e,user:t},function(){n.forceUpdate()})}),n}return i(t,e),o(t,[{key:"render",value:function(){var e=void 0,t=this.state.deals;return!t.length&&this.props.store&&(t=this.props.store.getState().deals.deals),e=t&&t.length?this.renderGridComponent(t):s.createElement("div",null,"Data are loading")}},{key:"renderGridComponent",value:function(e){var t=this,n=this.state.user;n||(n=this.props.store.getState().statuses.user);var r=(!(!n||!n.id),!(!n||!n.is_admin));return s.createElement("div",{style:l.grid.gridContainer},this.state.info?s.createElement("div",null,s.createElement("span",null,this.state.info)):null,s.createElement("table",{ref:"dataGridTable",style:l.grid.mainTable,onKeyPress:this.handleKeyDown},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("th",{style:l.grid.mainTable.th},"kood"),s.createElement("th",{style:l.grid.mainTable.th},"Description"),s.createElement("th",{style:l.grid.mainTable.th},"Deal date"),s.createElement("th",{style:l.grid.mainTable.th},"Client"),s.createElement("th",{style:l.grid.mainTable.th},"Price"),s.createElement("th",{style:l.grid.mainTable.th},"Status"))),e.map(function(e,n){return s.createElement("tr",{onClick:t.handleCellClick.bind(t,n)},s.createElement("td",{style:l.grid.mainTable.td},e.kood),s.createElement("td",{style:l.grid.mainTable.td},e.description),s.createElement("td",{style:l.grid.mainTable.td},e.deal_date),s.createElement("td",{style:l.grid.mainTable.td},e.client),s.createElement("td",{style:l.grid.mainTable.td},e.price),s.createElement("td",{style:l.grid.mainTable.td},e.status_name),s.createElement("td",{style:l.grid.mainTable.tdButtons},r&&0===e.status?s.createElement("button",{style:l.button_accept,onClick:function(){t.btnClickHandler("accept",n)},onDoubleClick:function(){return t.btnClickHandler("accept",n)}},s.createElement("img",{ref:"image",src:l.icons.ok})):null,!r||1!==e.status&&0!==e.status?null:s.createElement("button",{style:l.button_delete,onClick:function(){return t.btnClickHandler("delete",n)},onDoubleClick:function(){return t.btnClickHandler("delete",n)}},s.createElement("img",{ref:"image",src:l.icons.delete}))))})))}},{key:"handleCellClick",value:function(e){}},{key:"btnClickHandler",value:function(e,t){var n=this.props.store.getState().deals.deals,r=n[t];this.fetchData(e,r.id)}},{key:"fetchData",value:function(e,t){var n=this,r="/main/deal_accept/",a=this.props.store.getState().statuses.user,i={id:t,event:e,user:a};return new Promise(function(e,t){c.fetchDataPost(r,i).then(function(r){return 200!==r.status?(n.setState({info:"Update with error"}),t()):(n.setState({info:"Update succefull"}),n.props.btnClickEventHandler&&n.props.btnClickEventHandler("reload"),e(r.data),void 0)}).catch(function(e){return n.setState({info:"Update with error "+e}),t(e)})})}}]),t}(s.PureComponent);e.exports=u},257:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(66),l=n(143),c=(n(31),n(255)),u=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={warning:null,initLoad:!1,authors:[],authorId:null,user:{},info:null},n.btnClickHandler=n.btnClickHandler.bind(n),n.renderGridComponent=n.renderGridComponent.bind(n);var i=n.props.store;return i&&i.subscribe(function(){var e=i.getState().authors,t=i.getState().statuses.user;JSON.stringify(e)===JSON.stringify(n.state.authors)&&JSON.stringify(t)===JSON.stringify(n.state.user)||n.setState({authors:e,user:t},function(){n.forceUpdate()})}),n}return i(t,e),o(t,[{key:"render",value:function(){var e=void 0,t=[],n=null;if(!t.length&&this.props.store){var r=this.props.store;t=r.getState().authors,n=r.getState().statuses.pictureId}return e=t&&t.length?this.renderGridComponent(t):s.createElement("div",null,"Data are loading"),s.createElement("div",null,e,this.state.editDocument?s.createElement(c,{store:this.props.store,id:n,show:!0,btnClickEventHandler:this.props.btnClickEventHandler}):null)}},{key:"renderGridComponent",value:function(e){var t=this,n=this.state.user;n||(n=this.props.store.getState().statuses.user);var r=!(!n||!n.id);!(!n||!n.is_admin);return s.createElement("div",{style:l.grid.gridContainer},this.state.info?s.createElement("div",null,s.createElement("span",null,this.state.info)):null,s.createElement("table",{ref:"dataGridTable",style:l.grid.mainTable,onKeyPress:this.handleKeyDown},s.createElement("tbody",null,s.createElement("tr",null,s.createElement("th",{style:l.grid.mainTable.th},"Login"),s.createElement("th",{style:l.grid.mainTable.th},"Code"),s.createElement("th",{style:l.grid.mainTable.th},"Name"),s.createElement("th",{style:l.grid.mainTable.th},"Phone"),s.createElement("th",{style:l.grid.mainTable.th},"Email"))),e.map(function(e){return s.createElement("tr",null,s.createElement("td",{style:l.grid.mainTable.td},e.login),s.createElement("td",{style:l.grid.mainTable.td},e.code),s.createElement("td",{style:l.grid.mainTable.td},e.name),s.createElement("td",{style:l.grid.mainTable.td},e.phone),s.createElement("td",{style:l.grid.mainTable.td},e.email),s.createElement("td",{style:l.grid.mainTable.td},r?s.createElement("button",{style:l.btnEdit,onClick:function(){return t.btnClickHandler("edit",e.id)},onDoubleClick:function(){return t.btnClickHandler("edit",e.id)}},s.createElement("img",{ref:"image",src:l.icons.edit})):null))})))}},{key:"btnClickHandler",value:function(e,t){switch(this.props.store.dispatch({type:"pictureId",pictureId:t}),e){case"btnAdd":break;case"edit":this.props.store.dispatch({type:"isPictureShow",isPictureShow:!0}),this.setState({editDocument:!0,authorId:t});break;case"Cancel":this.setState({editDocument:!1,authorId:null});break;case"saved":this.setState({editDocument:!1,authorId:t})}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.deals!==t.deals||JSON.stringify(e.user)!==JSON.stringify(t.user)?{value:e.deals,user:e.user}:null}}]),t}(s.PureComponent);e.exports=u},258:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(162),l=n(66),c=n(143),u=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={value:"",region:"",continent:"",city:""},n.onChange=n.onChange.bind(n),n.updateStore=n.updateStore.bind(n),n}return i(t,e),o(t,[{key:"onChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){var e=this.props.store,t=[],n=[],r=[];return e&&(t=e.getState().statuses.regions,n=e.getState().statuses.continents,r=e.getState().statuses.cities),l.createElement("div",null,l.createElement("div",{style:c.filterBlock},l.createElement("label",{style:c.filterLabel},"Continents: "),l.createElement("select",{ref:"select-continents",style:c.select,value:this.state.continent||"",id:"continent",name:"continent",onChange:this.onChange},n.map(function(e,t){return l.createElement("option",{value:e}," ",""+e," ")}))),l.createElement("div",{style:c.filterBlock},l.createElement("label",{style:c.filterLabel},"Regions: "),l.createElement("select",{ref:"select-region",style:c.select,value:this.state.region||"",id:"region",name:"region",onChange:this.onChange},t.map(function(e,t){return l.createElement("option",{value:e}," ",""+e," ")}))),l.createElement("div",{style:c.filterBlock},l.createElement("label",{style:c.filterLabel},"Cities: "),l.createElement("select",{ref:"select-cities",style:c.select,value:this.state.city||"",id:"city",name:"city",onChange:this.onChange},r.map(function(e,t){return l.createElement("option",{value:e}," ",""+e," ")}))))}},{key:"onChange",value:function(e){var t=this,n=e.target.name;switch(n){case"continent":this.setState({continent:e.target.value},function(){return t.updateStore()});break;case"region":this.setState({region:e.target.value},function(){return t.updateStore()});break;case"city":this.setState({city:e.target.value},function(){return t.updateStore()})}}},{key:"updateStore",value:function(){var e={continent:this.state.continent,region:this.state.region,city:this.state.city};this.props.store.dispatch({type:"additionalFilter",additionalFilter:e})}}]),t}(l.PureComponent);e.exports=s(u)},259:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=(n(113),n(66)),l=n(31),c=(n(1),n(260)),u=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={docId:0,reloadData:!0,data:[],id:0,selectedFile:null,selectedFileType:"",uploadedImage:null,fileName:""},n.fetchData=n.fetchData.bind(n),n.btnClick=n.btnClick.bind(n),n.renderToolBar=n.renderToolBar.bind(n),n.onChangeInput=n.onChangeInput.bind(n),n.onChangeHandler=n.onChangeHandler.bind(n),n}return i(t,e),o(t,[{key:"componentDidMount",value:function(){this.state.reloadData&&this.props.match&&this.props.match.params.docId&&this.fetchData(this.props.match.params.docId)}},{key:"render",value:function(){return s.createElement("div",{style:c.doc},this.renderToolBar(),this.state.data.id?null:s.createElement("input",{type:"file",name:"file",onChange:this.onChangeHandler,accept:".jpg"}),s.createElement("div",{style:c.docRow},s.createElement("div",{style:c.docColumn},s.createElement("label",null,"Code: "),s.createElement("input",{type:"text",id:"code",name:"kood",onChange:this.onChangeInput,value:this.state.data.kood||""}),s.createElement("label",null,"Description: "),s.createElement("input",{type:"text",id:"description",name:"description",onChange:this.onChangeInput,value:this.state.data.description||""})),s.createElement("div",{style:c.docColumn},s.createElement("div",{style:c.pictureFrame},this.state.data.file?s.createElement("img",{src:this.state.data.id?"data:image/jpeg;base64,/"+this.state.data.file:this.state.uploadedImage,alt:"Image",key:"img_1",style:c.picture}):null))))}},{key:"onChangeInput",value:function(e){var t=e.target.value,n=e.target.name,r=this.state.data;switch(n){case"kood":r.kood=t;break;case"description":r.description=t}this.setState({data:r})}},{key:"onChangeHandler",value:function(e){var t=this,n=e.target.files[0],r=n.name,a=n.type,i=new FileReader;i.readAsDataURL(e.target.files[0]);var o=this.state.data;o.file="file",i.onload=function(e){t.setState({uploadedImage:e.target.result,selectedFile:URL.createObjectURL(n),selectedFileType:a,fileName:r,data:o})}}},{key:"renderToolBar",value:function(){var e=Object.assign({},c.toolBarContainerStyle,c.right);return s.createElement("div",null,s.createElement("div",{style:c.docRow},s.createElement("div",{ref:"toolbarContainer",style:e},s.createElement("button",{onClick:this.btnClick},"Save"))))}},{key:"btnClick",value:function(e){var t=this,n=new FormData;if(!this.state.data.id){var r=new File([this.state.uploadedImage],this.state.fileName);n.append("file",r,this.state.fileName)}return n.append("id",this.state.data.id),n.append("kood",this.state.data.kood),n.append("description",this.state.data.description),new Promise(function(e,r){l.fetchDataPost("/upload",n,t.state.selectedFileType).then(function(n){return 200===n.status&&n.data.result?(e(n.data),t.props.history.push({pathname:"/"})):r()})})}},{key:"fetchData",value:function(e){var t=this,n="/main/data/"+e,r={};return new Promise(function(e,a){l.fetchDataPost(n,r).then(function(n){return 200!==n.status?a():(t.setState({reload:!1,data:n.data.data[0]}),void e(n.data))}).catch(function(e){return a(e)})})}}]),t}(s.Component);e.exports=u},260:function(e,t){"use strict";e.exports={docRow:{display:"flex",flexDirection:"row"},docColumn:{display:"flex",flexDirection:"column",margin:"auto"},doc:{display:"flex",flexDirection:"column"},ok:{backgroundColor:"lightgreen",width:"100%",textAlign:"right"},error:{backgroundColor:"lightcoral",width:"100%",textAlign:"right"},notValid:{backgroundColor:"yellow",width:"100%",textAlign:"right"},modalValidate:{iconImage:"/images/icons/info.png"},pictureFrame:{width:"50%"},picture:{objectFit:"contain",width:"100%"},toolBarContainerStyle:{display:"flex",width:"100%",height:"Auto",marginBottom:"5px",marginHeight:"5px",borderRadius:"5px"},right:{justifyContent:"flex-end"},left:{justifyContent:"flex-start"}}}});